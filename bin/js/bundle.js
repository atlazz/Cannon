var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var GameScene_1 = require("./script/runtime/GameScene");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("script/runtime/GameScene.ts", GameScene_1.default);
    };
    GameConfig.width = 640;
    GameConfig.height = 1136;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "game/GameScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = true;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./script/runtime/GameScene":8}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/** version */
exports.VERSION = "1.0.0";
/** pages */
exports.URL_HomeView = "home/HomeView.scene";
exports.URL_GameScene = "game/GameScene.scene";
exports.URL_OverView = "over/OverView.scene";
exports.URL_ReviveView = "dialog/ReviveView.scene";
/** camera */
exports.CameraInitPos = new Laya.Vector3(0, 0.5, 0);
exports.CameraInitRotEuler = new Laya.Vector3(0, 0, 0);
/** directional light */
exports.LightInitPos = new Laya.Vector3(-3, 5, 0);
exports.LightInitRotEuler = new Laya.Vector3(-45, -30, 0);
/** game stage */
exports.StageResUrl = "res/stage/out/Boss";
exports.StageInitPos = new Laya.Vector3(0, 0, 0);
exports.StageInitRot = new Laya.Vector3(0, 180, 0);
exports.StageInitScale = new Laya.Vector3(40, 40, 40);
exports.StageNum = 30;
// winning check frame
exports.WinCheckTime = 120;
/** glass */
exports.GlassBrokenVelocity = 3;
/** obstacle piece */
exports.PieceResUrl = "res/cube_piece.lm";
exports.PiecesNum = 3;
exports.PiecesBrokenTime = 120;
/** bullet */
exports.BulletResUrl = "res/bullet.lh";
exports.BulletInitPos = new Laya.Vector3(0, 0, -5);
exports.BulletInitRot = new Laya.Vector3(180, 0, 0);
exports.BulletRadius = 0.15;
/** player */
exports.PlayerResUrl = "res/human.lh";
exports.PlayerInitPos = new Laya.Vector3(0, 0, -1);
exports.PlayerInitRot = new Laya.Vector3(90, 168, 0);
exports.PlayerInitScale = new Laya.Vector3(20, 20, 20);
exports.PlayerShootLifeTime = 10;
},{}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameScene_1 = require("../runtime/GameScene");
var BulletScript = /** @class */ (function (_super) {
    __extends(BulletScript, _super);
    function BulletScript() {
        var _this = _super.call(this) || this;
        _this.lifetime = 120;
        _this.collisionBlackList = ["bullet", "player"];
        return _this;
    }
    BulletScript.prototype.onAwake = function () {
        this.bullet = this.owner;
    };
    BulletScript.prototype.onUpdate = function () {
        var _this = this;
        // check spirte alive
        if (this.bullet.destroyed) {
            this.destroy();
            return;
        }
        // update lifetime
        this.lifetime--;
        if (this.lifetime < 0) {
            Laya.timer.frameOnce(1, this, function () {
                // update counter
                GameScene_1.default.instance.currBulletNum++;
                // destroy
                _this.bullet.removeSelf();
                _this.destroy();
            });
        }
    };
    return BulletScript;
}(Laya.Script3D));
exports.default = BulletScript;
},{"../runtime/GameScene":8}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Guard = /** @class */ (function (_super) {
    __extends(Guard, _super);
    function Guard() {
        var _this = _super.call(this) || this;
        _this.MaxMoveTimes = 60;
        _this.moveTimes = 0;
        return _this;
    }
    Guard.prototype.onAwake = function () {
        // get sprite
        this.guard = this.owner;
        // get size
        var boundingBox = this.guard.meshFilter.sharedMesh.boundingBox.clone();
        this.sizeX = boundingBox.max.x - boundingBox.min.x;
        this.sizeY = boundingBox.max.y - boundingBox.min.y;
        this.sizeZ = boundingBox.max.z - boundingBox.min.z;
        // add collider
        var collider = this.guard.addComponent(Laya.PhysicsCollider);
        collider.colliderShape = new Laya.BoxColliderShape(this.sizeX, this.sizeY, this.sizeZ);
        // record init pos
        this.initPos = this.guard.transform.localPosition.clone();
    };
    Guard.prototype.onUpdate = function () {
        // check spirte alive
        if (this.guard.destroyed) {
            this.destroy();
            return;
        }
        /** 平移 */
        this.moveTimes = (this.moveTimes + 1) % (this.MaxMoveTimes * 2);
        // 位移方向标志
        var flag = Math.floor((this.moveTimes / this.MaxMoveTimes) % 2);
        // X和Y方向平移步进
        var moveStepX = this.sizeX * this.guard.transform.localScaleX / 2 / this.MaxMoveTimes;
        var moveStepY = this.sizeY * this.guard.transform.localScaleY / 2 / this.MaxMoveTimes;
        // Z轴旋转90，X和Y互换
        if (Math.floor((Math.abs(this.guard.transform.localRotationEulerZ) + 90.5) % 180) === 0) {
            var tmp = moveStepX;
            moveStepX = moveStepY;
            moveStepY = tmp;
        }
        // 全屏水平移动
        if (this.guard.name.search("move_x") >= 0) {
            this.MaxMoveTimes = 120;
            moveStepX = this.initPos.x * 2 / this.MaxMoveTimes;
            flag = Math.floor((this.moveTimes / this.MaxMoveTimes) % 2);
            if (flag) {
                this.guard.transform.localPositionX += moveStepX;
            }
            else {
                this.guard.transform.localPositionX -= moveStepX;
            }
        }
        // 全屏纵向移动
        else if (this.guard.name.search("move_y") >= 0) {
            this.MaxMoveTimes = 120;
            moveStepY = this.initPos.y * 2 / this.MaxMoveTimes;
            flag = Math.floor((this.moveTimes / this.MaxMoveTimes) % 2);
            if (flag) {
                this.guard.transform.localPositionY += moveStepY;
            }
            else {
                this.guard.transform.localPositionY -= moveStepY;
            }
        }
        // 半屏移动
        else if (this.guard.name.search("move_left") >= 0) {
            if (flag) {
                this.guard.transform.localPositionX -= moveStepX;
            }
            else {
                this.guard.transform.localPositionX += moveStepX;
            }
        }
        else if (this.guard.name.search("move_right") >= 0) {
            if (flag) {
                this.guard.transform.localPositionX += moveStepX;
            }
            else {
                this.guard.transform.localPositionX -= moveStepX;
            }
        }
        else if (this.guard.name.search("move_up") >= 0) {
            if (flag) {
                this.guard.transform.localPositionY -= moveStepY;
            }
            else {
                this.guard.transform.localPositionY += moveStepY;
            }
        }
        else if (this.guard.name.search("move_down") >= 0) {
            if (flag) {
                this.guard.transform.localPositionY += moveStepY;
            }
            else {
                this.guard.transform.localPositionY -= moveStepY;
            }
        }
        /** 旋转 */
        else if (this.guard.name.search("rotate_left") >= 0) {
            this.guard.transform.localRotationEulerY = (this.guard.transform.localRotationEulerY + 1) % 360;
        }
        else if (this.guard.name.search("rotate_right") >= 0) {
            this.guard.transform.localRotationEulerY = (this.guard.transform.localRotationEulerY - 1) % 360;
        }
        else if (this.guard.name.search("rotate_up") >= 0) {
            this.guard.transform.localRotationEulerX = (this.guard.transform.localRotationEulerX + 1) % 360;
        }
        else if (this.guard.name.search("rotate_down") >= 0) {
            this.guard.transform.localRotationEulerX = (this.guard.transform.localRotationEulerX - 1) % 360;
        }
    };
    return Guard;
}(Laya.Script3D));
exports.default = Guard;
},{}],6:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Const = require("../Const");
var GameScene_1 = require("../runtime/GameScene");
var Stand = /** @class */ (function (_super) {
    __extends(Stand, _super);
    function Stand() {
        var _this = _super.call(this) || this;
        _this.isWinCheck = false;
        _this.winCount = 0;
        _this.collisionBlackList = ["stand", "bullet", "piece"];
        return _this;
    }
    Stand.prototype.onAwake = function () {
        this.stand = this.owner;
        this.isWinCheck = false;
    };
    Stand.prototype.onUpdate = function () {
        // check spirte alive
        if (this.stand.destroyed) {
            this.destroy();
            return;
        }
        /** win check */
        this.winCount++;
        if (!this.isWinCheck && this.winCount > Const.WinCheckTime) {
            GameScene_1.default.instance.standClearCnt++;
            this.isWinCheck = true;
        }
    };
    Stand.prototype.onCollisionStay = function (collision) {
        if (this.collisionBlackList.indexOf(collision.other.owner.name) < 0) {
            this.winCount = 0;
            // 避免空台子判断后台子上有掉落物体
            if (this.isWinCheck) {
                GameScene_1.default.instance.standClearCnt--;
                this.isWinCheck = false;
            }
        }
    };
    return Stand;
}(Laya.Script3D));
exports.default = Stand;
},{"../Const":3,"../runtime/GameScene":8}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Const = require("../Const");
var GameScene_1 = require("../runtime/GameScene");
var Target = /** @class */ (function (_super) {
    __extends(Target, _super);
    function Target() {
        var _this = _super.call(this) || this;
        _this.type = 1 /* DEFAULT */;
        _this.collisionBlackList = ["stand", "Guard"];
        /** target object pieces */
        _this.piecesList = [];
        return _this;
    }
    Target.prototype.onAwake = function () {
        this.target = this.owner;
        this.setRigidbody();
        this.initPieces();
    };
    Target.prototype.onCollisionEnter = function (collision) {
        var other = collision.other.owner;
        // if (this.collisionBlackList.indexOf(other.name) < 0) {
        if (this.type === 2 /* GLASS */) {
            // 相对速度高可击碎
            var velocity = this.target.getComponent(Laya.Rigidbody3D).linearVelocity.clone();
            var velocityOther = new Laya.Vector3(0, 0, 0);
            // not playform
            if (this.collisionBlackList.indexOf(other.name) < 0 && other.name.indexOf("Guard") < 0) {
                velocityOther = other.getComponent(Laya.Rigidbody3D).linearVelocity.clone();
            }
            Laya.Vector3.subtract(velocity, velocityOther, velocity);
            var velocityValue = Math.sqrt(Math.pow(velocity.x, 2) + Math.pow(velocity.y, 2) + Math.pow(velocity.z, 2));
            if (velocityValue >= Const.GlassBrokenVelocity) {
                // this.isHit = true;
                this.broken();
            }
        }
        // }
    };
    Target.prototype.onUpdate = function () {
        // check spirte alive
        if (this.target.destroyed) {
            this.destroy();
            return;
        }
        // physics engine bug detecting and fixing
        this.physics_engine_bug_fixing();
        // // hit handling
        // if (this.isHit) {
        //     if (this.type === Const.TargetType.GLASS) {
        //         this.broken();
        //     }
        // }
    };
    /** physics engine bug detecting and fixing
     *  引擎bug：姿态稳定情况下，某个物体作用力方向（如重力时的底下）的碰撞物体快速消失，
     *  而此过程中相互作用影响过小导致自身姿态没有变化时，引擎会自动将该物体的刚体非激活，从而导致腾空现象，
     *  增大物体间相互作用力（如摩擦系数）可减少该情况发生，但不能杜绝，
     *  故在此检测该情况并对刚体销毁重建
     * */
    Target.prototype.physics_engine_bug_fixing = function () {
        var rigidbody = this.target.getComponent(Laya.Rigidbody3D);
        if (rigidbody.isActive == false) {
            rigidbody.destroy();
            this.setRigidbody();
            console.log("Physics_engine_bug_fixing: Reset rigidbody.");
        }
    };
    /** set material by type */
    Target.prototype.setType = function (type) {
        this.type = type;
        if (this.type === 2 /* GLASS */) {
            var mat = new Laya.BlinnPhongMaterial();
            mat.renderMode = Laya.BlinnPhongMaterial.RENDERMODE_TRANSPARENT;
            mat.albedoColor = new Laya.Vector4(0.7, 0.7, 1, 0.7);
            this.target.meshRenderer.material = mat;
        }
    };
    /** set rigidbody */
    Target.prototype.setRigidbody = function () {
        // get size of bounding box
        var boundingBox = this.target.meshFilter.sharedMesh.boundingBox.clone();
        this.sizeX = boundingBox.max.x - boundingBox.min.x;
        this.sizeY = boundingBox.max.y - boundingBox.min.y;
        this.sizeZ = boundingBox.max.z - boundingBox.min.z;
        // add rigidbody
        var rigidbody = this.target.addComponent(Laya.Rigidbody3D);
        if (this.target.name.search("Cube") >= 0) {
            rigidbody.colliderShape = new Laya.BoxColliderShape(this.sizeX, this.sizeY, this.sizeZ);
        }
        else {
            var colliderShape = new Laya.MeshColliderShape();
            colliderShape.mesh = this.target.meshFilter.sharedMesh;
            rigidbody.colliderShape = colliderShape;
        }
        this.setPhysicsParam();
    };
    /** set physics param */
    Target.prototype.setPhysicsParam = function () {
        var rigidbody = this.target.getComponent(Laya.Rigidbody3D);
        rigidbody.isKinematic = false;
        if (this.type === 1 /* DEFAULT */) {
            rigidbody.mass = 10;
            rigidbody.friction = 10;
        }
        else if (this.type === 2 /* GLASS */) {
            rigidbody.mass = 0.1;
            rigidbody.friction = 2;
        }
    };
    /** set target broken */
    Target.prototype.broken = function () {
        // play broken sound
        var _this = this;
        // show pieces
        this.effectPiecesBroken();
        // hide target
        Laya.timer.frameOnce(1, this, function () {
            _this.target.active = false;
        });
    };
    /** init target pieces */
    Target.prototype.initPieces = function () {
        var _this = this;
        Laya.Mesh.load(Const.PieceResUrl, Laya.Handler.create(this, function (mesh) {
            var piece = new Laya.MeshSprite3D(mesh);
            piece.active = false;
            piece.name = "piece";
            // set material
            var mat = new Laya.BlinnPhongMaterial();
            mat.renderMode = Laya.BlinnPhongMaterial.RENDERMODE_TRANSPARENT;
            mat.albedoColor = new Laya.Vector4(0.7, 0.7, 1, 0.7);
            piece.meshRenderer.material = mat;
            // set rigidbody
            var pieceRigid = piece.addComponent(Laya.Rigidbody3D);
            var pieceColliderShape = new Laya.MeshColliderShape();
            pieceColliderShape.mesh = piece.meshFilter.sharedMesh;
            pieceRigid.colliderShape = pieceColliderShape;
            // add pieces to scene
            for (var i = 0; i < Const.PiecesNum; i++) {
                _this.piecesList.push(piece.clone());
                GameScene_1.default.instance.scene3D.addChild(_this.piecesList[i]);
            }
        }));
    };
    /** platy effect: target broken to pieces */
    Target.prototype.effectPiecesBroken = function () {
        var _this = this;
        var _loop_1 = function (idx) {
            // active pieces
            this_1.piecesList[idx].active = true;
            // set size scale
            var scaleX = (Math.random() * 0.5 + 0.5) * 1.5 * this_1.sizeX * this_1.target.transform.localScaleX * Const.StageInitScale.x;
            var scaleY = (Math.random() * 0.5 + 0.5) * 1.5 * this_1.sizeY * this_1.target.transform.localScaleY * Const.StageInitScale.y;
            var scaleZ = (Math.random() * 0.5 + 0.5) * 1.5 * this_1.sizeZ * this_1.target.transform.localScaleZ * Const.StageInitScale.z;
            this_1.piecesList[idx].transform.localScale = new Laya.Vector3(scaleX, scaleY, scaleZ);
            // set rot
            this_1.piecesList[idx].transform.localRotationEulerX = (Math.random() - 0.5) * 2 * 90;
            this_1.piecesList[idx].transform.localRotationEulerY = (Math.random() - 0.5) * 2 * 90;
            this_1.piecesList[idx].transform.localRotationEulerZ = (Math.random() - 0.5) * 2 * 90;
            // set pos
            var velocity = new Laya.Vector3();
            velocity.x = (Math.random() - 0.5) * Const.BulletRadius;
            velocity.y = (Math.random() - 0.5) * Const.BulletRadius;
            velocity.z = (Math.random() - 0.5) * Const.BulletRadius;
            this_1.piecesList[idx].transform.position = this_1.target.transform.position.clone();
            Laya.Vector3.add(this_1.piecesList[idx].transform.localPosition, velocity, this_1.piecesList[idx].transform.localPosition);
            // set velocity of pieces
            Laya.Vector3.scale(velocity, 50, velocity);
            this_1.piecesList[idx].getComponent(Laya.Rigidbody3D).linearVelocity = velocity.clone();
            // set hiding effect
            Laya.Tween.to(this_1.piecesList[idx].transform.localScale, { x: scaleX / 2, y: scaleY / 2, z: scaleZ / 2 }, Const.PiecesBrokenTime / 60 * 1000, Laya.Ease.linearNone);
            Laya.Tween.to(this_1.piecesList[idx].meshRenderer.material, { albedoColorA: 0 }, Const.PiecesBrokenTime / 60 * 1000, Laya.Ease.linearNone, Laya.Handler.create(this_1, function () {
                _this.piecesList[+idx].destroy();
            }));
        };
        var this_1 = this;
        for (var idx in this.piecesList) {
            _loop_1(idx);
        }
    };
    return Target;
}(Laya.Script3D));
exports.default = Target;
},{"../Const":3,"../runtime/GameScene":8}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var layaMaxUI_1 = require("./../../ui/layaMaxUI");
var Const = require("../Const");
var Bullet_1 = require("../component/Bullet");
var Stand_1 = require("../component/Stand");
var Target_1 = require("../component/Target");
var Guard_1 = require("../component/Guard");
var GameScene = /** @class */ (function (_super) {
    __extends(GameScene, _super);
    function GameScene() {
        var _this = _super.call(this) || this;
        _this.MaxBulletNum = 20;
        _this.currBulletNum = 0;
        _this.bulletRadius = 0.02;
        _this.bulletVelocity = 1;
        _this.bulletDirection = new Laya.Vector3();
        _this.shootTime = -1;
        /** raycast */
        _this.mousePoint = new Laya.Vector2();
        _this.ray = new Laya.Ray(new Laya.Vector3(0, 0, 0), new Laya.Vector3(0, 0, 0));
        _this.hitResult = new Laya.HitResult();
        /** game state */
        _this.state = 0;
        GameScene.instance = _this;
        _this.initScene3D();
        _this.initPlayer();
        _this.initBullet();
        _this.stageIdx = 1;
        _this.loadGameStage();
        return _this;
    }
    /**
     * 打开该单例页面，触发onOpened
     * @param param  onOpened方法的传参
     */
    GameScene.openInstance = function (param) {
        if (GameScene.instance) {
            GameScene.instance.onOpened(param);
            // GameScene.instance.showTutorial();
        }
        else {
            Laya.Scene.open(Const.URL_GameScene, false, param);
        }
    };
    GameScene.prototype.onOpened = function (param) {
        this.visible = true;
        // this.state = Const.GameState.READY;
    };
    ;
    /** initialize scene */
    GameScene.prototype.initScene3D = function () {
        // add scene
        this.scene3D = Laya.stage.addChild(new Laya.Scene3D());
        // camera
        this.camera = this.scene3D.addChild(new Laya.Camera());
        this.camera.transform.localPosition = Const.CameraInitPos.clone();
        this.camera.transform.localRotationEuler = Const.CameraInitRotEuler.clone();
        // direction light
        this.directionLight = this.scene3D.addChild(new Laya.DirectionLight());
        this.directionLight.transform.localPosition = Const.LightInitPos.clone();
        this.directionLight.transform.localRotationEuler = Const.LightInitRotEuler.clone();
    };
    /** initialize player */
    GameScene.prototype.initPlayer = function () {
        var _this = this;
        Laya.Sprite3D.load(Const.PlayerResUrl, Laya.Handler.create(this, function (res) {
            _this.player = res;
            _this.scene3D.addChild(_this.player);
            _this.playerAni = _this.player.getComponent(Laya.Animator);
            _this.player.transform.localPosition = Const.PlayerInitPos.clone();
            _this.player.transform.localRotationEuler = Const.PlayerInitRot.clone();
            _this.player.transform.localScale = Const.PlayerInitScale.clone();
            _this.player.name = "player";
            var shadowMat = _this.player.getChildByName("shadow_0").meshRenderer.material;
            shadowMat.renderMode = Laya.BlinnPhongMaterial.RENDERMODE_TRANSPARENT;
            shadowMat.albedoColorA = 0.2;
            // set shooting animation
            _this.playerAni.getDefaultState().clip.islooping = true;
            _this.playerAni.play();
            Laya.timer.frameLoop(1, _this, function () {
                // play shooting animation
                _this.shootTime--;
                if (_this.shootTime < 0) {
                    // stop playing
                    _this.playerAni.speed = 0;
                }
            });
        }));
    };
    /** initialize bullet */
    GameScene.prototype.initBullet = function () {
        this._bullet = new Laya.MeshSprite3D(Laya.PrimitiveMesh.createSphere(Const.BulletRadius));
        /** add rigidbody */
        var bulletRigid = this._bullet.addComponent(Laya.Rigidbody3D);
        bulletRigid.colliderShape = new Laya.SphereColliderShape(Const.BulletRadius);
        /** set physics */
        bulletRigid.mass = 10;
        bulletRigid.overrideGravity = true;
        bulletRigid.gravity = new Laya.Vector3(0, -5, 0);
        // quick moving detecion
        bulletRigid.ccdMotionThreshold = 0.0001;
        bulletRigid.ccdSweptSphereRadius = Const.BulletRadius;
        /** trasform */
        this._bullet.transform.localPosition = Const.BulletInitPos.clone();
        this._bullet.transform.localRotationEuler = Const.BulletInitRot.clone();
        this._bullet.name = "_bullet";
    };
    /** load game stage by index */
    GameScene.prototype.loadGameStage = function () {
        var _this = this;
        // reset
        this.gameStage && this.gameStage.destroyChildren();
        this.gameStage && this.gameStage.destroy();
        this.currBulletNum = 0;
        this.standNum = 0;
        this.standClearCnt = 0;
        // load stage
        var satgeResUrl = Const.StageResUrl + this.stageIdx + ".lh";
        Laya.Sprite3D.load(satgeResUrl, Laya.Handler.create(this, function (res) {
            _this.gameStage = _this.scene3D.addChild(res);
            // set pos
            _this.gameStage.transform.localPosition = Const.StageInitPos.clone();
            _this.gameStage.transform.localRotationEuler = Const.StageInitRot.clone();
            _this.gameStage.transform.localScale = Const.StageInitScale.clone();
            // destroy animator component: 不然会约束物理碰撞效果
            _this.gameStage.getComponent(Laya.Animator).destroy();
            var child;
            for (var i = 0; i < _this.gameStage.numChildren; i++) {
                child = _this.gameStage.getChildAt(i);
                /** target object */
                if (child.name.search("Obstacle") >= 0) {
                    console.log(child.name + " to target");
                    // add scipt
                    var targetScript = child.addComponent(Target_1.default);
                    // set type
                    if (child.name.search("Glass") >= 0) {
                        targetScript.setType(2 /* GLASS */);
                    }
                    else {
                        targetScript.setType(1 /* DEFAULT */);
                    }
                }
                /** stand_box */
                else if (child.name.search("Cube") >= 0) {
                    console.log(child.name + " to stand");
                    child.name = "stand";
                    // add collider
                    var rigid = child.addComponent(Laya.PhysicsCollider);
                    var boundingBox = child.meshFilter.sharedMesh.boundingBox.clone();
                    var sizeX = boundingBox.max.x - boundingBox.min.x;
                    var sizeY = boundingBox.max.y - boundingBox.min.y;
                    var sizeZ = boundingBox.max.z - boundingBox.min.z;
                    rigid.colliderShape = new Laya.BoxColliderShape(sizeX, sizeY, sizeZ);
                    // add script
                    // 获取台子boundbox，添加脚本，需要兼容多个平台时胜利判断, & mesh collider shape碰撞抖动问题 todo <=======================
                    child.addComponent(Stand_1.default);
                    // update
                    _this.standNum++;
                }
                /** stand_cylinder */
                else if (child.name.search("Cylinder") >= 0) {
                    console.log(child.name + " to stand");
                    child.name = "stand";
                    // add collider
                    var rigid = child.addComponent(Laya.PhysicsCollider);
                    var colliderShape = new Laya.MeshColliderShape();
                    colliderShape.mesh = child.meshFilter.sharedMesh;
                    rigid.colliderShape = colliderShape;
                }
                /** Guard */
                else if (child.name.search("Guard") >= 0) {
                    console.log(child.name + " to guard");
                    // add script
                    var guard = child.addComponent(Guard_1.default);
                }
                else {
                    child.destroy();
                }
            }
            // set stage listener
            Laya.timer.frameLoop(1, _this, _this.stageListener);
            // mouse click event listen: shoot a bullet
            Laya.stage.on(Laya.Event.CLICK, _this, _this.onClick);
        }));
    };
    /** game stage listener */
    GameScene.prototype.stageListener = function () {
        if (this.standClearCnt >= this.standNum) {
            console.log("You win. Stage: " + this.stageIdx);
            this.nextStage();
            // clear listener
            Laya.timer.clear(this, this.stageListener);
        }
        else if (this.currBulletNum >= this.MaxBulletNum) {
            console.log("out of ammo");
            this.restart();
            Laya.timer.clear(this, this.stageListener);
        }
    };
    /** restart current stage */
    GameScene.prototype.restart = function () {
        this.loadGameStage();
    };
    /** start next stage */
    GameScene.prototype.nextStage = function () {
        this.stageIdx++;
        if (this.stageIdx <= Const.StageNum) {
            this.loadGameStage();
        }
        else {
            console.log("通关");
        }
    };
    /** mouse click event: shoot a bullet */
    GameScene.prototype.onClick = function () {
        // play shoot animation
        this.shootTime = Const.PlayerShootLifeTime;
        this.playerAni.speed = 1;
        // get ray
        this.mousePoint.x = Laya.MouseManager.instance.mouseX;
        this.mousePoint.y = Laya.MouseManager.instance.mouseY;
        this.camera.viewportPointToRay(this.mousePoint, this.ray);
        // get bullet shooting direction
        if (this.scene3D.physicsSimulation.rayCast(this.ray, this.hitResult, 30)) {
            // direction vector: [bullet init point] to [mouse hit point]
            Laya.Vector3.subtract(this.hitResult.point, Const.BulletInitPos, this.bulletDirection);
        }
        else {
            // direction vector: [camera point] to [mouse hit point]
            var aV3 = new Laya.Vector3();
            // ray direction scale: to depth scaleZ
            var scaleV = this.camera.farPlane;
            scaleV = 20;
            Laya.Vector3.scale(this.ray.direction, scaleV, aV3);
            // direction vector: [bullet init point] to [camera point]
            var bV3 = new Laya.Vector3();
            Laya.Vector3.subtract(this.camera.transform.position, Const.BulletInitPos, bV3);
            // direction vector: [bullet init point] to [mouse hit point]
            Laya.Vector3.add(aV3, bV3, this.bulletDirection);
        }
        Laya.Vector3.normalize(this.bulletDirection, this.bulletDirection);
        this.bulletVelocity = 50;
        Laya.Vector3.scale(this.bulletDirection, this.bulletVelocity, this.bulletDirection);
        // generate bullet
        var bullet = this._bullet.clone();
        bullet.name = "bullet";
        this.scene3D.addChild(bullet);
        var bulletRigid = bullet.getComponent(Laya.Rigidbody3D);
        bulletRigid.linearVelocity = this.bulletDirection.clone();
        bullet.addComponent(Bullet_1.default);
    };
    return GameScene;
}(layaMaxUI_1.ui.game.GameSceneUI));
exports.default = GameScene;
},{"../Const":3,"../component/Bullet":4,"../component/Guard":5,"../component/Stand":6,"../component/Target":7,"./../../ui/layaMaxUI":9}],9:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Scene = Laya.Scene;
var REG = Laya.ClassUtils.regClass;
var ui;
(function (ui) {
    var game;
    (function (game) {
        var GameSceneUI = /** @class */ (function (_super) {
            __extends(GameSceneUI, _super);
            function GameSceneUI() {
                return _super.call(this) || this;
            }
            GameSceneUI.prototype.createChildren = function () {
                _super.prototype.createChildren.call(this);
                this.loadScene("game/GameScene");
            };
            return GameSceneUI;
        }(Scene));
        game.GameSceneUI = GameSceneUI;
        REG("ui.game.GameSceneUI", GameSceneUI);
    })(game = ui.game || (ui.game = {}));
})(ui = exports.ui || (exports.ui = {}));
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6L0xheWFBaXJJREVfYmV0YS9yZXNvdXJjZXMvYXBwL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvR2FtZUNvbmZpZy50cyIsInNyYy9NYWluLnRzIiwic3JjL3NjcmlwdC9Db25zdC50cyIsInNyYy9zY3JpcHQvY29tcG9uZW50L0J1bGxldC50cyIsInNyYy9zY3JpcHQvY29tcG9uZW50L0d1YXJkLnRzIiwic3JjL3NjcmlwdC9jb21wb25lbnQvU3RhbmQudHMiLCJzcmMvc2NyaXB0L2NvbXBvbmVudC9UYXJnZXQudHMiLCJzcmMvc2NyaXB0L3J1bnRpbWUvR2FtZVNjZW5lLnRzIiwic3JjL3VpL2xheWFNYXhVSS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNWQSxnR0FBZ0c7QUFDaEcsd0RBQWtEO0FBQ2xEOztFQUVFO0FBQ0Y7SUFhSTtJQUFjLENBQUM7SUFDUixlQUFJLEdBQVg7UUFDSSxJQUFJLEdBQUcsR0FBYSxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztRQUM3QyxHQUFHLENBQUMsNkJBQTZCLEVBQUMsbUJBQVMsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFoQk0sZ0JBQUssR0FBUSxHQUFHLENBQUM7SUFDakIsaUJBQU0sR0FBUSxJQUFJLENBQUM7SUFDbkIsb0JBQVMsR0FBUSxZQUFZLENBQUM7SUFDOUIscUJBQVUsR0FBUSxNQUFNLENBQUM7SUFDekIsaUJBQU0sR0FBUSxLQUFLLENBQUM7SUFDcEIsaUJBQU0sR0FBUSxNQUFNLENBQUM7SUFDckIscUJBQVUsR0FBSyxzQkFBc0IsQ0FBQztJQUN0QyxvQkFBUyxHQUFRLEVBQUUsQ0FBQztJQUNwQixnQkFBSyxHQUFTLEtBQUssQ0FBQztJQUNwQixlQUFJLEdBQVMsSUFBSSxDQUFDO0lBQ2xCLHVCQUFZLEdBQVMsS0FBSyxDQUFDO0lBQzNC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QUMsWUFBWSxDQUFDLGdCQUFNLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBQ0wsZ0JBQUM7QUFBRCxDQXpTQSxBQXlTQyxDQXpTc0MsY0FBRSxDQUFDLElBQUksQ0FBQyxXQUFXLEdBeVN6RDs7Ozs7QUM3U0QsSUFBTyxLQUFLLEdBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztBQUN4QixJQUFJLEdBQUcsR0FBYSxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztBQUM3QyxJQUFjLEVBQUUsQ0FTZjtBQVRELFdBQWMsRUFBRTtJQUFDLElBQUEsSUFBSSxDQVNwQjtJQVRnQixXQUFBLElBQUk7UUFDakI7WUFBaUMsK0JBQUs7WUFDbEM7dUJBQWUsaUJBQU87WUFBQSxDQUFDO1lBQ3ZCLG9DQUFjLEdBQWQ7Z0JBQ0ksaUJBQU0sY0FBYyxXQUFFLENBQUM7Z0JBQ3ZCLElBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUNyQyxDQUFDO1lBQ0wsa0JBQUM7UUFBRCxDQU5BLEFBTUMsQ0FOZ0MsS0FBSyxHQU1yQztRQU5ZLGdCQUFXLGNBTXZCLENBQUE7UUFDRCxHQUFHLENBQUMscUJBQXFCLEVBQUMsV0FBVyxDQUFDLENBQUM7SUFDM0MsQ0FBQyxFQVRnQixJQUFJLEdBQUosT0FBSSxLQUFKLE9BQUksUUFTcEI7QUFBRCxDQUFDLEVBVGEsRUFBRSxHQUFGLFVBQUUsS0FBRixVQUFFLFFBU2YiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbmltcG9ydCBHYW1lU2NlbmUgZnJvbSBcIi4vc2NyaXB0L3J1bnRpbWUvR2FtZVNjZW5lXCJcclxuLypcclxuKiDmuLjmiI/liJ3lp4vljJbphY3nva47XHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWd7XHJcbiAgICBzdGF0aWMgd2lkdGg6bnVtYmVyPTY0MDtcclxuICAgIHN0YXRpYyBoZWlnaHQ6bnVtYmVyPTExMzY7XHJcbiAgICBzdGF0aWMgc2NhbGVNb2RlOnN0cmluZz1cImZpeGVkd2lkdGhcIjtcclxuICAgIHN0YXRpYyBzY3JlZW5Nb2RlOnN0cmluZz1cIm5vbmVcIjtcclxuICAgIHN0YXRpYyBhbGlnblY6c3RyaW5nPVwidG9wXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25IOnN0cmluZz1cImxlZnRcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cImdhbWUvR2FtZVNjZW5lLnNjZW5lXCI7XHJcbiAgICBzdGF0aWMgc2NlbmVSb290OnN0cmluZz1cIlwiO1xyXG4gICAgc3RhdGljIGRlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgc3RhdDpib29sZWFuPXRydWU7XHJcbiAgICBzdGF0aWMgcGh5c2ljc0RlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgZXhwb3J0U2NlbmVUb0pzb246Ym9vbGVhbj10cnVlO1xyXG4gICAgY29uc3RydWN0b3IoKXt9XHJcbiAgICBzdGF0aWMgaW5pdCgpe1xyXG4gICAgICAgIHZhciByZWc6IEZ1bmN0aW9uID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG4gICAgICAgIHJlZyhcInNjcmlwdC9ydW50aW1lL0dhbWVTY2VuZS50c1wiLEdhbWVTY2VuZSk7XHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy5pbml0KCk7IiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdC8v5YW85a655b6u5L+h5LiN5pSv5oyB5Yqg6L29c2NlbmXlkI7nvIDlnLrmma9cclxuXHRcdExheWEuVVJMLmV4cG9ydFNjZW5lVG9Kc29uID0gR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbjtcclxuXHJcblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuXHRcdGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgJiYgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0pIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdLmVuYWJsZSgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcclxuXHRcdExheWEuYWxlcnRHbG9iYWxFcnJvciA9IHRydWU7XHJcblxyXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcclxuXHRcdExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcblx0fVxyXG5cclxuXHRvblZlcnNpb25Mb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+a/gOa0u+Wkp+Wwj+WbvuaYoOWwhO+8jOWKoOi9veWwj+WbvueahOaXtuWAme+8jOWmguaenOWPkeeOsOWwj+WbvuWcqOWkp+WbvuWQiOmbhumHjOmdou+8jOWImeS8mOWFiOWKoOi9veWkp+WbvuWQiOmbhu+8jOiAjOS4jeaYr+Wwj+WbvlxyXG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcclxuXHR9XHJcblxyXG5cdG9uQ29uZmlnTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdEdhbWVDb25maWcuc3RhcnRTY2VuZSAmJiBMYXlhLlNjZW5lLm9wZW4oR2FtZUNvbmZpZy5zdGFydFNjZW5lKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiLyoqIHZlcnNpb24gKi9cclxuZXhwb3J0IGNvbnN0IFZFUlNJT04gPSBcIjEuMC4wXCI7XHJcblxyXG4vKiogcGFnZXMgKi9cclxuZXhwb3J0IGNvbnN0IFVSTF9Ib21lVmlldzogc3RyaW5nID0gXCJob21lL0hvbWVWaWV3LnNjZW5lXCI7XHJcbmV4cG9ydCBjb25zdCBVUkxfR2FtZVNjZW5lOiBzdHJpbmcgPSBcImdhbWUvR2FtZVNjZW5lLnNjZW5lXCI7XHJcbmV4cG9ydCBjb25zdCBVUkxfT3ZlclZpZXc6IHN0cmluZyA9IFwib3Zlci9PdmVyVmlldy5zY2VuZVwiO1xyXG5leHBvcnQgY29uc3QgVVJMX1Jldml2ZVZpZXc6IHN0cmluZyA9IFwiZGlhbG9nL1Jldml2ZVZpZXcuc2NlbmVcIjtcclxuXHJcbi8qKiBjYW1lcmEgKi9cclxuZXhwb3J0IGNvbnN0IENhbWVyYUluaXRQb3M6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgMC41LCAwKTtcclxuZXhwb3J0IGNvbnN0IENhbWVyYUluaXRSb3RFdWxlcjogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygwLCAwLCAwKTtcclxuXHJcbi8qKiBkaXJlY3Rpb25hbCBsaWdodCAqL1xyXG5leHBvcnQgY29uc3QgTGlnaHRJbml0UG9zOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKC0zLCA1LCAwKTtcclxuZXhwb3J0IGNvbnN0IExpZ2h0SW5pdFJvdEV1bGVyOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKC00NSwgLTMwLCAwKTtcclxuXHJcbi8qKiBnYW1lIHN0YWdlICovXHJcbmV4cG9ydCBjb25zdCBTdGFnZVJlc1VybDogc3RyaW5nID0gXCJyZXMvc3RhZ2Uvb3V0L0Jvc3NcIjtcclxuZXhwb3J0IGNvbnN0IFN0YWdlSW5pdFBvczogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygwLCAwLCAwKTtcclxuZXhwb3J0IGNvbnN0IFN0YWdlSW5pdFJvdDogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygwLCAxODAsIDApO1xyXG5leHBvcnQgY29uc3QgU3RhZ2VJbml0U2NhbGU6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoNDAsIDQwLCA0MCk7XHJcbmV4cG9ydCBjb25zdCBTdGFnZU51bTogbnVtYmVyID0gMzA7XHJcbi8vIHdpbm5pbmcgY2hlY2sgZnJhbWVcclxuZXhwb3J0IGNvbnN0IFdpbkNoZWNrVGltZTogbnVtYmVyID0gMTIwO1xyXG5cclxuLyoqIGN1YmUgKi9cclxuZXhwb3J0IGNvbnN0IGVudW0gVGFyZ2V0VHlwZSB7XHJcbiAgICBERUZBVUxUID0gMSxcclxuICAgIEdMQVNTID0gMixcclxuICAgIFROVCA9IDNcclxufVxyXG5cclxuLyoqIGdsYXNzICovXHJcbmV4cG9ydCBjb25zdCBHbGFzc0Jyb2tlblZlbG9jaXR5OiBudW1iZXIgPSAzO1xyXG5cclxuLyoqIG9ic3RhY2xlIHBpZWNlICovXHJcbmV4cG9ydCBjb25zdCBQaWVjZVJlc1VybDogc3RyaW5nID0gXCJyZXMvY3ViZV9waWVjZS5sbVwiO1xyXG5leHBvcnQgY29uc3QgUGllY2VzTnVtOiBudW1iZXIgPSAzO1xyXG5leHBvcnQgY29uc3QgUGllY2VzQnJva2VuVGltZTogbnVtYmVyID0gMTIwO1xyXG5cclxuLyoqIGJ1bGxldCAqL1xyXG5leHBvcnQgY29uc3QgQnVsbGV0UmVzVXJsOiBzdHJpbmcgPSBcInJlcy9idWxsZXQubGhcIjtcclxuZXhwb3J0IGNvbnN0IEJ1bGxldEluaXRQb3M6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgMCwgLTUpO1xyXG5leHBvcnQgY29uc3QgQnVsbGV0SW5pdFJvdDogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygxODAsIDAsIDApO1xyXG5leHBvcnQgY29uc3QgQnVsbGV0UmFkaXVzOiBudW1iZXIgPSAwLjE1O1xyXG5cclxuLyoqIHBsYXllciAqL1xyXG5leHBvcnQgY29uc3QgUGxheWVyUmVzVXJsOiBzdHJpbmcgPSBcInJlcy9odW1hbi5saFwiO1xyXG5leHBvcnQgY29uc3QgUGxheWVySW5pdFBvczogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygwLCAwLCAtMSk7XHJcbmV4cG9ydCBjb25zdCBQbGF5ZXJJbml0Um90OiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKDkwLCAxNjgsIDApO1xyXG5leHBvcnQgY29uc3QgUGxheWVySW5pdFNjYWxlOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKDIwLCAyMCwgMjApO1xyXG5leHBvcnQgY29uc3QgUGxheWVyU2hvb3RMaWZlVGltZTogbnVtYmVyID0gMTA7XHJcbiIsImltcG9ydCBHYW1lU2NlbmUgZnJvbSBcIi4uL3J1bnRpbWUvR2FtZVNjZW5lXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdWxsZXRTY3JpcHQgZXh0ZW5kcyBMYXlhLlNjcmlwdDNEIHtcclxuICAgIHByaXZhdGUgYnVsbGV0OiBMYXlhLk1lc2hTcHJpdGUzRDtcclxuXHJcbiAgICBwcml2YXRlIGxpZmV0aW1lOiBudW1iZXIgPSAxMjA7XHJcblxyXG4gICAgcHJpdmF0ZSBjb2xsaXNpb25CbGFja0xpc3Q6IHN0cmluZ1tdID0gW1wiYnVsbGV0XCIsIFwicGxheWVyXCJdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Bd2FrZSgpIHtcclxuICAgICAgICB0aGlzLmJ1bGxldCA9IHRoaXMub3duZXIgYXMgTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGUoKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgc3BpcnRlIGFsaXZlXHJcbiAgICAgICAgaWYgKHRoaXMuYnVsbGV0LmRlc3Ryb3llZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIGxpZmV0aW1lXHJcbiAgICAgICAgdGhpcy5saWZldGltZS0tO1xyXG4gICAgICAgIGlmICh0aGlzLmxpZmV0aW1lIDwgMCkge1xyXG4gICAgICAgICAgICBMYXlhLnRpbWVyLmZyYW1lT25jZSgxLCB0aGlzLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY291bnRlclxyXG4gICAgICAgICAgICAgICAgR2FtZVNjZW5lLmluc3RhbmNlLmN1cnJCdWxsZXROdW0rKztcclxuICAgICAgICAgICAgICAgIC8vIGRlc3Ryb3lcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVsbGV0LnJlbW92ZVNlbGYoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gb25Db2xsaXNpb25FbnRlcihjb2xsaXNpb246IExheWEuQ29sbGlzaW9uKSB7XHJcbiAgICAvLyB9XHJcbn0iLCJpbXBvcnQgKiBhcyBDb25zdCBmcm9tIFwiLi4vQ29uc3RcIjtcclxuaW1wb3J0IEdhbWVTY2VuZSBmcm9tIFwiLi4vcnVudGltZS9HYW1lU2NlbmVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEd1YXJkIGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XHJcbiAgICBwcml2YXRlIGd1YXJkOiBMYXlhLk1lc2hTcHJpdGUzRDtcclxuXHJcbiAgICBwcml2YXRlIGluaXRQb3M6IExheWEuVmVjdG9yMztcclxuXHJcbiAgICBwcml2YXRlIHNpemVYOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHNpemVZOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHNpemVaOiBudW1iZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBNYXhNb3ZlVGltZXM6IG51bWJlciA9IDYwO1xyXG4gICAgcHJpdmF0ZSBtb3ZlVGltZXM6IG51bWJlciA9IDA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkF3YWtlKCkge1xyXG4gICAgICAgIC8vIGdldCBzcHJpdGVcclxuICAgICAgICB0aGlzLmd1YXJkID0gdGhpcy5vd25lciBhcyBMYXlhLk1lc2hTcHJpdGUzRDtcclxuICAgICAgICAvLyBnZXQgc2l6ZVxyXG4gICAgICAgIGxldCBib3VuZGluZ0JveDogTGF5YS5Cb3VuZEJveCA9IHRoaXMuZ3VhcmQubWVzaEZpbHRlci5zaGFyZWRNZXNoLmJvdW5kaW5nQm94LmNsb25lKCk7XHJcbiAgICAgICAgdGhpcy5zaXplWCA9IGJvdW5kaW5nQm94Lm1heC54IC0gYm91bmRpbmdCb3gubWluLng7XHJcbiAgICAgICAgdGhpcy5zaXplWSA9IGJvdW5kaW5nQm94Lm1heC55IC0gYm91bmRpbmdCb3gubWluLnk7XHJcbiAgICAgICAgdGhpcy5zaXplWiA9IGJvdW5kaW5nQm94Lm1heC56IC0gYm91bmRpbmdCb3gubWluLno7XHJcbiAgICAgICAgLy8gYWRkIGNvbGxpZGVyXHJcbiAgICAgICAgbGV0IGNvbGxpZGVyOiBMYXlhLlBoeXNpY3NDb2xsaWRlciA9IHRoaXMuZ3VhcmQuYWRkQ29tcG9uZW50KExheWEuUGh5c2ljc0NvbGxpZGVyKTtcclxuICAgICAgICBjb2xsaWRlci5jb2xsaWRlclNoYXBlID0gbmV3IExheWEuQm94Q29sbGlkZXJTaGFwZSh0aGlzLnNpemVYLCB0aGlzLnNpemVZLCB0aGlzLnNpemVaKTtcclxuICAgICAgICAvLyByZWNvcmQgaW5pdCBwb3NcclxuICAgICAgICB0aGlzLmluaXRQb3MgPSB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uLmNsb25lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGUoKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgc3BpcnRlIGFsaXZlXHJcbiAgICAgICAgaWYgKHRoaXMuZ3VhcmQuZGVzdHJveWVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiog5bmz56e7ICovXHJcbiAgICAgICAgdGhpcy5tb3ZlVGltZXMgPSAodGhpcy5tb3ZlVGltZXMgKyAxKSAlICh0aGlzLk1heE1vdmVUaW1lcyAqIDIpO1xyXG4gICAgICAgIC8vIOS9jeenu+aWueWQkeagh+W/l1xyXG4gICAgICAgIHZhciBmbGFnID0gTWF0aC5mbG9vcigodGhpcy5tb3ZlVGltZXMgLyB0aGlzLk1heE1vdmVUaW1lcykgJSAyKTtcclxuICAgICAgICAvLyBY5ZKMWeaWueWQkeW5s+enu+atpei/m1xyXG4gICAgICAgIHZhciBtb3ZlU3RlcFg6IG51bWJlciA9IHRoaXMuc2l6ZVggKiB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFNjYWxlWCAvIDIgLyB0aGlzLk1heE1vdmVUaW1lcztcclxuICAgICAgICB2YXIgbW92ZVN0ZXBZOiBudW1iZXIgPSB0aGlzLnNpemVZICogdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxTY2FsZVkgLyAyIC8gdGhpcy5NYXhNb3ZlVGltZXM7XHJcbiAgICAgICAgLy8gWui9tOaXi+i9rDkw77yMWOWSjFnkupLmjaJcclxuICAgICAgICBpZiAoTWF0aC5mbG9vcigoTWF0aC5hYnModGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWikgKyA5MC41KSAlIDE4MCkgPT09IDApIHtcclxuICAgICAgICAgICAgbGV0IHRtcCA9IG1vdmVTdGVwWDtcclxuICAgICAgICAgICAgbW92ZVN0ZXBYID0gbW92ZVN0ZXBZO1xyXG4gICAgICAgICAgICBtb3ZlU3RlcFkgPSB0bXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOWFqOWxj+awtOW5s+enu+WKqFxyXG4gICAgICAgIGlmICh0aGlzLmd1YXJkLm5hbWUuc2VhcmNoKFwibW92ZV94XCIpID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy5NYXhNb3ZlVGltZXMgPSAxMjA7XHJcbiAgICAgICAgICAgIG1vdmVTdGVwWCA9IHRoaXMuaW5pdFBvcy54ICogMiAvIHRoaXMuTWF4TW92ZVRpbWVzO1xyXG4gICAgICAgICAgICBmbGFnID0gTWF0aC5mbG9vcigodGhpcy5tb3ZlVGltZXMgLyB0aGlzLk1heE1vdmVUaW1lcykgJSAyKTtcclxuICAgICAgICAgICAgaWYgKGZsYWcpIHsgdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblggKz0gbW92ZVN0ZXBYOyB9XHJcbiAgICAgICAgICAgIGVsc2UgeyB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWCAtPSBtb3ZlU3RlcFg7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5YWo5bGP57q15ZCR56e75YqoXHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5ndWFyZC5uYW1lLnNlYXJjaChcIm1vdmVfeVwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuTWF4TW92ZVRpbWVzID0gMTIwO1xyXG4gICAgICAgICAgICBtb3ZlU3RlcFkgPSB0aGlzLmluaXRQb3MueSAqIDIgLyB0aGlzLk1heE1vdmVUaW1lcztcclxuICAgICAgICAgICAgZmxhZyA9IE1hdGguZmxvb3IoKHRoaXMubW92ZVRpbWVzIC8gdGhpcy5NYXhNb3ZlVGltZXMpICUgMik7XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7IHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25ZICs9IG1vdmVTdGVwWTsgfVxyXG4gICAgICAgICAgICBlbHNlIHsgdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblkgLT0gbW92ZVN0ZXBZOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWNiuWxj+enu+WKqFxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ3VhcmQubmFtZS5zZWFyY2goXCJtb3ZlX2xlZnRcIikgPj0gMCkge1xyXG4gICAgICAgICAgICBpZiAoZmxhZykgeyB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWCAtPSBtb3ZlU3RlcFg7IH1cclxuICAgICAgICAgICAgZWxzZSB7IHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25YICs9IG1vdmVTdGVwWDsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmd1YXJkLm5hbWUuc2VhcmNoKFwibW92ZV9yaWdodFwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7IHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25YICs9IG1vdmVTdGVwWDsgfVxyXG4gICAgICAgICAgICBlbHNlIHsgdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblggLT0gbW92ZVN0ZXBYOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ3VhcmQubmFtZS5zZWFyY2goXCJtb3ZlX3VwXCIpID49IDApIHtcclxuICAgICAgICAgICAgaWYgKGZsYWcpIHsgdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblkgLT0gbW92ZVN0ZXBZOyB9XHJcbiAgICAgICAgICAgIGVsc2UgeyB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWSArPSBtb3ZlU3RlcFk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5ndWFyZC5uYW1lLnNlYXJjaChcIm1vdmVfZG93blwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7IHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25ZICs9IG1vdmVTdGVwWTsgfVxyXG4gICAgICAgICAgICBlbHNlIHsgdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblkgLT0gbW92ZVN0ZXBZOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiog5peL6L2sICovXHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5ndWFyZC5uYW1lLnNlYXJjaChcInJvdGF0ZV9sZWZ0XCIpID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWSA9ICh0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJZICsgMSkgJSAzNjA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ3VhcmQubmFtZS5zZWFyY2goXCJyb3RhdGVfcmlnaHRcIikgPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJZID0gKHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclkgLSAxKSAlIDM2MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5ndWFyZC5uYW1lLnNlYXJjaChcInJvdGF0ZV91cFwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclggPSAodGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWCArIDEpICUgMzYwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmd1YXJkLm5hbWUuc2VhcmNoKFwicm90YXRlX2Rvd25cIikgPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJYID0gKHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclggLSAxKSAlIDM2MDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBDb25zdCBmcm9tIFwiLi4vQ29uc3RcIjtcclxuaW1wb3J0IEdhbWVTY2VuZSBmcm9tIFwiLi4vcnVudGltZS9HYW1lU2NlbmVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YW5kIGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XHJcbiAgICBwcml2YXRlIHN0YW5kOiBMYXlhLk1lc2hTcHJpdGUzRDtcclxuXHJcbiAgICBwcml2YXRlIGlzV2luQ2hlY2s6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgd2luQ291bnQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcHJpdmF0ZSBjb2xsaXNpb25CbGFja0xpc3Q6IHN0cmluZ1tdID0gW1wic3RhbmRcIiwgXCJidWxsZXRcIiwgXCJwaWVjZVwiXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQXdha2UoKSB7XHJcbiAgICAgICAgdGhpcy5zdGFuZCA9IHRoaXMub3duZXIgYXMgTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICAgICAgdGhpcy5pc1dpbkNoZWNrID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGUoKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgc3BpcnRlIGFsaXZlXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhbmQuZGVzdHJveWVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiogd2luIGNoZWNrICovXHJcbiAgICAgICAgdGhpcy53aW5Db3VudCsrO1xyXG4gICAgICAgIGlmICghdGhpcy5pc1dpbkNoZWNrICYmIHRoaXMud2luQ291bnQgPiBDb25zdC5XaW5DaGVja1RpbWUpIHtcclxuICAgICAgICAgICAgR2FtZVNjZW5lLmluc3RhbmNlLnN0YW5kQ2xlYXJDbnQrKztcclxuICAgICAgICAgICAgdGhpcy5pc1dpbkNoZWNrID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2xsaXNpb25TdGF5KGNvbGxpc2lvbjogTGF5YS5Db2xsaXNpb24pOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5jb2xsaXNpb25CbGFja0xpc3QuaW5kZXhPZihjb2xsaXNpb24ub3RoZXIub3duZXIubmFtZSkgPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2luQ291bnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgLy8g6YG/5YWN56m65Y+w5a2Q5Yik5pat5ZCO5Y+w5a2Q5LiK5pyJ5o6J6JC954mp5L2TXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzV2luQ2hlY2spIHtcclxuICAgICAgICAgICAgICAgIEdhbWVTY2VuZS5pbnN0YW5jZS5zdGFuZENsZWFyQ250LS07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzV2luQ2hlY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCAqIGFzIENvbnN0IGZyb20gXCIuLi9Db25zdFwiO1xyXG5pbXBvcnQgR2FtZVNjZW5lIGZyb20gXCIuLi9ydW50aW1lL0dhbWVTY2VuZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFyZ2V0IGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XHJcbiAgICBwcml2YXRlIHRhcmdldDogTGF5YS5NZXNoU3ByaXRlM0Q7XHJcblxyXG4gICAgcHJpdmF0ZSB0eXBlOiBudW1iZXIgPSBDb25zdC5UYXJnZXRUeXBlLkRFRkFVTFQ7XHJcblxyXG4gICAgcHJpdmF0ZSBzaXplWDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzaXplWTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzaXplWjogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgY29sbGlzaW9uQmxhY2tMaXN0OiBzdHJpbmdbXSA9IFtcInN0YW5kXCIsIFwiR3VhcmRcIl07XHJcblxyXG4gICAgLyoqIHRhcmdldCBvYmplY3QgcGllY2VzICovXHJcbiAgICBwcml2YXRlIHBpZWNlc0xpc3Q6IExheWEuTWVzaFNwcml0ZTNEW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQXdha2UoKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLm93bmVyIGFzIExheWEuTWVzaFNwcml0ZTNEO1xyXG4gICAgICAgIHRoaXMuc2V0UmlnaWRib2R5KCk7XHJcbiAgICAgICAgdGhpcy5pbml0UGllY2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2xsaXNpb25FbnRlcihjb2xsaXNpb246IExheWEuQ29sbGlzaW9uKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IG90aGVyOiBMYXlhLk1lc2hTcHJpdGUzRCA9IGNvbGxpc2lvbi5vdGhlci5vd25lciBhcyBMYXlhLk1lc2hTcHJpdGUzRDtcclxuICAgICAgICAvLyBpZiAodGhpcy5jb2xsaXNpb25CbGFja0xpc3QuaW5kZXhPZihvdGhlci5uYW1lKSA8IDApIHtcclxuICAgICAgICBpZiAodGhpcy50eXBlID09PSBDb25zdC5UYXJnZXRUeXBlLkdMQVNTKSB7XHJcbiAgICAgICAgICAgIC8vIOebuOWvuemAn+W6pumrmOWPr+WHu+eijlxyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHk6IExheWEuVmVjdG9yMyA9ICh0aGlzLnRhcmdldC5nZXRDb21wb25lbnQoTGF5YS5SaWdpZGJvZHkzRCkgYXMgTGF5YS5SaWdpZGJvZHkzRCkubGluZWFyVmVsb2NpdHkuY2xvbmUoKTtcclxuICAgICAgICAgICAgbGV0IHZlbG9jaXR5T3RoZXI6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIC8vIG5vdCBwbGF5Zm9ybVxyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2xsaXNpb25CbGFja0xpc3QuaW5kZXhPZihvdGhlci5uYW1lKSA8IDAgJiYgb3RoZXIubmFtZS5pbmRleE9mKFwiR3VhcmRcIikgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eU90aGVyID0gKG90aGVyLmdldENvbXBvbmVudChMYXlhLlJpZ2lkYm9keTNEKSBhcyBMYXlhLlJpZ2lkYm9keTNEKS5saW5lYXJWZWxvY2l0eS5jbG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIExheWEuVmVjdG9yMy5zdWJ0cmFjdCh2ZWxvY2l0eSwgdmVsb2NpdHlPdGhlciwgdmVsb2NpdHkpO1xyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHlWYWx1ZTogbnVtYmVyID0gTWF0aC5zcXJ0KE1hdGgucG93KHZlbG9jaXR5LngsIDIpICsgTWF0aC5wb3codmVsb2NpdHkueSwgMikgKyBNYXRoLnBvdyh2ZWxvY2l0eS56LCAyKSk7XHJcbiAgICAgICAgICAgIGlmICh2ZWxvY2l0eVZhbHVlID49IENvbnN0LkdsYXNzQnJva2VuVmVsb2NpdHkpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuaXNIaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5icm9rZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGUoKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgc3BpcnRlIGFsaXZlXHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0LmRlc3Ryb3llZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcGh5c2ljcyBlbmdpbmUgYnVnIGRldGVjdGluZyBhbmQgZml4aW5nXHJcbiAgICAgICAgdGhpcy5waHlzaWNzX2VuZ2luZV9idWdfZml4aW5nKCk7XHJcblxyXG4gICAgICAgIC8vIC8vIGhpdCBoYW5kbGluZ1xyXG4gICAgICAgIC8vIGlmICh0aGlzLmlzSGl0KSB7XHJcbiAgICAgICAgLy8gICAgIGlmICh0aGlzLnR5cGUgPT09IENvbnN0LlRhcmdldFR5cGUuR0xBU1MpIHtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMuYnJva2VuKCk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHBoeXNpY3MgZW5naW5lIGJ1ZyBkZXRlY3RpbmcgYW5kIGZpeGluZ1xyXG4gICAgICogIOW8leaTjmJ1Z++8muWnv+aAgeeos+WumuaDheWGteS4i++8jOafkOS4queJqeS9k+S9nOeUqOWKm+aWueWQke+8iOWmgumHjeWKm+aXtueahOW6leS4i++8ieeahOeisOaSnueJqeS9k+W/q+mAn+a2iOWkse+8jFxyXG4gICAgICogIOiAjOatpOi/h+eoi+S4reebuOS6kuS9nOeUqOW9seWTjei/h+Wwj+WvvOiHtOiHqui6q+Wnv+aAgeayoeacieWPmOWMluaXtu+8jOW8leaTjuS8muiHquWKqOWwhuivpeeJqeS9k+eahOWImuS9k+mdnua/gOa0u++8jOS7juiAjOWvvOiHtOiFvuepuueOsOixoe+8jFxyXG4gICAgICogIOWinuWkp+eJqeS9k+mXtOebuOS6kuS9nOeUqOWKm++8iOWmguaRqeaTpuezu+aVsO+8ieWPr+WHj+WwkeivpeaDheWGteWPkeeUn++8jOS9huS4jeiDveadnOe7ne+8jFxyXG4gICAgICogIOaVheWcqOatpOajgOa1i+ivpeaDheWGteW5tuWvueWImuS9k+mUgOavgemHjeW7ulxyXG4gICAgICogKi9cclxuICAgIHByaXZhdGUgcGh5c2ljc19lbmdpbmVfYnVnX2ZpeGluZygpIHtcclxuICAgICAgICBsZXQgcmlnaWRib2R5OiBMYXlhLlJpZ2lkYm9keTNEID0gdGhpcy50YXJnZXQuZ2V0Q29tcG9uZW50KExheWEuUmlnaWRib2R5M0QpIGFzIExheWEuUmlnaWRib2R5M0Q7XHJcbiAgICAgICAgaWYgKHJpZ2lkYm9keS5pc0FjdGl2ZSA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICByaWdpZGJvZHkuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFJpZ2lkYm9keSgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBoeXNpY3NfZW5naW5lX2J1Z19maXhpbmc6IFJlc2V0IHJpZ2lkYm9keS5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBzZXQgbWF0ZXJpYWwgYnkgdHlwZSAqL1xyXG4gICAgc2V0VHlwZSh0eXBlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT09IENvbnN0LlRhcmdldFR5cGUuR0xBU1MpIHtcclxuICAgICAgICAgICAgbGV0IG1hdDogTGF5YS5CbGlublBob25nTWF0ZXJpYWwgPSBuZXcgTGF5YS5CbGlublBob25nTWF0ZXJpYWwoKTtcclxuICAgICAgICAgICAgbWF0LnJlbmRlck1vZGUgPSBMYXlhLkJsaW5uUGhvbmdNYXRlcmlhbC5SRU5ERVJNT0RFX1RSQU5TUEFSRU5UO1xyXG4gICAgICAgICAgICBtYXQuYWxiZWRvQ29sb3IgPSBuZXcgTGF5YS5WZWN0b3I0KDAuNywgMC43LCAxLCAwLjcpO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgPSBtYXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBzZXQgcmlnaWRib2R5ICovXHJcbiAgICBwcml2YXRlIHNldFJpZ2lkYm9keSgpIHtcclxuICAgICAgICAvLyBnZXQgc2l6ZSBvZiBib3VuZGluZyBib3hcclxuICAgICAgICBsZXQgYm91bmRpbmdCb3g6IExheWEuQm91bmRCb3ggPSB0aGlzLnRhcmdldC5tZXNoRmlsdGVyLnNoYXJlZE1lc2guYm91bmRpbmdCb3guY2xvbmUoKTtcclxuICAgICAgICB0aGlzLnNpemVYID0gYm91bmRpbmdCb3gubWF4LnggLSBib3VuZGluZ0JveC5taW4ueDtcclxuICAgICAgICB0aGlzLnNpemVZID0gYm91bmRpbmdCb3gubWF4LnkgLSBib3VuZGluZ0JveC5taW4ueTtcclxuICAgICAgICB0aGlzLnNpemVaID0gYm91bmRpbmdCb3gubWF4LnogLSBib3VuZGluZ0JveC5taW4uejtcclxuICAgICAgICAvLyBhZGQgcmlnaWRib2R5XHJcbiAgICAgICAgbGV0IHJpZ2lkYm9keTogTGF5YS5SaWdpZGJvZHkzRCA9IHRoaXMudGFyZ2V0LmFkZENvbXBvbmVudChMYXlhLlJpZ2lkYm9keTNEKTtcclxuICAgICAgICBpZiAodGhpcy50YXJnZXQubmFtZS5zZWFyY2goXCJDdWJlXCIpID49IDApIHtcclxuICAgICAgICAgICAgcmlnaWRib2R5LmNvbGxpZGVyU2hhcGUgPSBuZXcgTGF5YS5Cb3hDb2xsaWRlclNoYXBlKHRoaXMuc2l6ZVgsIHRoaXMuc2l6ZVksIHRoaXMuc2l6ZVopO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGNvbGxpZGVyU2hhcGU6IExheWEuTWVzaENvbGxpZGVyU2hhcGUgPSBuZXcgTGF5YS5NZXNoQ29sbGlkZXJTaGFwZSgpO1xyXG4gICAgICAgICAgICBjb2xsaWRlclNoYXBlLm1lc2ggPSB0aGlzLnRhcmdldC5tZXNoRmlsdGVyLnNoYXJlZE1lc2g7XHJcbiAgICAgICAgICAgIHJpZ2lkYm9keS5jb2xsaWRlclNoYXBlID0gY29sbGlkZXJTaGFwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRQaHlzaWNzUGFyYW0oKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogc2V0IHBoeXNpY3MgcGFyYW0gKi9cclxuICAgIHByaXZhdGUgc2V0UGh5c2ljc1BhcmFtKCkge1xyXG4gICAgICAgIGxldCByaWdpZGJvZHk6IExheWEuUmlnaWRib2R5M0QgPSB0aGlzLnRhcmdldC5nZXRDb21wb25lbnQoTGF5YS5SaWdpZGJvZHkzRCk7XHJcbiAgICAgICAgcmlnaWRib2R5LmlzS2luZW1hdGljID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gQ29uc3QuVGFyZ2V0VHlwZS5ERUZBVUxUKSB7XHJcbiAgICAgICAgICAgIHJpZ2lkYm9keS5tYXNzID0gMTA7XHJcbiAgICAgICAgICAgIHJpZ2lkYm9keS5mcmljdGlvbiA9IDEwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnR5cGUgPT09IENvbnN0LlRhcmdldFR5cGUuR0xBU1MpIHtcclxuICAgICAgICAgICAgcmlnaWRib2R5Lm1hc3MgPSAwLjE7XHJcbiAgICAgICAgICAgIHJpZ2lkYm9keS5mcmljdGlvbiA9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBzZXQgdGFyZ2V0IGJyb2tlbiAqL1xyXG4gICAgcHJpdmF0ZSBicm9rZW4oKSB7XHJcbiAgICAgICAgLy8gcGxheSBicm9rZW4gc291bmRcclxuXHJcbiAgICAgICAgLy8gc2hvdyBwaWVjZXNcclxuICAgICAgICB0aGlzLmVmZmVjdFBpZWNlc0Jyb2tlbigpO1xyXG4gICAgICAgIC8vIGhpZGUgdGFyZ2V0XHJcbiAgICAgICAgTGF5YS50aW1lci5mcmFtZU9uY2UoMSwgdGhpcywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogaW5pdCB0YXJnZXQgcGllY2VzICovXHJcbiAgICBwcml2YXRlIGluaXRQaWVjZXMoKSB7XHJcbiAgICAgICAgTGF5YS5NZXNoLmxvYWQoQ29uc3QuUGllY2VSZXNVcmwsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgKG1lc2gpID0+IHtcclxuICAgICAgICAgICAgbGV0IHBpZWNlOiBMYXlhLk1lc2hTcHJpdGUzRCA9IG5ldyBMYXlhLk1lc2hTcHJpdGUzRChtZXNoKTtcclxuXHJcbiAgICAgICAgICAgIHBpZWNlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBwaWVjZS5uYW1lID0gXCJwaWVjZVwiO1xyXG5cclxuICAgICAgICAgICAgLy8gc2V0IG1hdGVyaWFsXHJcbiAgICAgICAgICAgIGxldCBtYXQ6IExheWEuQmxpbm5QaG9uZ01hdGVyaWFsID0gbmV3IExheWEuQmxpbm5QaG9uZ01hdGVyaWFsKCk7XHJcbiAgICAgICAgICAgIG1hdC5yZW5kZXJNb2RlID0gTGF5YS5CbGlublBob25nTWF0ZXJpYWwuUkVOREVSTU9ERV9UUkFOU1BBUkVOVDtcclxuICAgICAgICAgICAgbWF0LmFsYmVkb0NvbG9yID0gbmV3IExheWEuVmVjdG9yNCgwLjcsIDAuNywgMSwgMC43KTtcclxuICAgICAgICAgICAgcGllY2UubWVzaFJlbmRlcmVyLm1hdGVyaWFsID0gbWF0O1xyXG5cclxuICAgICAgICAgICAgLy8gc2V0IHJpZ2lkYm9keVxyXG4gICAgICAgICAgICBsZXQgcGllY2VSaWdpZDogTGF5YS5SaWdpZGJvZHkzRCA9IHBpZWNlLmFkZENvbXBvbmVudChMYXlhLlJpZ2lkYm9keTNEKTtcclxuICAgICAgICAgICAgbGV0IHBpZWNlQ29sbGlkZXJTaGFwZTogTGF5YS5NZXNoQ29sbGlkZXJTaGFwZSA9IG5ldyBMYXlhLk1lc2hDb2xsaWRlclNoYXBlKCk7XHJcbiAgICAgICAgICAgIHBpZWNlQ29sbGlkZXJTaGFwZS5tZXNoID0gcGllY2UubWVzaEZpbHRlci5zaGFyZWRNZXNoO1xyXG4gICAgICAgICAgICBwaWVjZVJpZ2lkLmNvbGxpZGVyU2hhcGUgPSBwaWVjZUNvbGxpZGVyU2hhcGU7XHJcblxyXG4gICAgICAgICAgICAvLyBhZGQgcGllY2VzIHRvIHNjZW5lXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ29uc3QuUGllY2VzTnVtOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGllY2VzTGlzdC5wdXNoKHBpZWNlLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgR2FtZVNjZW5lLmluc3RhbmNlLnNjZW5lM0QuYWRkQ2hpbGQodGhpcy5waWVjZXNMaXN0W2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogcGxhdHkgZWZmZWN0OiB0YXJnZXQgYnJva2VuIHRvIHBpZWNlcyAqL1xyXG4gICAgcHVibGljIGVmZmVjdFBpZWNlc0Jyb2tlbigpIHtcclxuICAgICAgICBmb3IgKGxldCBpZHggaW4gdGhpcy5waWVjZXNMaXN0KSB7XHJcbiAgICAgICAgICAgIC8vIGFjdGl2ZSBwaWVjZXNcclxuICAgICAgICAgICAgdGhpcy5waWVjZXNMaXN0W2lkeF0uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gc2V0IHNpemUgc2NhbGVcclxuICAgICAgICAgICAgbGV0IHNjYWxlWDogbnVtYmVyID0gKE1hdGgucmFuZG9tKCkgKiAwLjUgKyAwLjUpICogMS41ICogdGhpcy5zaXplWCAqIHRoaXMudGFyZ2V0LnRyYW5zZm9ybS5sb2NhbFNjYWxlWCAqIENvbnN0LlN0YWdlSW5pdFNjYWxlLng7XHJcbiAgICAgICAgICAgIGxldCBzY2FsZVk6IG51bWJlciA9IChNYXRoLnJhbmRvbSgpICogMC41ICsgMC41KSAqIDEuNSAqIHRoaXMuc2l6ZVkgKiB0aGlzLnRhcmdldC50cmFuc2Zvcm0ubG9jYWxTY2FsZVkgKiBDb25zdC5TdGFnZUluaXRTY2FsZS55O1xyXG4gICAgICAgICAgICBsZXQgc2NhbGVaOiBudW1iZXIgPSAoTWF0aC5yYW5kb20oKSAqIDAuNSArIDAuNSkgKiAxLjUgKiB0aGlzLnNpemVaICogdGhpcy50YXJnZXQudHJhbnNmb3JtLmxvY2FsU2NhbGVaICogQ29uc3QuU3RhZ2VJbml0U2NhbGUuejtcclxuICAgICAgICAgICAgdGhpcy5waWVjZXNMaXN0W2lkeF0udHJhbnNmb3JtLmxvY2FsU2NhbGUgPSBuZXcgTGF5YS5WZWN0b3IzKHNjYWxlWCwgc2NhbGVZLCBzY2FsZVopO1xyXG4gICAgICAgICAgICAvLyBzZXQgcm90XHJcbiAgICAgICAgICAgIHRoaXMucGllY2VzTGlzdFtpZHhdLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJYID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMiAqIDkwO1xyXG4gICAgICAgICAgICB0aGlzLnBpZWNlc0xpc3RbaWR4XS50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDIgKiA5MDtcclxuICAgICAgICAgICAgdGhpcy5waWVjZXNMaXN0W2lkeF0udHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclogPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAyICogOTA7XHJcbiAgICAgICAgICAgIC8vIHNldCBwb3NcclxuICAgICAgICAgICAgbGV0IHZlbG9jaXR5OiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKCk7XHJcbiAgICAgICAgICAgIHZlbG9jaXR5LnggPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBDb25zdC5CdWxsZXRSYWRpdXM7XHJcbiAgICAgICAgICAgIHZlbG9jaXR5LnkgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBDb25zdC5CdWxsZXRSYWRpdXM7XHJcbiAgICAgICAgICAgIHZlbG9jaXR5LnogPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBDb25zdC5CdWxsZXRSYWRpdXM7XHJcbiAgICAgICAgICAgIHRoaXMucGllY2VzTGlzdFtpZHhdLnRyYW5zZm9ybS5wb3NpdGlvbiA9IHRoaXMudGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbi5jbG9uZSgpO1xyXG4gICAgICAgICAgICBMYXlhLlZlY3RvcjMuYWRkKHRoaXMucGllY2VzTGlzdFtpZHhdLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uLCB2ZWxvY2l0eSwgdGhpcy5waWVjZXNMaXN0W2lkeF0udHJhbnNmb3JtLmxvY2FsUG9zaXRpb24pO1xyXG4gICAgICAgICAgICAvLyBzZXQgdmVsb2NpdHkgb2YgcGllY2VzXHJcbiAgICAgICAgICAgIExheWEuVmVjdG9yMy5zY2FsZSh2ZWxvY2l0eSwgNTAsIHZlbG9jaXR5KTtcclxuICAgICAgICAgICAgKHRoaXMucGllY2VzTGlzdFtpZHhdLmdldENvbXBvbmVudChMYXlhLlJpZ2lkYm9keTNEKSBhcyBMYXlhLlJpZ2lkYm9keTNEKS5saW5lYXJWZWxvY2l0eSA9IHZlbG9jaXR5LmNsb25lKCk7XHJcbiAgICAgICAgICAgIC8vIHNldCBoaWRpbmcgZWZmZWN0XHJcbiAgICAgICAgICAgIExheWEuVHdlZW4udG8odGhpcy5waWVjZXNMaXN0W2lkeF0udHJhbnNmb3JtLmxvY2FsU2NhbGUsIHt4OiBzY2FsZVggLyAyLCB5OiBzY2FsZVkgLyAyLCB6OiBzY2FsZVogLyAyfSwgQ29uc3QuUGllY2VzQnJva2VuVGltZSAvIDYwICogMTAwMCwgTGF5YS5FYXNlLmxpbmVhck5vbmUpO1xyXG4gICAgICAgICAgICBMYXlhLlR3ZWVuLnRvKHRoaXMucGllY2VzTGlzdFtpZHhdLm1lc2hSZW5kZXJlci5tYXRlcmlhbCwge2FsYmVkb0NvbG9yQTogMH0sIENvbnN0LlBpZWNlc0Jyb2tlblRpbWUgLyA2MCAqIDEwMDAsIExheWEuRWFzZS5saW5lYXJOb25lLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGllY2VzTGlzdFsraWR4XS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyB1aSB9IGZyb20gXCIuLy4uLy4uL3VpL2xheWFNYXhVSVwiO1xyXG5pbXBvcnQgKiBhcyBDb25zdCBmcm9tIFwiLi4vQ29uc3RcIjtcclxuaW1wb3J0IEJ1bGxldCBmcm9tIFwiLi4vY29tcG9uZW50L0J1bGxldFwiO1xyXG5pbXBvcnQgU3RhbmQgZnJvbSBcIi4uL2NvbXBvbmVudC9TdGFuZFwiO1xyXG5pbXBvcnQgVGFyZ2V0IGZyb20gXCIuLi9jb21wb25lbnQvVGFyZ2V0XCI7XHJcbmltcG9ydCBHdWFyZCBmcm9tIFwiLi4vY29tcG9uZW50L0d1YXJkXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU2NlbmUgZXh0ZW5kcyB1aS5nYW1lLkdhbWVTY2VuZVVJIHtcclxuICAgIHN0YXRpYyBpbnN0YW5jZTogR2FtZVNjZW5lO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5omT5byA6K+l5Y2V5L6L6aG16Z2i77yM6Kem5Y+Rb25PcGVuZWRcclxuICAgICAqIEBwYXJhbSBwYXJhbSAgb25PcGVuZWTmlrnms5XnmoTkvKDlj4JcclxuICAgICAqL1xyXG4gICAgc3RhdGljIG9wZW5JbnN0YW5jZShwYXJhbT86IGFueSkge1xyXG4gICAgICAgIGlmIChHYW1lU2NlbmUuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgR2FtZVNjZW5lLmluc3RhbmNlLm9uT3BlbmVkKHBhcmFtKTtcclxuICAgICAgICAgICAgLy8gR2FtZVNjZW5lLmluc3RhbmNlLnNob3dUdXRvcmlhbCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIExheWEuU2NlbmUub3BlbihDb25zdC5VUkxfR2FtZVNjZW5lLCBmYWxzZSwgcGFyYW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW5lZChwYXJhbT86IGFueSkge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgLy8gdGhpcy5zdGF0ZSA9IENvbnN0LkdhbWVTdGF0ZS5SRUFEWTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2NlbmUzRDogTGF5YS5TY2VuZTNEO1xyXG4gICAgcHJpdmF0ZSBjYW1lcmE6IExheWEuQ2FtZXJhO1xyXG4gICAgcHJpdmF0ZSBkaXJlY3Rpb25MaWdodDogTGF5YS5EaXJlY3Rpb25MaWdodDtcclxuXHJcbiAgICAvKiogc3RhZ2UgKi9cclxuICAgIHB1YmxpYyBnYW1lU3RhZ2U6IExheWEuU3ByaXRlM0Q7XHJcbiAgICBwdWJsaWMgc3RhZ2VJZHg6IG51bWJlcjtcclxuICAgIHB1YmxpYyBNYXhCdWxsZXROdW06IG51bWJlciA9IDIwO1xyXG4gICAgcHVibGljIGN1cnJCdWxsZXROdW06IG51bWJlciA9IDA7XHJcblxyXG4gICAgLyoqIHN0YW5kOiBmb3Igd2luIGNoZWNrICovXHJcbiAgICBwcml2YXRlIHN0YW5kTnVtOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc3RhbmRDbGVhckNudDogbnVtYmVyO1xyXG5cclxuICAgIC8qKiBidWxsZXQgKi9cclxuICAgIHByaXZhdGUgX2J1bGxldDogTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICBwcml2YXRlIGJ1bGxldFJhZGl1czogbnVtYmVyID0gMC4wMjtcclxuICAgIHByaXZhdGUgYnVsbGV0VmVsb2NpdHk6IG51bWJlciA9IDE7XHJcbiAgICBwcml2YXRlIGJ1bGxldEluaXRQb3M6IExheWEuVmVjdG9yMztcclxuICAgIHByaXZhdGUgYnVsbGV0RGlyZWN0aW9uOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKCk7XHJcblxyXG4gICAgLyoqIGNhbm5vbiAqL1xyXG4gICAgcHJpdmF0ZSBwbGF5ZXI6IExheWEuTWVzaFNwcml0ZTNEO1xyXG4gICAgcHJpdmF0ZSBwbGF5ZXJBbmk6IExheWEuQW5pbWF0b3I7XHJcbiAgICBwcml2YXRlIHNob290VGltZTogbnVtYmVyID0gLTE7O1xyXG5cclxuICAgIC8qKiByYXljYXN0ICovXHJcbiAgICBwcml2YXRlIG1vdXNlUG9pbnQ6IExheWEuVmVjdG9yMiA9IG5ldyBMYXlhLlZlY3RvcjIoKTtcclxuICAgIHByaXZhdGUgcmF5OiBMYXlhLlJheSA9IG5ldyBMYXlhLlJheShuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIDApLCBuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIDApKTtcclxuICAgIHByaXZhdGUgaGl0UmVzdWx0OiBMYXlhLkhpdFJlc3VsdCA9IG5ldyBMYXlhLkhpdFJlc3VsdCgpO1xyXG5cclxuICAgIC8qKiBnYW1lIHN0YXRlICovXHJcbiAgICBwdWJsaWMgc3RhdGU6IG51bWJlciA9IDA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgR2FtZVNjZW5lLmluc3RhbmNlID0gdGhpcztcclxuXHJcbiAgICAgICAgdGhpcy5pbml0U2NlbmUzRCgpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRQbGF5ZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0QnVsbGV0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhZ2VJZHggPSAxO1xyXG4gICAgICAgIHRoaXMubG9hZEdhbWVTdGFnZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBpbml0aWFsaXplIHNjZW5lICovXHJcbiAgICBwcml2YXRlIGluaXRTY2VuZTNEKCkge1xyXG4gICAgICAgIC8vIGFkZCBzY2VuZVxyXG4gICAgICAgIHRoaXMuc2NlbmUzRCA9IExheWEuc3RhZ2UuYWRkQ2hpbGQobmV3IExheWEuU2NlbmUzRCgpKSBhcyBMYXlhLlNjZW5lM0Q7XHJcblxyXG4gICAgICAgIC8vIGNhbWVyYVxyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gdGhpcy5zY2VuZTNELmFkZENoaWxkKG5ldyBMYXlhLkNhbWVyYSgpKSBhcyBMYXlhLkNhbWVyYTtcclxuICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbiA9IENvbnN0LkNhbWVyYUluaXRQb3MuY2xvbmUoKTtcclxuICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyID0gQ29uc3QuQ2FtZXJhSW5pdFJvdEV1bGVyLmNsb25lKCk7XHJcblxyXG4gICAgICAgIC8vIGRpcmVjdGlvbiBsaWdodFxyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uTGlnaHQgPSB0aGlzLnNjZW5lM0QuYWRkQ2hpbGQobmV3IExheWEuRGlyZWN0aW9uTGlnaHQoKSkgYXMgTGF5YS5EaXJlY3Rpb25MaWdodDtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkxpZ2h0LnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gQ29uc3QuTGlnaHRJbml0UG9zLmNsb25lKCk7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25MaWdodC50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyID0gQ29uc3QuTGlnaHRJbml0Um90RXVsZXIuY2xvbmUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogaW5pdGlhbGl6ZSBwbGF5ZXIgKi9cclxuICAgIHByaXZhdGUgaW5pdFBsYXllcigpIHtcclxuICAgICAgICBMYXlhLlNwcml0ZTNELmxvYWQoQ29uc3QuUGxheWVyUmVzVXJsLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIChyZXMpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIgPSByZXM7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUzRC5hZGRDaGlsZCh0aGlzLnBsYXllcik7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyQW5pID0gdGhpcy5wbGF5ZXIuZ2V0Q29tcG9uZW50KExheWEuQW5pbWF0b3IpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllci50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbiA9IENvbnN0LlBsYXllckluaXRQb3MuY2xvbmUoKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlciA9IENvbnN0LlBsYXllckluaXRSb3QuY2xvbmUoKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIudHJhbnNmb3JtLmxvY2FsU2NhbGUgPSBDb25zdC5QbGF5ZXJJbml0U2NhbGUuY2xvbmUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyLm5hbWUgPSBcInBsYXllclwiO1xyXG5cclxuICAgICAgICAgICAgbGV0IHNoYWRvd01hdDogTGF5YS5CbGlublBob25nTWF0ZXJpYWwgPSAodGhpcy5wbGF5ZXIuZ2V0Q2hpbGRCeU5hbWUoXCJzaGFkb3dfMFwiKSBhcyBMYXlhLk1lc2hTcHJpdGUzRCkubWVzaFJlbmRlcmVyLm1hdGVyaWFsIGFzIExheWEuQmxpbm5QaG9uZ01hdGVyaWFsO1xyXG4gICAgICAgICAgICBzaGFkb3dNYXQucmVuZGVyTW9kZSA9IExheWEuQmxpbm5QaG9uZ01hdGVyaWFsLlJFTkRFUk1PREVfVFJBTlNQQVJFTlQ7XHJcbiAgICAgICAgICAgIHNoYWRvd01hdC5hbGJlZG9Db2xvckEgPSAwLjI7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgc2hvb3RpbmcgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyQW5pLmdldERlZmF1bHRTdGF0ZSgpLmNsaXAuaXNsb29waW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJBbmkucGxheSgpO1xyXG4gICAgICAgICAgICBMYXlhLnRpbWVyLmZyYW1lTG9vcCgxLCB0aGlzLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBwbGF5IHNob290aW5nIGFuaW1hdGlvblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG9vdFRpbWUtLTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob290VGltZSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzdG9wIHBsYXlpbmdcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllckFuaS5zcGVlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogaW5pdGlhbGl6ZSBidWxsZXQgKi9cclxuICAgIHByaXZhdGUgaW5pdEJ1bGxldCgpIHtcclxuICAgICAgICB0aGlzLl9idWxsZXQgPSBuZXcgTGF5YS5NZXNoU3ByaXRlM0QoTGF5YS5QcmltaXRpdmVNZXNoLmNyZWF0ZVNwaGVyZShDb25zdC5CdWxsZXRSYWRpdXMpKTtcclxuXHJcbiAgICAgICAgLyoqIGFkZCByaWdpZGJvZHkgKi9cclxuICAgICAgICBsZXQgYnVsbGV0UmlnaWQ6IExheWEuUmlnaWRib2R5M0QgPSB0aGlzLl9idWxsZXQuYWRkQ29tcG9uZW50KExheWEuUmlnaWRib2R5M0QpO1xyXG4gICAgICAgIGJ1bGxldFJpZ2lkLmNvbGxpZGVyU2hhcGUgPSBuZXcgTGF5YS5TcGhlcmVDb2xsaWRlclNoYXBlKENvbnN0LkJ1bGxldFJhZGl1cyk7XHJcblxyXG4gICAgICAgIC8qKiBzZXQgcGh5c2ljcyAqL1xyXG4gICAgICAgIGJ1bGxldFJpZ2lkLm1hc3MgPSAxMDtcclxuICAgICAgICBidWxsZXRSaWdpZC5vdmVycmlkZUdyYXZpdHkgPSB0cnVlO1xyXG4gICAgICAgIGJ1bGxldFJpZ2lkLmdyYXZpdHkgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIC01LCAwKTtcclxuICAgICAgICAvLyBxdWljayBtb3ZpbmcgZGV0ZWNpb25cclxuICAgICAgICBidWxsZXRSaWdpZC5jY2RNb3Rpb25UaHJlc2hvbGQgPSAwLjAwMDE7XHJcbiAgICAgICAgYnVsbGV0UmlnaWQuY2NkU3dlcHRTcGhlcmVSYWRpdXMgPSBDb25zdC5CdWxsZXRSYWRpdXM7XHJcblxyXG4gICAgICAgIC8qKiB0cmFzZm9ybSAqL1xyXG4gICAgICAgIHRoaXMuX2J1bGxldC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbiA9IENvbnN0LkJ1bGxldEluaXRQb3MuY2xvbmUoKTtcclxuICAgICAgICB0aGlzLl9idWxsZXQudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlciA9IENvbnN0LkJ1bGxldEluaXRSb3QuY2xvbmUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYnVsbGV0Lm5hbWUgPSBcIl9idWxsZXRcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKiogbG9hZCBnYW1lIHN0YWdlIGJ5IGluZGV4ICovXHJcbiAgICBwcml2YXRlIGxvYWRHYW1lU3RhZ2UoKSB7XHJcbiAgICAgICAgLy8gcmVzZXRcclxuICAgICAgICB0aGlzLmdhbWVTdGFnZSAmJiB0aGlzLmdhbWVTdGFnZS5kZXN0cm95Q2hpbGRyZW4oKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGFnZSAmJiB0aGlzLmdhbWVTdGFnZS5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5jdXJyQnVsbGV0TnVtID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5zdGFuZE51bSA9IDA7XHJcbiAgICAgICAgdGhpcy5zdGFuZENsZWFyQ250ID0gMDtcclxuXHJcbiAgICAgICAgLy8gbG9hZCBzdGFnZVxyXG4gICAgICAgIGxldCBzYXRnZVJlc1VybDogc3RyaW5nID0gQ29uc3QuU3RhZ2VSZXNVcmwgKyB0aGlzLnN0YWdlSWR4ICsgXCIubGhcIjtcclxuICAgICAgICBMYXlhLlNwcml0ZTNELmxvYWQoc2F0Z2VSZXNVcmwsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgKHJlcykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVTdGFnZSA9IHRoaXMuc2NlbmUzRC5hZGRDaGlsZChyZXMpIGFzIExheWEuU3ByaXRlM0Q7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgcG9zXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YWdlLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gQ29uc3QuU3RhZ2VJbml0UG9zLmNsb25lKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YWdlLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXIgPSBDb25zdC5TdGFnZUluaXRSb3QuY2xvbmUoKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lU3RhZ2UudHJhbnNmb3JtLmxvY2FsU2NhbGUgPSBDb25zdC5TdGFnZUluaXRTY2FsZS5jbG9uZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gZGVzdHJveSBhbmltYXRvciBjb21wb25lbnQ6IOS4jeeEtuS8mue6puadn+eJqeeQhueisOaSnuaViOaenFxyXG4gICAgICAgICAgICAodGhpcy5nYW1lU3RhZ2UuZ2V0Q29tcG9uZW50KExheWEuQW5pbWF0b3IpIGFzIExheWEuQW5pbWF0b3IpLmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjaGlsZDogTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLmdhbWVTdGFnZS5udW1DaGlsZHJlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZCA9IHRoaXMuZ2FtZVN0YWdlLmdldENoaWxkQXQoaSkgYXMgTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICAgICAgICAgICAgICAvKiogdGFyZ2V0IG9iamVjdCAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLm5hbWUuc2VhcmNoKFwiT2JzdGFjbGVcIikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoaWxkLm5hbWUgKyBcIiB0byB0YXJnZXRcIilcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgc2NpcHRcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0U2NyaXB0OiBUYXJnZXQgPSBjaGlsZC5hZGRDb21wb25lbnQoVGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5uYW1lLnNlYXJjaChcIkdsYXNzXCIpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2NyaXB0LnNldFR5cGUoQ29uc3QuVGFyZ2V0VHlwZS5HTEFTUyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTY3JpcHQuc2V0VHlwZShDb25zdC5UYXJnZXRUeXBlLkRFRkFVTFQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8qKiBzdGFuZF9ib3ggKi9cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoaWxkLm5hbWUuc2VhcmNoKFwiQ3ViZVwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQubmFtZSArIFwiIHRvIHN0YW5kXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQubmFtZSA9IFwic3RhbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgY29sbGlkZXJcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmlnaWQ6IExheWEuUGh5c2ljc0NvbGxpZGVyID0gY2hpbGQuYWRkQ29tcG9uZW50KExheWEuUGh5c2ljc0NvbGxpZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYm91bmRpbmdCb3g6IExheWEuQm91bmRCb3ggPSBjaGlsZC5tZXNoRmlsdGVyLnNoYXJlZE1lc2guYm91bmRpbmdCb3guY2xvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2l6ZVg6IG51bWJlciA9IGJvdW5kaW5nQm94Lm1heC54IC0gYm91bmRpbmdCb3gubWluLng7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNpemVZOiBudW1iZXIgPSBib3VuZGluZ0JveC5tYXgueSAtIGJvdW5kaW5nQm94Lm1pbi55O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzaXplWjogbnVtYmVyID0gYm91bmRpbmdCb3gubWF4LnogLSBib3VuZGluZ0JveC5taW4uejtcclxuICAgICAgICAgICAgICAgICAgICByaWdpZC5jb2xsaWRlclNoYXBlID0gbmV3IExheWEuQm94Q29sbGlkZXJTaGFwZShzaXplWCwgc2l6ZVksIHNpemVaKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgc2NyaXB0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6I635Y+W5Y+w5a2QYm91bmRib3jvvIzmt7vliqDohJrmnKzvvIzpnIDopoHlhbzlrrnlpJrkuKrlubPlj7Dml7bog5zliKnliKTmlq0sICYgbWVzaCBjb2xsaWRlciBzaGFwZeeisOaSnuaKluWKqOmXrumimCB0b2RvIDw9PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLmFkZENvbXBvbmVudChTdGFuZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhbmROdW0rKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8qKiBzdGFuZF9jeWxpbmRlciAqL1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hpbGQubmFtZS5zZWFyY2goXCJDeWxpbmRlclwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQubmFtZSArIFwiIHRvIHN0YW5kXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQubmFtZSA9IFwic3RhbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgY29sbGlkZXJcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmlnaWQ6IExheWEuUGh5c2ljc0NvbGxpZGVyID0gY2hpbGQuYWRkQ29tcG9uZW50KExheWEuUGh5c2ljc0NvbGxpZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29sbGlkZXJTaGFwZTogTGF5YS5NZXNoQ29sbGlkZXJTaGFwZSA9IG5ldyBMYXlhLk1lc2hDb2xsaWRlclNoYXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGlkZXJTaGFwZS5tZXNoID0gY2hpbGQubWVzaEZpbHRlci5zaGFyZWRNZXNoO1xyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2lkLmNvbGxpZGVyU2hhcGUgPSBjb2xsaWRlclNoYXBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLyoqIEd1YXJkICovXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGlsZC5uYW1lLnNlYXJjaChcIkd1YXJkXCIpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaGlsZC5uYW1lICsgXCIgdG8gZ3VhcmRcIilcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgc2NyaXB0XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGd1YXJkOiBHdWFyZCA9IGNoaWxkLmFkZENvbXBvbmVudChHdWFyZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHNldCBzdGFnZSBsaXN0ZW5lclxyXG4gICAgICAgICAgICBMYXlhLnRpbWVyLmZyYW1lTG9vcCgxLCB0aGlzLCB0aGlzLnN0YWdlTGlzdGVuZXIpO1xyXG4gICAgICAgICAgICAvLyBtb3VzZSBjbGljayBldmVudCBsaXN0ZW46IHNob290IGEgYnVsbGV0XHJcbiAgICAgICAgICAgIExheWEuc3RhZ2Uub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5vbkNsaWNrKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIGdhbWUgc3RhZ2UgbGlzdGVuZXIgKi9cclxuICAgIHByaXZhdGUgc3RhZ2VMaXN0ZW5lcigpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGFuZENsZWFyQ250ID49IHRoaXMuc3RhbmROdW0pIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJZb3Ugd2luLiBTdGFnZTogXCIgKyB0aGlzLnN0YWdlSWR4KTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0U3RhZ2UoKTtcclxuICAgICAgICAgICAgLy8gY2xlYXIgbGlzdGVuZXJcclxuICAgICAgICAgICAgTGF5YS50aW1lci5jbGVhcih0aGlzLCB0aGlzLnN0YWdlTGlzdGVuZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmN1cnJCdWxsZXROdW0gPj0gdGhpcy5NYXhCdWxsZXROdW0pIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJvdXQgb2YgYW1tb1wiKTtcclxuICAgICAgICAgICAgdGhpcy5yZXN0YXJ0KCk7XHJcbiAgICAgICAgICAgIExheWEudGltZXIuY2xlYXIodGhpcywgdGhpcy5zdGFnZUxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHJlc3RhcnQgY3VycmVudCBzdGFnZSAqL1xyXG4gICAgcmVzdGFydCgpIHtcclxuICAgICAgICB0aGlzLmxvYWRHYW1lU3RhZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogc3RhcnQgbmV4dCBzdGFnZSAqL1xyXG4gICAgbmV4dFN0YWdlKCkge1xyXG4gICAgICAgIHRoaXMuc3RhZ2VJZHgrKztcclxuICAgICAgICBpZiAodGhpcy5zdGFnZUlkeCA8PSBDb25zdC5TdGFnZU51bSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRHYW1lU3RhZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6YCa5YWzXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiogbW91c2UgY2xpY2sgZXZlbnQ6IHNob290IGEgYnVsbGV0ICovXHJcbiAgICBwcml2YXRlIG9uQ2xpY2soKSB7XHJcbiAgICAgICAgLy8gcGxheSBzaG9vdCBhbmltYXRpb25cclxuICAgICAgICB0aGlzLnNob290VGltZSA9IENvbnN0LlBsYXllclNob290TGlmZVRpbWU7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJBbmkuc3BlZWQgPSAxO1xyXG5cclxuICAgICAgICAvLyBnZXQgcmF5XHJcbiAgICAgICAgdGhpcy5tb3VzZVBvaW50LnggPSBMYXlhLk1vdXNlTWFuYWdlci5pbnN0YW5jZS5tb3VzZVg7XHJcbiAgICAgICAgdGhpcy5tb3VzZVBvaW50LnkgPSBMYXlhLk1vdXNlTWFuYWdlci5pbnN0YW5jZS5tb3VzZVk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudmlld3BvcnRQb2ludFRvUmF5KHRoaXMubW91c2VQb2ludCwgdGhpcy5yYXkpO1xyXG5cclxuICAgICAgICAvLyBnZXQgYnVsbGV0IHNob290aW5nIGRpcmVjdGlvblxyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lM0QucGh5c2ljc1NpbXVsYXRpb24ucmF5Q2FzdCh0aGlzLnJheSwgdGhpcy5oaXRSZXN1bHQsIDMwKSkge1xyXG4gICAgICAgICAgICAvLyBkaXJlY3Rpb24gdmVjdG9yOiBbYnVsbGV0IGluaXQgcG9pbnRdIHRvIFttb3VzZSBoaXQgcG9pbnRdXHJcbiAgICAgICAgICAgIExheWEuVmVjdG9yMy5zdWJ0cmFjdCh0aGlzLmhpdFJlc3VsdC5wb2ludCwgQ29uc3QuQnVsbGV0SW5pdFBvcywgdGhpcy5idWxsZXREaXJlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZGlyZWN0aW9uIHZlY3RvcjogW2NhbWVyYSBwb2ludF0gdG8gW21vdXNlIGhpdCBwb2ludF1cclxuICAgICAgICAgICAgdmFyIGFWMzogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygpO1xyXG4gICAgICAgICAgICAvLyByYXkgZGlyZWN0aW9uIHNjYWxlOiB0byBkZXB0aCBzY2FsZVpcclxuICAgICAgICAgICAgbGV0IHNjYWxlVjogbnVtYmVyID0gdGhpcy5jYW1lcmEuZmFyUGxhbmU7XHJcbiAgICAgICAgICAgIHNjYWxlViA9IDIwO1xyXG4gICAgICAgICAgICBMYXlhLlZlY3RvcjMuc2NhbGUodGhpcy5yYXkuZGlyZWN0aW9uLCBzY2FsZVYsIGFWMyk7XHJcbiAgICAgICAgICAgIC8vIGRpcmVjdGlvbiB2ZWN0b3I6IFtidWxsZXQgaW5pdCBwb2ludF0gdG8gW2NhbWVyYSBwb2ludF1cclxuICAgICAgICAgICAgdmFyIGJWMzogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygpO1xyXG4gICAgICAgICAgICBMYXlhLlZlY3RvcjMuc3VidHJhY3QodGhpcy5jYW1lcmEudHJhbnNmb3JtLnBvc2l0aW9uLCBDb25zdC5CdWxsZXRJbml0UG9zLCBiVjMpO1xyXG4gICAgICAgICAgICAvLyBkaXJlY3Rpb24gdmVjdG9yOiBbYnVsbGV0IGluaXQgcG9pbnRdIHRvIFttb3VzZSBoaXQgcG9pbnRdXHJcbiAgICAgICAgICAgIExheWEuVmVjdG9yMy5hZGQoYVYzLCBiVjMsIHRoaXMuYnVsbGV0RGlyZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgTGF5YS5WZWN0b3IzLm5vcm1hbGl6ZSh0aGlzLmJ1bGxldERpcmVjdGlvbiwgdGhpcy5idWxsZXREaXJlY3Rpb24pO1xyXG4gICAgICAgIHRoaXMuYnVsbGV0VmVsb2NpdHkgPSA1MDtcclxuICAgICAgICBMYXlhLlZlY3RvcjMuc2NhbGUodGhpcy5idWxsZXREaXJlY3Rpb24sIHRoaXMuYnVsbGV0VmVsb2NpdHksIHRoaXMuYnVsbGV0RGlyZWN0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gZ2VuZXJhdGUgYnVsbGV0XHJcbiAgICAgICAgbGV0IGJ1bGxldDogTGF5YS5NZXNoU3ByaXRlM0QgPSB0aGlzLl9idWxsZXQuY2xvbmUoKTtcclxuICAgICAgICBidWxsZXQubmFtZSA9IFwiYnVsbGV0XCI7XHJcbiAgICAgICAgdGhpcy5zY2VuZTNELmFkZENoaWxkKGJ1bGxldCk7XHJcbiAgICAgICAgbGV0IGJ1bGxldFJpZ2lkOiBMYXlhLlJpZ2lkYm9keTNEID0gYnVsbGV0LmdldENvbXBvbmVudChMYXlhLlJpZ2lkYm9keTNEKTtcclxuICAgICAgICBidWxsZXRSaWdpZC5saW5lYXJWZWxvY2l0eSA9IHRoaXMuYnVsbGV0RGlyZWN0aW9uLmNsb25lKCk7XHJcblxyXG4gICAgICAgIGJ1bGxldC5hZGRDb21wb25lbnQoQnVsbGV0KTtcclxuICAgIH1cclxufSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xuaW1wb3J0IFZpZXc9TGF5YS5WaWV3O1xyXG5pbXBvcnQgRGlhbG9nPUxheWEuRGlhbG9nO1xyXG5pbXBvcnQgU2NlbmU9TGF5YS5TY2VuZTtcbnZhciBSRUc6IEZ1bmN0aW9uID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xuZXhwb3J0IG1vZHVsZSB1aS5nYW1lIHtcclxuICAgIGV4cG9ydCBjbGFzcyBHYW1lU2NlbmVVSSBleHRlbmRzIFNjZW5lIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcigpeyBzdXBlcigpfVxyXG4gICAgICAgIGNyZWF0ZUNoaWxkcmVuKCk6dm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLmNyZWF0ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZFNjZW5lKFwiZ2FtZS9HYW1lU2NlbmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgUkVHKFwidWkuZ2FtZS5HYW1lU2NlbmVVSVwiLEdhbWVTY2VuZVVJKTtcclxufVxyIl19
