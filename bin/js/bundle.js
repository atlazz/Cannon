var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var GameScene_1 = require("./script/runtime/GameScene");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("script/runtime/GameScene.ts", GameScene_1.default);
    };
    GameConfig.width = 640;
    GameConfig.height = 1136;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "game/GameScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = true;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./script/runtime/GameScene":7}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/** version */
exports.VERSION = "1.0.0";
/** pages */
exports.URL_HomeView = "home/HomeView.scene";
exports.URL_GameScene = "game/GameScene.scene";
exports.URL_OverView = "over/OverView.scene";
exports.URL_ReviveView = "dialog/ReviveView.scene";
/** camera */
exports.CameraInitPos = new Laya.Vector3(0, 0.3, 0.2);
exports.CameraInitRotEuler = new Laya.Vector3(0, 0, 0);
/** directional light */
exports.LightInitPos = new Laya.Vector3(0, 5, 0);
exports.LightInitRotEuler = new Laya.Vector3(-30, 0, 0);
exports.LightInitColor = new Laya.Vector3(1, 1, 1);
/** game stage */
exports.StageResUrl = "res/stage/out/";
exports.StageInitPos = new Laya.Vector3(0, 0, 0);
exports.StageInitRot = new Laya.Vector3(0, 180, 0);
exports.StageInitScale = new Laya.Vector3(20, 20, 20);
exports.StageNum = 30;
// winning check frame
exports.MaxWinCheckTime = 90;
// 屏蔽物体物理受力前等待时间
exports.SetKinematicWaitTime = 10;
/** background */
exports.BgResUrl = [
    "res/scene/Scenes_02.lh",
    "res/scene/Scenes_04.lh",
    "res/scene/Scenes_07.lh",
];
/** glass */
exports.GlassBrokenVelocity = 2.5;
/** obstacle piece */
exports.PieceResUrl = "res/cube_piece.lm";
exports.PiecesNum = 3;
exports.PiecesBrokenTime = 120;
/** bullet */
exports.BulletResUrl = "res/bullet.lh";
exports.BulletInitPos = new Laya.Vector3(0, 0, -1);
exports.BulletInitRot = new Laya.Vector3(180, 0, 0);
// init radius
exports.BulletRadius = 0.08;
// scale
exports.BulletScale = [
    1,
    1.2,
];
// mass
exports.BulletMass = [
    10,
    10,
];
// velocity
exports.BulletVelocity = [
    40,
    40,
];
/** player */
exports.PlayerResUrl = "res/human.lh";
exports.PlayerInitPos = new Laya.Vector3(0, -0.1, -0.5);
exports.PlayerInitRot = new Laya.Vector3(90, 168, 0);
exports.PlayerInitScale = new Laya.Vector3(15, 15, 15);
exports.PlayerShootLifeTime = 10;
},{}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameScene_1 = require("../runtime/GameScene");
var BulletScript = /** @class */ (function (_super) {
    __extends(BulletScript, _super);
    function BulletScript() {
        var _this = _super.call(this) || this;
        _this.type = 0 /* DEFAULT */;
        _this.lifetime = 120;
        _this.collisionBlackList = ["bullet", "player"];
        return _this;
    }
    BulletScript.prototype.onAwake = function () {
        this.bullet = this.owner;
        this.rigidbody = this.bullet.getComponent(Laya.Rigidbody3D);
    };
    BulletScript.prototype.onUpdate = function () {
        var _this = this;
        // check spirte alive
        if (this.bullet.destroyed) {
            this.destroy();
            return;
        }
        // update lifetime
        this.lifetime--;
        if (this.lifetime < 0) {
            Laya.timer.frameOnce(1, this, function () {
                // update counter
                GameScene_1.default.instance.currBulletNum++;
                // destroy
                _this.bullet.removeSelf();
                _this.destroy();
            });
        }
    };
    /** set material by type */
    BulletScript.prototype.setType = function (type) {
        this.type = type;
        if (this.type === 0 /* DEFAULT */) {
            var mat = new Laya.PBRSpecularMaterial();
            mat.renderMode = Laya.PBRSpecularMaterial.RENDERMODE_TRANSPARENT;
            mat.albedoColor = new Laya.Vector4(1, 0.7, 1, 0.7);
            this.bullet.meshRenderer.material = mat;
        }
        else if (this.type === 1 /* FROZEN */) {
            var mat = new Laya.PBRSpecularMaterial();
            mat.renderMode = Laya.PBRSpecularMaterial.RENDERMODE_TRANSPARENT;
            mat.albedoColor = new Laya.Vector4(0.2, 0.2, 1, 0.7);
            this.bullet.meshRenderer.material = mat;
        }
    };
    return BulletScript;
}(Laya.Script3D));
exports.default = BulletScript;
},{"../runtime/GameScene":7}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Guard = /** @class */ (function (_super) {
    __extends(Guard, _super);
    function Guard() {
        var _this = _super.call(this) || this;
        _this.MaxMoveTimes = 60;
        _this.moveTimes = 0;
        return _this;
    }
    Guard.prototype.onAwake = function () {
        // get sprite
        this.guard = this.owner;
        // get size
        var boundingBox = this.guard.meshFilter.sharedMesh.boundingBox.clone();
        this.sizeX = boundingBox.max.x - boundingBox.min.x;
        this.sizeY = boundingBox.max.y - boundingBox.min.y;
        this.sizeZ = boundingBox.max.z - boundingBox.min.z;
        // add collider
        var collider = this.guard.addComponent(Laya.PhysicsCollider);
        collider.colliderShape = new Laya.BoxColliderShape(this.sizeX, this.sizeY, this.sizeZ);
        // record init pos
        this.initPos = this.guard.transform.localPosition.clone();
    };
    Guard.prototype.onUpdate = function () {
        // check spirte alive
        if (this.guard.destroyed) {
            this.destroy();
            return;
        }
        /** 平移 */
        this.moveTimes = (this.moveTimes + 1) % (this.MaxMoveTimes * 2);
        // 位移方向标志
        var flag = Math.floor((this.moveTimes / this.MaxMoveTimes) % 2);
        // X和Y方向平移步进
        var moveStepX = this.sizeX * this.guard.transform.localScaleX / 2 / this.MaxMoveTimes;
        var moveStepY = this.sizeY * this.guard.transform.localScaleY / 2 / this.MaxMoveTimes;
        // Z轴旋转90，X和Y互换
        if (Math.floor((Math.abs(this.guard.transform.localRotationEulerZ) + 90.5) % 180) === 0) {
            var tmp = moveStepX;
            moveStepX = moveStepY;
            moveStepY = tmp;
        }
        // 全屏水平移动
        if (this.guard.name.search("move_x") >= 0) {
            this.MaxMoveTimes = 120;
            moveStepX = this.initPos.x * 2 / this.MaxMoveTimes;
            flag = Math.floor((this.moveTimes / this.MaxMoveTimes) % 2);
            if (flag) {
                this.guard.transform.localPositionX += moveStepX;
            }
            else {
                this.guard.transform.localPositionX -= moveStepX;
            }
        }
        // 全屏纵向移动
        else if (this.guard.name.search("move_y") >= 0) {
            this.MaxMoveTimes = 120;
            moveStepY = this.initPos.y * 2 / this.MaxMoveTimes;
            flag = Math.floor((this.moveTimes / this.MaxMoveTimes) % 2);
            if (flag) {
                this.guard.transform.localPositionY += moveStepY;
            }
            else {
                this.guard.transform.localPositionY -= moveStepY;
            }
        }
        // 半屏移动
        else if (this.guard.name.search("move_left") >= 0) {
            if (flag) {
                this.guard.transform.localPositionX -= moveStepX;
            }
            else {
                this.guard.transform.localPositionX += moveStepX;
            }
        }
        else if (this.guard.name.search("move_right") >= 0) {
            if (flag) {
                this.guard.transform.localPositionX += moveStepX;
            }
            else {
                this.guard.transform.localPositionX -= moveStepX;
            }
        }
        else if (this.guard.name.search("move_up") >= 0) {
            if (flag) {
                this.guard.transform.localPositionY -= moveStepY;
            }
            else {
                this.guard.transform.localPositionY += moveStepY;
            }
        }
        else if (this.guard.name.search("move_down") >= 0) {
            if (flag) {
                this.guard.transform.localPositionY += moveStepY;
            }
            else {
                this.guard.transform.localPositionY -= moveStepY;
            }
        }
        /** 旋转 */
        else if (this.guard.name.search("rotate_left") >= 0) {
            this.guard.transform.localRotationEulerY = (this.guard.transform.localRotationEulerY + 1) % 360;
        }
        else if (this.guard.name.search("rotate_right") >= 0) {
            this.guard.transform.localRotationEulerY = (this.guard.transform.localRotationEulerY - 1) % 360;
        }
        else if (this.guard.name.search("rotate_up") >= 0) {
            this.guard.transform.localRotationEulerX = (this.guard.transform.localRotationEulerX + 1) % 360;
        }
        else if (this.guard.name.search("rotate_down") >= 0) {
            this.guard.transform.localRotationEulerX = (this.guard.transform.localRotationEulerX - 1) % 360;
        }
    };
    return Guard;
}(Laya.Script3D));
exports.default = Guard;
},{}],6:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Const = require("../Const");
var GameScene_1 = require("../runtime/GameScene");
var Bullet_1 = require("../component/Bullet");
var Target = /** @class */ (function (_super) {
    __extends(Target, _super);
    function Target() {
        var _this = _super.call(this) || this;
        _this.type = 0 /* DEFAULT */;
        _this.collisionBlackList = ["stand", "Guard"];
        /** target object pieces */
        _this.piecesList = [];
        return _this;
    }
    Target.prototype.onAwake = function () {
        var _this = this;
        this.target = this.owner;
        this.setRigidbody();
        // 延后几帧屏蔽物理受力，以等待物体掉落放置
        Laya.timer.frameOnce(Const.SetKinematicWaitTime, this, function () {
            if (!GameScene_1.default.instance.isStageStart) {
                _this.rigidbody.isKinematic = true;
            }
        });
        this.initPieces();
    };
    Target.prototype.onCollisionEnter = function (collision) {
        // // reset win check counter
        // if (collision.other.owner.name === "stand") {
        //     GameScene.instance.winCheckCnt = 0;
        // }
        var other = collision.other.owner;
        // 子弹效果处理
        if (other.name === "bullet") {
            var bullet = other.getComponent(Bullet_1.default);
            if (bullet.type === 0 /* DEFAULT */) {
            }
            else if (bullet.type === 1 /* FROZEN */) {
                this.setType(1 /* GLASS */);
            }
        }
        // 本体受击打处理
        if (this.type === 1 /* GLASS */) {
            // 相对速度高可击碎
            var velocity = this.rigidbody.linearVelocity.clone();
            var velocityOther = new Laya.Vector3(0, 0, 0);
            // not playform
            if (this.collisionBlackList.indexOf(other.name) < 0 && other.name.indexOf("Guard") < 0) {
                velocityOther = other.getComponent(Laya.Rigidbody3D).linearVelocity.clone();
            }
            var velocityValue = Laya.Vector3.distance(velocity, velocityOther);
            if (velocityValue >= Const.GlassBrokenVelocity) {
                // this.isHit = true;
                this.broken();
            }
        }
    };
    Target.prototype.onCollisionStay = function (collision) {
        // // reset win check counter
        // if (collision.other.owner.name === "stand") {
        //     GameScene.instance.winCheckCnt = 0;
        // }
        var other = collision.other.owner;
        // 子弹效果处理
        if (other.name === "bullet") {
            var bullet = other.getComponent(Bullet_1.default);
            if (bullet.type === 0 /* DEFAULT */) {
            }
            else if (bullet.type === 1 /* FROZEN */) {
                this.setType(1 /* GLASS */);
            }
        }
    };
    // onCollisionExit(collision: Laya.Collision): void {
    //     // reset win check counter
    //     if (collision.other.owner.name === "stand") {
    //         GameScene.instance.winCheckCnt = 0;
    //     }
    // }
    Target.prototype.onUpdate = function () {
        // check spirte alive
        if (this.target.destroyed) {
            this.destroy();
            return;
        }
        // stage start
        if (this.rigidbody.isKinematic && GameScene_1.default.instance.isStageStart) {
            this.rigidbody.isKinematic = false;
        }
        /** win check
         *  引擎bug：物体架在两个平台夹缝上时，不触发onCollisionStay,
         *  故完善关卡胜利判断，根据物体与关卡模型中心距离判定是否掉出平台
         *  ps：物理引擎bug较多，可以来引擎呈现物理宏观效果，但尽量少依赖碰撞做需要稳定的底层处理
         */
        var dist = Laya.Vector3.distance(this.target.transform.position, GameScene_1.default.instance.gameStage.transform.position);
        if (dist < 20) {
            // reset win check counter
            GameScene_1.default.instance.winCheckCnt = 0;
        }
        /** physics engine bug detecting and fixing
         *  引擎bug：姿态稳定情况下，某个物体作用力方向（如重力时的底下）的碰撞物体快速消失，
         *  而此过程中相互作用影响过小导致自身姿态没有变化时，引擎会自动将该物体的刚体非激活，从而导致腾空现象，
         *  增大物体间相互作用力（如摩擦系数）可减少该情况发生，但不能杜绝，
         *  故在此检测该情况并对刚体销毁重建
         * */
        if (this.rigidbody && this.rigidbody.isActive == false) {
            this.refreshRigidbody();
            console.log("Physics_engine_bug_fixing: Reset rigidbody.");
        }
    };
    /** destroy and recreate rigidbody */
    Target.prototype.refreshRigidbody = function () {
        if (this.rigidbody) {
            this.rigidbody.destroy();
            this.setRigidbody();
            console.log("refresh rigidbody");
        }
    };
    /** set material by type */
    Target.prototype.setType = function (type) {
        this.type = type;
        if (this.type === 1 /* GLASS */) {
            var mat = this.target.meshRenderer.material;
            mat.renderMode = Laya.PBRSpecularMaterial.RENDERMODE_TRANSPARENT;
            mat.albedoTexture = null;
            mat.albedoColor = new Laya.Vector4(0.7, 0.7, 1, 0.7);
            mat.specularColor = new Laya.Vector4(0, 0, 0, 1);
            mat.enableEmission = true;
        }
    };
    /** set rigidbody */
    Target.prototype.setRigidbody = function () {
        // get size of bounding box
        var boundingBox = this.target.meshFilter.sharedMesh.boundingBox.clone();
        this.sizeX = boundingBox.max.x - boundingBox.min.x;
        this.sizeY = boundingBox.max.y - boundingBox.min.y;
        this.sizeZ = boundingBox.max.z - boundingBox.min.z;
        // add rigidbody
        this.rigidbody = this.target.addComponent(Laya.Rigidbody3D);
        if (this.target.name.search("Cube") >= 0) {
            this.rigidbody.colliderShape = new Laya.BoxColliderShape(this.sizeX, this.sizeY, this.sizeZ);
        }
        else if (this.target.name.search("Cylinder") >= 0) {
            this.rigidbody.colliderShape = new Laya.CylinderColliderShape(this.sizeX / 2, this.sizeY);
        }
        else {
            var colliderShape = new Laya.MeshColliderShape();
            colliderShape.mesh = this.target.meshFilter.sharedMesh;
            this.rigidbody.colliderShape = colliderShape;
        }
        this.setPhysicsParam();
    };
    /** set physics param */
    Target.prototype.setPhysicsParam = function () {
        this.rigidbody.isKinematic = false;
        if (this.type === 0 /* DEFAULT */) {
            this.rigidbody.mass = 10;
            this.rigidbody.friction = 10;
        }
        else if (this.type === 1 /* GLASS */) {
            this.rigidbody.mass = 0.1;
            this.rigidbody.friction = 2;
        }
    };
    /** set target broken */
    Target.prototype.broken = function () {
        // play broken sound
        var _this = this;
        // show pieces
        this.effectPiecesBroken();
        // hide target
        Laya.timer.frameOnce(1, this, function () {
            _this.target.active = false;
        });
    };
    /** init target pieces */
    Target.prototype.initPieces = function () {
        var _this = this;
        Laya.Mesh.load(Const.PieceResUrl, Laya.Handler.create(this, function (mesh) {
            var piece = new Laya.MeshSprite3D(mesh);
            piece.active = false;
            piece.name = "piece";
            // set material
            var mat = new Laya.BlinnPhongMaterial();
            mat.renderMode = Laya.BlinnPhongMaterial.RENDERMODE_TRANSPARENT;
            mat.albedoColor = new Laya.Vector4(0.7, 0.7, 1, 0.7);
            piece.meshRenderer.material = mat;
            // set rigidbody
            var pieceRigid = piece.addComponent(Laya.Rigidbody3D);
            var pieceColliderShape = new Laya.MeshColliderShape();
            pieceColliderShape.mesh = piece.meshFilter.sharedMesh;
            pieceRigid.colliderShape = pieceColliderShape;
            // add pieces to scene
            for (var i = 0; i < Const.PiecesNum; i++) {
                _this.piecesList.push(piece.clone());
                GameScene_1.default.instance.scene3D.addChild(_this.piecesList[i]);
            }
        }));
    };
    /** platy effect: target broken to pieces */
    Target.prototype.effectPiecesBroken = function () {
        var _this = this;
        var _loop_1 = function (idx) {
            // active pieces
            this_1.piecesList[idx].active = true;
            // set size scale
            var scaleX = (Math.random() * 0.5 + 0.5) * 1.5 * this_1.sizeX * this_1.target.transform.localScaleX * Const.StageInitScale.x;
            var scaleY = (Math.random() * 0.5 + 0.5) * 1.5 * this_1.sizeY * this_1.target.transform.localScaleY * Const.StageInitScale.y;
            var scaleZ = (Math.random() * 0.5 + 0.5) * 1.5 * this_1.sizeZ * this_1.target.transform.localScaleZ * Const.StageInitScale.z;
            this_1.piecesList[idx].transform.localScale = new Laya.Vector3(scaleX, scaleY, scaleZ);
            // set rot
            this_1.piecesList[idx].transform.localRotationEulerX = (Math.random() - 0.5) * 2 * 90;
            this_1.piecesList[idx].transform.localRotationEulerY = (Math.random() - 0.5) * 2 * 90;
            this_1.piecesList[idx].transform.localRotationEulerZ = (Math.random() - 0.5) * 2 * 90;
            // set pos
            var velocity = new Laya.Vector3();
            velocity.x = (Math.random() - 0.5) * Const.StageInitScale.x / 80;
            velocity.y = (Math.random() - 0.5) * Const.StageInitScale.y / 80;
            velocity.z = (Math.random() - 0.5) * Const.StageInitScale.z / 80;
            this_1.piecesList[idx].transform.position = this_1.target.transform.position.clone();
            Laya.Vector3.add(this_1.piecesList[idx].transform.localPosition, velocity, this_1.piecesList[idx].transform.localPosition);
            // set velocity of pieces
            Laya.Vector3.scale(velocity, 50, velocity);
            this_1.piecesList[idx].getComponent(Laya.Rigidbody3D).linearVelocity = velocity.clone();
            // set hiding effect
            Laya.Tween.to(this_1.piecesList[idx].transform.localScale, { x: scaleX / 2, y: scaleY / 2, z: scaleZ / 2 }, Const.PiecesBrokenTime / 60 * 1000, Laya.Ease.linearNone);
            Laya.Tween.to(this_1.piecesList[idx].meshRenderer.material, { albedoColorA: 0 }, Const.PiecesBrokenTime / 60 * 1000, Laya.Ease.linearNone, Laya.Handler.create(this_1, function () {
                _this.piecesList[+idx].destroy();
            }));
        };
        var this_1 = this;
        for (var idx in this.piecesList) {
            _loop_1(idx);
        }
    };
    return Target;
}(Laya.Script3D));
exports.default = Target;
},{"../Const":3,"../component/Bullet":4,"../runtime/GameScene":7}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var layaMaxUI_1 = require("./../../ui/layaMaxUI");
var Const = require("../Const");
var Bullet_1 = require("../component/Bullet");
var Target_1 = require("../component/Target");
var Guard_1 = require("../component/Guard");
var GameScene = /** @class */ (function (_super) {
    __extends(GameScene, _super);
    function GameScene() {
        var _this = _super.call(this) || this;
        _this.MaxBulletNum = 100;
        _this.currBulletNum = 0;
        _this.winCheckCnt = 0;
        _this.isStageStart = false;
        _this.bulletType = 0 /* DEFAULT */;
        _this.shootTime = -1;
        /** raycast */
        _this.mousePoint = new Laya.Vector2();
        _this.ray = new Laya.Ray(new Laya.Vector3(0, 0, 0), new Laya.Vector3(0, 0, 0));
        _this.hitResult = new Laya.HitResult();
        /** game state */
        _this.state = 0;
        GameScene.instance = _this;
        _this.initScene3D();
        _this.initPlayer();
        _this.initBullet();
        _this.stageIdx = 1;
        _this.loadGameStage();
        return _this;
    }
    /**
     * 打开该单例页面，触发onOpened
     * @param param  onOpened方法的传参
     */
    GameScene.openInstance = function (param) {
        if (GameScene.instance) {
            GameScene.instance.onOpened(param);
            // GameScene.instance.showTutorial();
        }
        else {
            Laya.Scene.open(Const.URL_GameScene, false, param);
        }
    };
    GameScene.prototype.onOpened = function (param) {
        this.visible = true;
        // this.state = Const.GameState.READY;
    };
    ;
    /** initialize scene */
    GameScene.prototype.initScene3D = function () {
        var _this = this;
        // add scene
        this.scene3D = Laya.stage.addChild(new Laya.Scene3D());
        // camera
        this.camera = this.scene3D.addChild(new Laya.Camera());
        this.camera.transform.localPosition = Const.CameraInitPos.clone();
        this.camera.transform.localRotationEuler = Const.CameraInitRotEuler.clone();
        // direction light
        this.directionLight = this.scene3D.addChild(new Laya.DirectionLight());
        this.directionLight.transform.localPosition = Const.LightInitPos.clone();
        this.directionLight.transform.localRotationEuler = Const.LightInitRotEuler.clone();
        this.directionLight.color = Const.LightInitColor.clone();
        // background
        Laya.Sprite3D.load(Const.BgResUrl[0], Laya.Handler.create(this, function (res) {
            var sceneSp = _this.scene3D.addChild(res);
            // transform
            sceneSp.transform.localPosition = Const.StageInitPos.clone();
            // sceneSp.transform.localPositionZ -= 3;
            sceneSp.transform.localRotationEuler = Const.StageInitRot.clone();
            sceneSp.transform.localScale = Const.StageInitScale.clone();
        }));
    };
    /** initialize player */
    GameScene.prototype.initPlayer = function () {
        var _this = this;
        Laya.Sprite3D.load(Const.PlayerResUrl, Laya.Handler.create(this, function (res) {
            _this.player = res;
            _this.scene3D.addChild(_this.player);
            _this.playerAni = _this.player.getComponent(Laya.Animator);
            _this.player.transform.localPosition = Const.PlayerInitPos.clone();
            _this.player.transform.localRotationEuler = Const.PlayerInitRot.clone();
            _this.player.transform.localScale = Const.PlayerInitScale.clone();
            _this.player.name = "player";
            var shadowMat = _this.player.getChildByName("shadow_0").meshRenderer.material;
            shadowMat.renderMode = Laya.BlinnPhongMaterial.RENDERMODE_TRANSPARENT;
            shadowMat.albedoColorA = 0.2;
            // set shooting animation
            _this.playerAni.getDefaultState().clip.islooping = true;
            _this.playerAni.play();
            Laya.timer.frameLoop(1, _this, function () {
                // play shooting animation
                _this.shootTime--;
                if (_this.shootTime < 0) {
                    // stop playing
                    _this.playerAni.speed = 0;
                }
            });
        }));
    };
    /** init bullet */
    GameScene.prototype.initBullet = function () {
        var radius = Const.BulletRadius;
        this._bullet = new Laya.MeshSprite3D(Laya.PrimitiveMesh.createSphere(radius));
        this._bullet.name = "_bullet";
        // trasform
        this._bullet.transform.localPosition = Const.BulletInitPos.clone();
        this._bullet.transform.localRotationEuler = Const.BulletInitRot.clone();
        // add rigidbody
        var bulletRigid = this._bullet.addComponent(Laya.Rigidbody3D);
        bulletRigid.colliderShape = new Laya.SphereColliderShape(radius);
    };
    /** load game stage by index */
    GameScene.prototype.loadGameStage = function () {
        var _this = this;
        // destroy old stage
        if (this.gameStage) {
            this.gameStage.destroyChildren();
            this.gameStage.destroy();
            Laya.stage.off(Laya.Event.CLICK, this, this.onClick);
        }
        // reset
        this.currBulletNum = 0;
        this.winCheckCnt = 0;
        this.isStageStart = false;
        // load stage
        var satgeResUrl = Const.StageResUrl + this.stageIdx + ".lh";
        Laya.Sprite3D.load(satgeResUrl, Laya.Handler.create(this, function (res) {
            _this.gameStage = _this.scene3D.addChild(res);
            // transform
            _this.gameStage.transform.localPosition = Const.StageInitPos.clone();
            _this.gameStage.transform.localRotationEuler = Const.StageInitRot.clone();
            _this.gameStage.transform.localScale = Const.StageInitScale.clone();
            // destroy animator component: 不然会约束物理碰撞效果
            var stageAni = _this.gameStage.getComponent(Laya.Animator);
            stageAni && stageAni.destroy();
            var child;
            for (var i = 0; i < _this.gameStage.numChildren; i++) {
                child = _this.gameStage.getChildAt(i);
                /** target object */
                if (child.name.search("Obstacle") >= 0) {
                    // console.log(child.name + " to target")
                    // add scipt
                    var targetScript = child.addComponent(Target_1.default);
                    // set type
                    if (child.name.search("Glass") >= 0) {
                        targetScript.setType(1 /* GLASS */);
                    }
                    else {
                        targetScript.setType(0 /* DEFAULT */);
                    }
                }
                /** stand_box */
                else if (child.name.search("Cube") >= 0) {
                    // console.log(child.name + " to stand")
                    child.name = "stand";
                    // add collider
                    var collider = child.addComponent(Laya.PhysicsCollider);
                    var boundingBox = child.meshFilter.sharedMesh.boundingBox.clone();
                    var sizeX = boundingBox.max.x - boundingBox.min.x;
                    var sizeY = boundingBox.max.y - boundingBox.min.y;
                    var sizeZ = boundingBox.max.z - boundingBox.min.z;
                    collider.colliderShape = new Laya.BoxColliderShape(sizeX, sizeY, sizeZ);
                    // 刷新渲染模式，不然其上设置成透明渲染的物体会被遮盖
                    child.meshRenderer.material.renderMode = Laya.PBRSpecularMaterial.RENDERMODE_CUTOUT;
                }
                /** stand_cylinder */
                else if (child.name.search("Cylinder") >= 0) {
                    // console.log(child.name + " to stand")
                    child.name = "stand";
                    // add collider
                    var collider = child.addComponent(Laya.PhysicsCollider);
                    var colliderShape = new Laya.MeshColliderShape();
                    colliderShape.mesh = child.meshFilter.sharedMesh;
                    collider.colliderShape = colliderShape;
                    // 刷新渲染模式，不然其上设置成透明渲染的物体会被遮盖
                    child.meshRenderer.material.renderMode = Laya.PBRSpecularMaterial.RENDERMODE_CUTOUT;
                }
                /** Guard */
                else if (child.name.search("Guard") >= 0) {
                    // console.log(child.name + " to guard")
                    // add script
                    var guard = child.addComponent(Guard_1.default);
                }
                else {
                    child.destroy();
                }
            }
            // set stage listener
            Laya.timer.frameLoop(1, _this, _this.stageListener);
            // mouse click event listen: shoot a bullet
            Laya.stage.on(Laya.Event.CLICK, _this, _this.onClick);
        }));
    };
    /** game stage listener */
    GameScene.prototype.stageListener = function () {
        // player win
        if (this.winCheckCnt++ >= Const.MaxWinCheckTime) {
            console.log("You win. Stage: " + this.stageIdx);
            this.nextStage();
            // clear listener
            Laya.timer.clear(this, this.stageListener);
        }
        // player fail: out of ammo
        else if (this.currBulletNum >= this.MaxBulletNum) {
            console.log("out of ammo");
            this.restart();
            Laya.timer.clear(this, this.stageListener);
        }
    };
    /** restart current stage */
    GameScene.prototype.restart = function () {
        this.loadGameStage();
    };
    /** start next stage */
    GameScene.prototype.nextStage = function () {
        this.stageIdx++;
        if (this.stageIdx <= Const.StageNum) {
            this.loadGameStage();
        }
        else {
            console.log("通关");
        }
    };
    /** mouse click event: shoot a bullet */
    GameScene.prototype.onClick = function () {
        // check res loading complete
        if (!this.gameStage || !this.player || !this._bullet) {
            return;
        }
        // play shoot animation
        this.shootTime = Const.PlayerShootLifeTime;
        this.playerAni.speed = 1;
        // get ray
        this.mousePoint.x = Laya.MouseManager.instance.mouseX;
        this.mousePoint.y = Laya.MouseManager.instance.mouseY;
        this.camera.viewportPointToRay(this.mousePoint, this.ray);
        // get bullet shooting direction
        var bulletDirection = new Laya.Vector3();
        if (this.scene3D.physicsSimulation.rayCast(this.ray, this.hitResult, 30)) {
            // direction vector: [bullet init point] to [mouse hit point]
            Laya.Vector3.subtract(this.hitResult.point, Const.BulletInitPos, bulletDirection);
        }
        else {
            // direction vector: [camera point] to [mouse hit point]
            var aV3 = new Laya.Vector3();
            // ray direction scale: to depth scaleZ
            var scaleV = this.camera.farPlane;
            scaleV = 20;
            Laya.Vector3.scale(this.ray.direction, scaleV, aV3);
            // direction vector: [bullet init point] to [camera point]
            var bV3 = new Laya.Vector3();
            Laya.Vector3.subtract(this.camera.transform.position, Const.BulletInitPos, bV3);
            // direction vector: [bullet init point] to [mouse hit point]
            Laya.Vector3.add(aV3, bV3, bulletDirection);
        }
        Laya.Vector3.normalize(bulletDirection, bulletDirection);
        // create bullet
        this.createBullet(1 /* FROZEN */, bulletDirection);
    };
    /** create bullet */
    GameScene.prototype.createBullet = function (type, direction) {
        this.bulletType = type;
        var bullet = this._bullet.clone();
        bullet.name = "bullet";
        this.scene3D.addChild(bullet);
        // trasform
        bullet.transform.localPosition = Const.BulletInitPos.clone();
        bullet.transform.localRotationEuler = Const.BulletInitRot.clone();
        Laya.Vector3.scale(bullet.transform.localScale, Const.BulletScale[this.bulletType], bullet.transform.localScale);
        // add rigidbody
        var bulletRigid = bullet.getComponent(Laya.Rigidbody3D);
        // quick moving detecion
        bulletRigid.ccdMotionThreshold = 0.0001;
        bulletRigid.ccdSweptSphereRadius = Const.BulletRadius * Const.BulletScale[this.bulletType];
        // set physics
        bulletRigid.mass = Const.BulletMass[this.bulletType];
        // set velocity
        var velocity = direction.clone();
        Laya.Vector3.scale(velocity, Const.BulletVelocity[this.bulletType], velocity);
        bulletRigid.linearVelocity = velocity.clone();
        // add script
        var bulletScript = bullet.addComponent(Bullet_1.default);
        // set type
        bulletScript.setType(this.bulletType);
        // 开放物体物理受力：玩家有效输入前，子弹发射轨迹形状检测是否有碰撞
        if (!this.isStageStart) {
            var shape = new Laya.SphereColliderShape(Const.BulletRadius * 5);
            var checkHitResult = [];
            if (this.scene3D.physicsSimulation.shapeCastAll(shape, Const.BulletInitPos, velocity, checkHitResult)) {
                for (var i in checkHitResult) {
                    if (checkHitResult[i].collider.owner.name !== "stand") {
                        this.isStageStart = true;
                    }
                }
            }
        }
    };
    return GameScene;
}(layaMaxUI_1.ui.game.GameSceneUI));
exports.default = GameScene;
},{"../Const":3,"../component/Bullet":4,"../component/Guard":5,"../component/Target":6,"./../../ui/layaMaxUI":8}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Scene = Laya.Scene;
var REG = Laya.ClassUtils.regClass;
var ui;
(function (ui) {
    var game;
    (function (game) {
        var GameSceneUI = /** @class */ (function (_super) {
            __extends(GameSceneUI, _super);
            function GameSceneUI() {
                return _super.call(this) || this;
            }
            GameSceneUI.prototype.createChildren = function () {
                _super.prototype.createChildren.call(this);
                this.loadScene("game/GameScene");
            };
            return GameSceneUI;
        }(Scene));
        game.GameSceneUI = GameSceneUI;
        REG("ui.game.GameSceneUI", GameSceneUI);
    })(game = ui.game || (ui.game = {}));
})(ui = exports.ui || (exports.ui = {}));
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6L0xheWFBaXJJREVfYmV0YS9yZXNvdXJjZXMvYXBwL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvR2FtZUNvbmZpZy50cyIsInNyYy9NYWluLnRzIiwic3JjL3NjcmlwdC9Db25zdC50cyIsInNyYy9zY3JpcHQvY29tcG9uZW50L0J1bGxldC50cyIsInNyYy9zY3JpcHQvY29tcG9uZW50L0d1YXJkLnRzIiwic3JjL3NjcmlwdC9jb21wb25lbnQvVGFyZ2V0LnRzIiwic3JjL3NjcmlwdC9ydW50aW1lL0dhbWVTY2VuZS50cyIsInNyYy91aS9sYXlhTWF4VUkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDVkEsZ0dBQWdHO0FBQ2hHLHdEQUFrRDtBQUNsRDs7RUFFRTtBQUNGO0lBYUk7SUFBYyxDQUFDO0lBQ1IsZUFBSSxHQUFYO1FBQ0ksSUFBSSxHQUFHLEdBQWEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUM7UUFDN0MsR0FBRyxDQUFDLDZCQUE2QixFQUFDLG1CQUFTLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBaEJNLGdCQUFLLEdBQVEsR0FBRyxDQUFDO0lBQ2pCLGlCQUFNLEdBQVEsSUFBSSxDQUFDO0lBQ25CLG9CQUFTLEdBQVEsWUFBWSxDQUFDO0lBQzlCLHFCQUFVLEdBQVEsTUFBTSxDQUFDO0lBQ3pCLGlCQUFNLEdBQVEsS0FBSyxDQUFDO0lBQ3BCLGlCQUFNLEdBQVEsTUFBTSxDQUFDO0lBQ3JCLHFCQUFVLEdBQUssc0JBQXNCLENBQUM7SUFDdEMsb0JBQVMsR0FBUSxFQUFFLENBQUM7SUFDcEIsZ0JBQUssR0FBUyxLQUFLLENBQUM7SUFDcEIsZUFBSSxHQUFTLElBQUksQ0FBQztJQUNsQix1QkFBWSxHQUFTLEtBQUssQ0FBQztJQUMzQiw0QkFBaUIsR0FBUyxJQUFJLENBQUM7SUFNMUMsaUJB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b0NBQWMsR0FBZDtnQkFDSSxpQkFBTSxjQUFjLFdBQUUsQ0FBQztnQkFDdkIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBQ3JDLENBQUM7WUFDTCxrQkFBQztRQUFELENBTkEsQUFNQyxDQU5nQyxLQUFLLEdBTXJDO1FBTlksZ0JBQVcsY0FNdkIsQ0FBQTtRQUNELEdBQUcsQ0FBQyxxQkFBcUIsRUFBQyxXQUFXLENBQUMsQ0FBQztJQUMzQyxDQUFDLEVBVGdCLElBQUksR0FBSixPQUFJLEtBQUosT0FBSSxRQVNwQjtBQUFELENBQUMsRUFUYSxFQUFFLEdBQUYsVUFBRSxLQUFGLFVBQUUsUUFTZiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuaW1wb3J0IEdhbWVTY2VuZSBmcm9tIFwiLi9zY3JpcHQvcnVudGltZS9HYW1lU2NlbmVcIlxyXG4vKlxyXG4qIOa4uOaIj+WIneWni+WMlumFjee9rjtcclxuKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZ3tcclxuICAgIHN0YXRpYyB3aWR0aDpudW1iZXI9NjQwO1xyXG4gICAgc3RhdGljIGhlaWdodDpudW1iZXI9MTEzNjtcclxuICAgIHN0YXRpYyBzY2FsZU1vZGU6c3RyaW5nPVwiZml4ZWR3aWR0aFwiO1xyXG4gICAgc3RhdGljIHNjcmVlbk1vZGU6c3RyaW5nPVwibm9uZVwiO1xyXG4gICAgc3RhdGljIGFsaWduVjpzdHJpbmc9XCJ0b3BcIjtcclxuICAgIHN0YXRpYyBhbGlnbkg6c3RyaW5nPVwibGVmdFwiO1xyXG4gICAgc3RhdGljIHN0YXJ0U2NlbmU6YW55PVwiZ2FtZS9HYW1lU2NlbmUuc2NlbmVcIjtcclxuICAgIHN0YXRpYyBzY2VuZVJvb3Q6c3RyaW5nPVwiXCI7XHJcbiAgICBzdGF0aWMgZGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBzdGF0OmJvb2xlYW49dHJ1ZTtcclxuICAgIHN0YXRpYyBwaHlzaWNzRGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBleHBvcnRTY2VuZVRvSnNvbjpib29sZWFuPXRydWU7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe31cclxuICAgIHN0YXRpYyBpbml0KCl7XHJcbiAgICAgICAgdmFyIHJlZzogRnVuY3Rpb24gPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcbiAgICAgICAgcmVnKFwic2NyaXB0L3J1bnRpbWUvR2FtZVNjZW5lLnRzXCIsR2FtZVNjZW5lKTtcclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLmluaXQoKTsiLCJpbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi9HYW1lQ29uZmlnXCI7XHJcbmNsYXNzIE1haW4ge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0Ly/moLnmja5JREXorr7nva7liJ3lp4vljJblvJXmk45cdFx0XHJcblx0XHRpZiAod2luZG93W1wiTGF5YTNEXCJdKSBMYXlhM0QuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCk7XHJcblx0XHRlbHNlIExheWEuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCwgTGF5YVtcIldlYkdMXCJdKTtcclxuXHRcdExheWFbXCJQaHlzaWNzXCJdICYmIExheWFbXCJQaHlzaWNzXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YVtcIkRlYnVnUGFuZWxcIl0gJiYgTGF5YVtcIkRlYnVnUGFuZWxcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhLnN0YWdlLnNjYWxlTW9kZSA9IEdhbWVDb25maWcuc2NhbGVNb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5zY3JlZW5Nb2RlID0gR2FtZUNvbmZpZy5zY3JlZW5Nb2RlO1xyXG5cdFx0Ly/lhbzlrrnlvq7kv6HkuI3mlK/mjIHliqDovb1zY2VuZeWQjue8gOWcuuaZr1xyXG5cdFx0TGF5YS5VUkwuZXhwb3J0U2NlbmVUb0pzb24gPSBHYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uO1xyXG5cclxuXHRcdC8v5omT5byA6LCD6K+V6Z2i5p2/77yI6YCa6L+HSURF6K6+572u6LCD6K+V5qih5byP77yM5oiW6ICFdXJs5Zyw5Z2A5aKe5YqgZGVidWc9dHJ1ZeWPguaVsO+8jOWdh+WPr+aJk+W8gOiwg+ivlemdouadv++8iVxyXG5cdFx0aWYgKEdhbWVDb25maWcuZGVidWcgfHwgTGF5YS5VdGlscy5nZXRRdWVyeVN0cmluZyhcImRlYnVnXCIpID09IFwidHJ1ZVwiKSBMYXlhLmVuYWJsZURlYnVnUGFuZWwoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyAmJiBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXSkgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0uZW5hYmxlKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5zdGF0KSBMYXlhLlN0YXQuc2hvdygpO1xyXG5cdFx0TGF5YS5hbGVydEdsb2JhbEVycm9yID0gdHJ1ZTtcclxuXHJcblx0XHQvL+a/gOa0u+i1hOa6kOeJiOacrOaOp+WItu+8jHZlcnNpb24uanNvbueUsUlEReWPkeW4g+WKn+iDveiHquWKqOeUn+aIkO+8jOWmguaenOayoeacieS5n+S4jeW9seWTjeWQjue7rea1geeoi1xyXG5cdFx0TGF5YS5SZXNvdXJjZVZlcnNpb24uZW5hYmxlKFwidmVyc2lvbi5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vblZlcnNpb25Mb2FkZWQpLCBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OKTtcclxuXHR9XHJcblxyXG5cdG9uVmVyc2lvbkxvYWRlZCgpOiB2b2lkIHtcclxuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcblx0XHRMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG5cdH1cclxuXHJcblx0b25Db25maWdMb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0R2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xyXG5cdH1cclxufVxyXG4vL+a/gOa0u+WQr+WKqOexu1xyXG5uZXcgTWFpbigpO1xyXG4iLCIvKiogdmVyc2lvbiAqL1xyXG5leHBvcnQgY29uc3QgVkVSU0lPTiA9IFwiMS4wLjBcIjtcclxuXHJcbi8qKiBwYWdlcyAqL1xyXG5leHBvcnQgY29uc3QgVVJMX0hvbWVWaWV3OiBzdHJpbmcgPSBcImhvbWUvSG9tZVZpZXcuc2NlbmVcIjtcclxuZXhwb3J0IGNvbnN0IFVSTF9HYW1lU2NlbmU6IHN0cmluZyA9IFwiZ2FtZS9HYW1lU2NlbmUuc2NlbmVcIjtcclxuZXhwb3J0IGNvbnN0IFVSTF9PdmVyVmlldzogc3RyaW5nID0gXCJvdmVyL092ZXJWaWV3LnNjZW5lXCI7XHJcbmV4cG9ydCBjb25zdCBVUkxfUmV2aXZlVmlldzogc3RyaW5nID0gXCJkaWFsb2cvUmV2aXZlVmlldy5zY2VuZVwiO1xyXG5cclxuLyoqIGNhbWVyYSAqL1xyXG5leHBvcnQgY29uc3QgQ2FtZXJhSW5pdFBvczogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygwLCAwLjMsIDAuMik7XHJcbmV4cG9ydCBjb25zdCBDYW1lcmFJbml0Um90RXVsZXI6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgMCwgMCk7XHJcblxyXG4vKiogZGlyZWN0aW9uYWwgbGlnaHQgKi9cclxuZXhwb3J0IGNvbnN0IExpZ2h0SW5pdFBvczogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygwLCA1LCAwKTtcclxuZXhwb3J0IGNvbnN0IExpZ2h0SW5pdFJvdEV1bGVyOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKC0zMCwgMCwgMCk7XHJcbmV4cG9ydCBjb25zdCBMaWdodEluaXRDb2xvcjogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygxLCAxLCAxKTtcclxuXHJcbi8qKiBnYW1lIHN0YWdlICovXHJcbmV4cG9ydCBjb25zdCBTdGFnZVJlc1VybDogc3RyaW5nID0gXCJyZXMvc3RhZ2Uvb3V0L1wiO1xyXG5leHBvcnQgY29uc3QgU3RhZ2VJbml0UG9zOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIDApO1xyXG5leHBvcnQgY29uc3QgU3RhZ2VJbml0Um90OiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIDE4MCwgMCk7XHJcbmV4cG9ydCBjb25zdCBTdGFnZUluaXRTY2FsZTogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygyMCwgMjAsIDIwKTtcclxuZXhwb3J0IGNvbnN0IFN0YWdlTnVtOiBudW1iZXIgPSAzMDtcclxuLy8gd2lubmluZyBjaGVjayBmcmFtZVxyXG5leHBvcnQgY29uc3QgTWF4V2luQ2hlY2tUaW1lOiBudW1iZXIgPSA5MDtcclxuLy8g5bGP6JS954mp5L2T54mp55CG5Y+X5Yqb5YmN562J5b6F5pe26Ze0XHJcbmV4cG9ydCBjb25zdCBTZXRLaW5lbWF0aWNXYWl0VGltZTogbnVtYmVyID0gMTA7XHJcblxyXG4vKiogYmFja2dyb3VuZCAqL1xyXG5leHBvcnQgY29uc3QgQmdSZXNVcmw6IHN0cmluZ1tdID0gW1xyXG4gICAgXCJyZXMvc2NlbmUvU2NlbmVzXzAyLmxoXCIsXHJcbiAgICBcInJlcy9zY2VuZS9TY2VuZXNfMDQubGhcIixcclxuICAgIFwicmVzL3NjZW5lL1NjZW5lc18wNy5saFwiLFxyXG5dXHJcblxyXG4vKiogY3ViZSAqL1xyXG5leHBvcnQgY29uc3QgZW51bSBUYXJnZXRUeXBlIHtcclxuICAgIERFRkFVTFQgPSAwLFxyXG4gICAgR0xBU1MgPSAxLFxyXG4gICAgVE5UID0gMlxyXG59XHJcblxyXG4vKiogZ2xhc3MgKi9cclxuZXhwb3J0IGNvbnN0IEdsYXNzQnJva2VuVmVsb2NpdHk6IG51bWJlciA9IDIuNTtcclxuXHJcbi8qKiBvYnN0YWNsZSBwaWVjZSAqL1xyXG5leHBvcnQgY29uc3QgUGllY2VSZXNVcmw6IHN0cmluZyA9IFwicmVzL2N1YmVfcGllY2UubG1cIjtcclxuZXhwb3J0IGNvbnN0IFBpZWNlc051bTogbnVtYmVyID0gMztcclxuZXhwb3J0IGNvbnN0IFBpZWNlc0Jyb2tlblRpbWU6IG51bWJlciA9IDEyMDtcclxuXHJcbi8qKiBidWxsZXQgKi9cclxuZXhwb3J0IGNvbnN0IEJ1bGxldFJlc1VybDogc3RyaW5nID0gXCJyZXMvYnVsbGV0LmxoXCI7XHJcbmV4cG9ydCBjb25zdCBCdWxsZXRJbml0UG9zOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIC0xKTtcclxuZXhwb3J0IGNvbnN0IEJ1bGxldEluaXRSb3Q6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoMTgwLCAwLCAwKTtcclxuLy8gdHlwZVxyXG5leHBvcnQgY29uc3QgZW51bSBCdWxsZXRUeXBlIHtcclxuICAgIERFRkFVTFQgPSAwLFxyXG4gICAgRlJPWkVOID0gMSxcclxufVxyXG4vLyBpbml0IHJhZGl1c1xyXG5leHBvcnQgY29uc3QgQnVsbGV0UmFkaXVzOiBudW1iZXIgPSAwLjA4O1xyXG4vLyBzY2FsZVxyXG5leHBvcnQgY29uc3QgQnVsbGV0U2NhbGUgPSBbXHJcbiAgICAxLCAgICAgIC8vIERFRkFVTFRcclxuICAgIDEuMiwgICAgLy8gRlJPWkVOXHJcbl07XHJcbi8vIG1hc3NcclxuZXhwb3J0IGNvbnN0IEJ1bGxldE1hc3MgPSBbXHJcbiAgICAxMCwgICAgIC8vIERFRkFVTFRcclxuICAgIDEwLCAgICAgLy8gRlJPWkVOXHJcbl07XHJcbi8vIHZlbG9jaXR5XHJcbmV4cG9ydCBjb25zdCBCdWxsZXRWZWxvY2l0eSA9IFtcclxuICAgIDQwLCAgICAgLy8gREVGQVVMVFxyXG4gICAgNDAsICAgICAvLyBGUk9aRU5cclxuXTtcclxuXHJcbi8qKiBwbGF5ZXIgKi9cclxuZXhwb3J0IGNvbnN0IFBsYXllclJlc1VybDogc3RyaW5nID0gXCJyZXMvaHVtYW4ubGhcIjtcclxuZXhwb3J0IGNvbnN0IFBsYXllckluaXRQb3M6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgLTAuMSwgLTAuNSk7XHJcbmV4cG9ydCBjb25zdCBQbGF5ZXJJbml0Um90OiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKDkwLCAxNjgsIDApO1xyXG5leHBvcnQgY29uc3QgUGxheWVySW5pdFNjYWxlOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKDE1LCAxNSwgMTUpO1xyXG5leHBvcnQgY29uc3QgUGxheWVyU2hvb3RMaWZlVGltZTogbnVtYmVyID0gMTA7XHJcbiIsImltcG9ydCBHYW1lU2NlbmUgZnJvbSBcIi4uL3J1bnRpbWUvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCAqIGFzIENvbnN0IGZyb20gXCIuLi9Db25zdFwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdWxsZXRTY3JpcHQgZXh0ZW5kcyBMYXlhLlNjcmlwdDNEIHtcclxuICAgIHByaXZhdGUgYnVsbGV0OiBMYXlhLk1lc2hTcHJpdGUzRDtcclxuICAgIHByaXZhdGUgcmlnaWRib2R5OiBMYXlhLlJpZ2lkYm9keTNEO1xyXG5cclxuICAgIHB1YmxpYyB0eXBlOiBudW1iZXIgPSBDb25zdC5CdWxsZXRUeXBlLkRFRkFVTFQ7XHJcblxyXG4gICAgcHJpdmF0ZSBsaWZldGltZTogbnVtYmVyID0gMTIwO1xyXG5cclxuICAgIHByaXZhdGUgY29sbGlzaW9uQmxhY2tMaXN0OiBzdHJpbmdbXSA9IFtcImJ1bGxldFwiLCBcInBsYXllclwiXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQXdha2UoKSB7XHJcbiAgICAgICAgdGhpcy5idWxsZXQgPSB0aGlzLm93bmVyIGFzIExheWEuTWVzaFNwcml0ZTNEO1xyXG4gICAgICAgIHRoaXMucmlnaWRib2R5ID0gdGhpcy5idWxsZXQuZ2V0Q29tcG9uZW50KExheWEuUmlnaWRib2R5M0QpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlKCkge1xyXG4gICAgICAgIC8vIGNoZWNrIHNwaXJ0ZSBhbGl2ZVxyXG4gICAgICAgIGlmICh0aGlzLmJ1bGxldC5kZXN0cm95ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBsaWZldGltZVxyXG4gICAgICAgIHRoaXMubGlmZXRpbWUtLTtcclxuICAgICAgICBpZiAodGhpcy5saWZldGltZSA8IDApIHtcclxuICAgICAgICAgICAgTGF5YS50aW1lci5mcmFtZU9uY2UoMSwgdGhpcywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGNvdW50ZXJcclxuICAgICAgICAgICAgICAgIEdhbWVTY2VuZS5pbnN0YW5jZS5jdXJyQnVsbGV0TnVtKys7XHJcbiAgICAgICAgICAgICAgICAvLyBkZXN0cm95XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1bGxldC5yZW1vdmVTZWxmKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBzZXQgbWF0ZXJpYWwgYnkgdHlwZSAqL1xyXG4gICAgc2V0VHlwZSh0eXBlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT09IENvbnN0LkJ1bGxldFR5cGUuREVGQVVMVCkge1xyXG4gICAgICAgICAgICBsZXQgbWF0OiBMYXlhLlBCUlNwZWN1bGFyTWF0ZXJpYWwgPSBuZXcgTGF5YS5QQlJTcGVjdWxhck1hdGVyaWFsKCk7XHJcbiAgICAgICAgICAgIG1hdC5yZW5kZXJNb2RlID0gTGF5YS5QQlJTcGVjdWxhck1hdGVyaWFsLlJFTkRFUk1PREVfVFJBTlNQQVJFTlQ7XHJcbiAgICAgICAgICAgIG1hdC5hbGJlZG9Db2xvciA9IG5ldyBMYXlhLlZlY3RvcjQoMSwgMC43LCAxLCAwLjcpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1bGxldC5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgPSBtYXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gQ29uc3QuQnVsbGV0VHlwZS5GUk9aRU4pIHtcclxuICAgICAgICAgICAgbGV0IG1hdDogTGF5YS5QQlJTcGVjdWxhck1hdGVyaWFsID0gbmV3IExheWEuUEJSU3BlY3VsYXJNYXRlcmlhbCgpO1xyXG4gICAgICAgICAgICBtYXQucmVuZGVyTW9kZSA9IExheWEuUEJSU3BlY3VsYXJNYXRlcmlhbC5SRU5ERVJNT0RFX1RSQU5TUEFSRU5UO1xyXG4gICAgICAgICAgICBtYXQuYWxiZWRvQ29sb3IgPSBuZXcgTGF5YS5WZWN0b3I0KDAuMiwgMC4yLCAxLCAwLjcpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1bGxldC5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgPSBtYXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIG9uQ29sbGlzaW9uRW50ZXIoY29sbGlzaW9uOiBMYXlhLkNvbGxpc2lvbikge1xyXG4gICAgLy8gfVxyXG59IiwiaW1wb3J0ICogYXMgQ29uc3QgZnJvbSBcIi4uL0NvbnN0XCI7XHJcbmltcG9ydCBHYW1lU2NlbmUgZnJvbSBcIi4uL3J1bnRpbWUvR2FtZVNjZW5lXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHdWFyZCBleHRlbmRzIExheWEuU2NyaXB0M0Qge1xyXG4gICAgcHJpdmF0ZSBndWFyZDogTGF5YS5NZXNoU3ByaXRlM0Q7XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0UG9zOiBMYXlhLlZlY3RvcjM7XHJcblxyXG4gICAgcHJpdmF0ZSBzaXplWDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzaXplWTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzaXplWjogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgTWF4TW92ZVRpbWVzOiBudW1iZXIgPSA2MDtcclxuICAgIHByaXZhdGUgbW92ZVRpbWVzOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Bd2FrZSgpIHtcclxuICAgICAgICAvLyBnZXQgc3ByaXRlXHJcbiAgICAgICAgdGhpcy5ndWFyZCA9IHRoaXMub3duZXIgYXMgTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICAgICAgLy8gZ2V0IHNpemVcclxuICAgICAgICBsZXQgYm91bmRpbmdCb3g6IExheWEuQm91bmRCb3ggPSB0aGlzLmd1YXJkLm1lc2hGaWx0ZXIuc2hhcmVkTWVzaC5ib3VuZGluZ0JveC5jbG9uZSgpO1xyXG4gICAgICAgIHRoaXMuc2l6ZVggPSBib3VuZGluZ0JveC5tYXgueCAtIGJvdW5kaW5nQm94Lm1pbi54O1xyXG4gICAgICAgIHRoaXMuc2l6ZVkgPSBib3VuZGluZ0JveC5tYXgueSAtIGJvdW5kaW5nQm94Lm1pbi55O1xyXG4gICAgICAgIHRoaXMuc2l6ZVogPSBib3VuZGluZ0JveC5tYXgueiAtIGJvdW5kaW5nQm94Lm1pbi56O1xyXG4gICAgICAgIC8vIGFkZCBjb2xsaWRlclxyXG4gICAgICAgIGxldCBjb2xsaWRlcjogTGF5YS5QaHlzaWNzQ29sbGlkZXIgPSB0aGlzLmd1YXJkLmFkZENvbXBvbmVudChMYXlhLlBoeXNpY3NDb2xsaWRlcik7XHJcbiAgICAgICAgY29sbGlkZXIuY29sbGlkZXJTaGFwZSA9IG5ldyBMYXlhLkJveENvbGxpZGVyU2hhcGUodGhpcy5zaXplWCwgdGhpcy5zaXplWSwgdGhpcy5zaXplWik7XHJcbiAgICAgICAgLy8gcmVjb3JkIGluaXQgcG9zXHJcbiAgICAgICAgdGhpcy5pbml0UG9zID0gdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbi5jbG9uZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlKCkge1xyXG4gICAgICAgIC8vIGNoZWNrIHNwaXJ0ZSBhbGl2ZVxyXG4gICAgICAgIGlmICh0aGlzLmd1YXJkLmRlc3Ryb3llZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqIOW5s+enuyAqL1xyXG4gICAgICAgIHRoaXMubW92ZVRpbWVzID0gKHRoaXMubW92ZVRpbWVzICsgMSkgJSAodGhpcy5NYXhNb3ZlVGltZXMgKiAyKTtcclxuICAgICAgICAvLyDkvY3np7vmlrnlkJHmoIflv5dcclxuICAgICAgICB2YXIgZmxhZyA9IE1hdGguZmxvb3IoKHRoaXMubW92ZVRpbWVzIC8gdGhpcy5NYXhNb3ZlVGltZXMpICUgMik7XHJcbiAgICAgICAgLy8gWOWSjFnmlrnlkJHlubPnp7vmraXov5tcclxuICAgICAgICB2YXIgbW92ZVN0ZXBYOiBudW1iZXIgPSB0aGlzLnNpemVYICogdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxTY2FsZVggLyAyIC8gdGhpcy5NYXhNb3ZlVGltZXM7XHJcbiAgICAgICAgdmFyIG1vdmVTdGVwWTogbnVtYmVyID0gdGhpcy5zaXplWSAqIHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsU2NhbGVZIC8gMiAvIHRoaXMuTWF4TW92ZVRpbWVzO1xyXG4gICAgICAgIC8vIFrovbTml4vovaw5MO+8jFjlkoxZ5LqS5o2iXHJcbiAgICAgICAgaWYgKE1hdGguZmxvb3IoKE1hdGguYWJzKHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclopICsgOTAuNSkgJSAxODApID09PSAwKSB7XHJcbiAgICAgICAgICAgIGxldCB0bXAgPSBtb3ZlU3RlcFg7XHJcbiAgICAgICAgICAgIG1vdmVTdGVwWCA9IG1vdmVTdGVwWTtcclxuICAgICAgICAgICAgbW92ZVN0ZXBZID0gdG1wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyDlhajlsY/msLTlubPnp7vliqhcclxuICAgICAgICBpZiAodGhpcy5ndWFyZC5uYW1lLnNlYXJjaChcIm1vdmVfeFwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuTWF4TW92ZVRpbWVzID0gMTIwO1xyXG4gICAgICAgICAgICBtb3ZlU3RlcFggPSB0aGlzLmluaXRQb3MueCAqIDIgLyB0aGlzLk1heE1vdmVUaW1lcztcclxuICAgICAgICAgICAgZmxhZyA9IE1hdGguZmxvb3IoKHRoaXMubW92ZVRpbWVzIC8gdGhpcy5NYXhNb3ZlVGltZXMpICUgMik7XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7IHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25YICs9IG1vdmVTdGVwWDsgfVxyXG4gICAgICAgICAgICBlbHNlIHsgdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblggLT0gbW92ZVN0ZXBYOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWFqOWxj+e6teWQkeenu+WKqFxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ3VhcmQubmFtZS5zZWFyY2goXCJtb3ZlX3lcIikgPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLk1heE1vdmVUaW1lcyA9IDEyMDtcclxuICAgICAgICAgICAgbW92ZVN0ZXBZID0gdGhpcy5pbml0UG9zLnkgKiAyIC8gdGhpcy5NYXhNb3ZlVGltZXM7XHJcbiAgICAgICAgICAgIGZsYWcgPSBNYXRoLmZsb29yKCh0aGlzLm1vdmVUaW1lcyAvIHRoaXMuTWF4TW92ZVRpbWVzKSAlIDIpO1xyXG4gICAgICAgICAgICBpZiAoZmxhZykgeyB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWSArPSBtb3ZlU3RlcFk7IH1cclxuICAgICAgICAgICAgZWxzZSB7IHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25ZIC09IG1vdmVTdGVwWTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDljYrlsY/np7vliqhcclxuICAgICAgICBlbHNlIGlmICh0aGlzLmd1YXJkLm5hbWUuc2VhcmNoKFwibW92ZV9sZWZ0XCIpID49IDApIHtcclxuICAgICAgICAgICAgaWYgKGZsYWcpIHsgdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblggLT0gbW92ZVN0ZXBYOyB9XHJcbiAgICAgICAgICAgIGVsc2UgeyB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWCArPSBtb3ZlU3RlcFg7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5ndWFyZC5uYW1lLnNlYXJjaChcIm1vdmVfcmlnaHRcIikgPj0gMCkge1xyXG4gICAgICAgICAgICBpZiAoZmxhZykgeyB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWCArPSBtb3ZlU3RlcFg7IH1cclxuICAgICAgICAgICAgZWxzZSB7IHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25YIC09IG1vdmVTdGVwWDsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmd1YXJkLm5hbWUuc2VhcmNoKFwibW92ZV91cFwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7IHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25ZIC09IG1vdmVTdGVwWTsgfVxyXG4gICAgICAgICAgICBlbHNlIHsgdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblkgKz0gbW92ZVN0ZXBZOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ3VhcmQubmFtZS5zZWFyY2goXCJtb3ZlX2Rvd25cIikgPj0gMCkge1xyXG4gICAgICAgICAgICBpZiAoZmxhZykgeyB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWSArPSBtb3ZlU3RlcFk7IH1cclxuICAgICAgICAgICAgZWxzZSB7IHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25ZIC09IG1vdmVTdGVwWTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqIOaXi+i9rCAqL1xyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ3VhcmQubmFtZS5zZWFyY2goXCJyb3RhdGVfbGVmdFwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclkgPSAodGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWSArIDEpICUgMzYwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmd1YXJkLm5hbWUuc2VhcmNoKFwicm90YXRlX3JpZ2h0XCIpID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWSA9ICh0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJZIC0gMSkgJSAzNjA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ3VhcmQubmFtZS5zZWFyY2goXCJyb3RhdGVfdXBcIikgPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJYID0gKHRoaXMuZ3VhcmQudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclggKyAxKSAlIDM2MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5ndWFyZC5uYW1lLnNlYXJjaChcInJvdGF0ZV9kb3duXCIpID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy5ndWFyZC50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWCA9ICh0aGlzLmd1YXJkLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJYIC0gMSkgJSAzNjA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0ICogYXMgQ29uc3QgZnJvbSBcIi4uL0NvbnN0XCI7XHJcbmltcG9ydCBHYW1lU2NlbmUgZnJvbSBcIi4uL3J1bnRpbWUvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCBCdWxsZXQgZnJvbSBcIi4uL2NvbXBvbmVudC9CdWxsZXRcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFyZ2V0IGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XHJcbiAgICBwcml2YXRlIHRhcmdldDogTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICBwcml2YXRlIHJpZ2lkYm9keTogTGF5YS5SaWdpZGJvZHkzRDtcclxuXHJcbiAgICBwcml2YXRlIHR5cGU6IG51bWJlciA9IENvbnN0LlRhcmdldFR5cGUuREVGQVVMVDtcclxuXHJcbiAgICBwcml2YXRlIHNpemVYOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHNpemVZOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHNpemVaOiBudW1iZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBjb2xsaXNpb25CbGFja0xpc3Q6IHN0cmluZ1tdID0gW1wic3RhbmRcIiwgXCJHdWFyZFwiXTtcclxuXHJcbiAgICAvKiogdGFyZ2V0IG9iamVjdCBwaWVjZXMgKi9cclxuICAgIHByaXZhdGUgcGllY2VzTGlzdDogTGF5YS5NZXNoU3ByaXRlM0RbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Bd2FrZSgpIHtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMub3duZXIgYXMgTGF5YS5NZXNoU3ByaXRlM0Q7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0UmlnaWRib2R5KCk7XHJcbiAgICAgICAgLy8g5bu25ZCO5Yeg5bin5bGP6JS954mp55CG5Y+X5Yqb77yM5Lul562J5b6F54mp5L2T5o6J6JC95pS+572uXHJcbiAgICAgICAgTGF5YS50aW1lci5mcmFtZU9uY2UoQ29uc3QuU2V0S2luZW1hdGljV2FpdFRpbWUsIHRoaXMsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFHYW1lU2NlbmUuaW5zdGFuY2UuaXNTdGFnZVN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2lkYm9keS5pc0tpbmVtYXRpYyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0UGllY2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2xsaXNpb25FbnRlcihjb2xsaXNpb246IExheWEuQ29sbGlzaW9uKTogdm9pZCB7XHJcbiAgICAgICAgLy8gLy8gcmVzZXQgd2luIGNoZWNrIGNvdW50ZXJcclxuICAgICAgICAvLyBpZiAoY29sbGlzaW9uLm90aGVyLm93bmVyLm5hbWUgPT09IFwic3RhbmRcIikge1xyXG4gICAgICAgIC8vICAgICBHYW1lU2NlbmUuaW5zdGFuY2Uud2luQ2hlY2tDbnQgPSAwO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgbGV0IG90aGVyOiBMYXlhLk1lc2hTcHJpdGUzRCA9IGNvbGxpc2lvbi5vdGhlci5vd25lciBhcyBMYXlhLk1lc2hTcHJpdGUzRDtcclxuXHJcbiAgICAgICAgLy8g5a2Q5by55pWI5p6c5aSE55CGXHJcbiAgICAgICAgaWYgKG90aGVyLm5hbWUgPT09IFwiYnVsbGV0XCIpIHtcclxuICAgICAgICAgICAgbGV0IGJ1bGxldDogQnVsbGV0ID0gb3RoZXIuZ2V0Q29tcG9uZW50KEJ1bGxldCk7XHJcbiAgICAgICAgICAgIGlmIChidWxsZXQudHlwZSA9PT0gQ29uc3QuQnVsbGV0VHlwZS5ERUZBVUxUKSB7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGJ1bGxldC50eXBlID09PSBDb25zdC5CdWxsZXRUeXBlLkZST1pFTikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUeXBlKENvbnN0LlRhcmdldFR5cGUuR0xBU1MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDmnKzkvZPlj5flh7vmiZPlpITnkIZcclxuICAgICAgICBpZiAodGhpcy50eXBlID09PSBDb25zdC5UYXJnZXRUeXBlLkdMQVNTKSB7XHJcbiAgICAgICAgICAgIC8vIOebuOWvuemAn+W6pumrmOWPr+WHu+eijlxyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHk6IExheWEuVmVjdG9yMyA9IHRoaXMucmlnaWRib2R5LmxpbmVhclZlbG9jaXR5LmNsb25lKCk7XHJcbiAgICAgICAgICAgIGxldCB2ZWxvY2l0eU90aGVyOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgICAgICAgICAvLyBub3QgcGxheWZvcm1cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sbGlzaW9uQmxhY2tMaXN0LmluZGV4T2Yob3RoZXIubmFtZSkgPCAwICYmIG90aGVyLm5hbWUuaW5kZXhPZihcIkd1YXJkXCIpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlPdGhlciA9IChvdGhlci5nZXRDb21wb25lbnQoTGF5YS5SaWdpZGJvZHkzRCkgYXMgTGF5YS5SaWdpZGJvZHkzRCkubGluZWFyVmVsb2NpdHkuY2xvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHlWYWx1ZTogbnVtYmVyID0gTGF5YS5WZWN0b3IzLmRpc3RhbmNlKHZlbG9jaXR5LCB2ZWxvY2l0eU90aGVyKTtcclxuICAgICAgICAgICAgaWYgKHZlbG9jaXR5VmFsdWUgPj0gQ29uc3QuR2xhc3NCcm9rZW5WZWxvY2l0eSkge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5pc0hpdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJyb2tlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ29sbGlzaW9uU3RheShjb2xsaXNpb246IExheWEuQ29sbGlzaW9uKTogdm9pZCB7XHJcbiAgICAgICAgLy8gLy8gcmVzZXQgd2luIGNoZWNrIGNvdW50ZXJcclxuICAgICAgICAvLyBpZiAoY29sbGlzaW9uLm90aGVyLm93bmVyLm5hbWUgPT09IFwic3RhbmRcIikge1xyXG4gICAgICAgIC8vICAgICBHYW1lU2NlbmUuaW5zdGFuY2Uud2luQ2hlY2tDbnQgPSAwO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBcclxuICAgICAgICBsZXQgb3RoZXI6IExheWEuTWVzaFNwcml0ZTNEID0gY29sbGlzaW9uLm90aGVyLm93bmVyIGFzIExheWEuTWVzaFNwcml0ZTNEO1xyXG5cclxuICAgICAgICAvLyDlrZDlvLnmlYjmnpzlpITnkIZcclxuICAgICAgICBpZiAob3RoZXIubmFtZSA9PT0gXCJidWxsZXRcIikge1xyXG4gICAgICAgICAgICBsZXQgYnVsbGV0OiBCdWxsZXQgPSBvdGhlci5nZXRDb21wb25lbnQoQnVsbGV0KTtcclxuICAgICAgICAgICAgaWYgKGJ1bGxldC50eXBlID09PSBDb25zdC5CdWxsZXRUeXBlLkRFRkFVTFQpIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoYnVsbGV0LnR5cGUgPT09IENvbnN0LkJ1bGxldFR5cGUuRlJPWkVOKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFR5cGUoQ29uc3QuVGFyZ2V0VHlwZS5HTEFTUyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gb25Db2xsaXNpb25FeGl0KGNvbGxpc2lvbjogTGF5YS5Db2xsaXNpb24pOiB2b2lkIHtcclxuICAgIC8vICAgICAvLyByZXNldCB3aW4gY2hlY2sgY291bnRlclxyXG4gICAgLy8gICAgIGlmIChjb2xsaXNpb24ub3RoZXIub3duZXIubmFtZSA9PT0gXCJzdGFuZFwiKSB7XHJcbiAgICAvLyAgICAgICAgIEdhbWVTY2VuZS5pbnN0YW5jZS53aW5DaGVja0NudCA9IDA7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfVxyXG5cclxuICAgIG9uVXBkYXRlKCkge1xyXG4gICAgICAgIC8vIGNoZWNrIHNwaXJ0ZSBhbGl2ZVxyXG4gICAgICAgIGlmICh0aGlzLnRhcmdldC5kZXN0cm95ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHN0YWdlIHN0YXJ0XHJcbiAgICAgICAgaWYgKHRoaXMucmlnaWRib2R5LmlzS2luZW1hdGljICYmIEdhbWVTY2VuZS5pbnN0YW5jZS5pc1N0YWdlU3RhcnQpIHtcclxuICAgICAgICAgICAgdGhpcy5yaWdpZGJvZHkuaXNLaW5lbWF0aWMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKiB3aW4gY2hlY2tcclxuICAgICAgICAgKiAg5byV5pOOYnVn77ya54mp5L2T5p625Zyo5Lik5Liq5bmz5Y+w5aS557yd5LiK5pe277yM5LiN6Kem5Y+Rb25Db2xsaXNpb25TdGF5LFxyXG4gICAgICAgICAqICDmlYXlrozlloTlhbPljaHog5zliKnliKTmlq3vvIzmoLnmja7niankvZPkuI7lhbPljaHmqKHlnovkuK3lv4Pot53nprvliKTlrprmmK/lkKbmjonlh7rlubPlj7BcclxuICAgICAgICAgKiAgcHPvvJrniannkIblvJXmk45idWfovoPlpJrvvIzlj6/ku6XmnaXlvJXmk47lkYjnjrDniannkIblro/op4LmlYjmnpzvvIzkvYblsL3ph4/lsJHkvp3otZbnorDmkp7lgZrpnIDopoHnqLPlrprnmoTlupXlsYLlpITnkIZcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgZGlzdDogbnVtYmVyID0gTGF5YS5WZWN0b3IzLmRpc3RhbmNlKHRoaXMudGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiwgR2FtZVNjZW5lLmluc3RhbmNlLmdhbWVTdGFnZS50cmFuc2Zvcm0ucG9zaXRpb24pO1xyXG4gICAgICAgIGlmIChkaXN0IDwgMjApIHtcclxuICAgICAgICAgICAgLy8gcmVzZXQgd2luIGNoZWNrIGNvdW50ZXJcclxuICAgICAgICAgICAgR2FtZVNjZW5lLmluc3RhbmNlLndpbkNoZWNrQ250ID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKiBwaHlzaWNzIGVuZ2luZSBidWcgZGV0ZWN0aW5nIGFuZCBmaXhpbmdcclxuICAgICAgICAgKiAg5byV5pOOYnVn77ya5ae/5oCB56iz5a6a5oOF5Ya15LiL77yM5p+Q5Liq54mp5L2T5L2c55So5Yqb5pa55ZCR77yI5aaC6YeN5Yqb5pe255qE5bqV5LiL77yJ55qE56Kw5pKe54mp5L2T5b+r6YCf5raI5aSx77yMXHJcbiAgICAgICAgICogIOiAjOatpOi/h+eoi+S4reebuOS6kuS9nOeUqOW9seWTjei/h+Wwj+WvvOiHtOiHqui6q+Wnv+aAgeayoeacieWPmOWMluaXtu+8jOW8leaTjuS8muiHquWKqOWwhuivpeeJqeS9k+eahOWImuS9k+mdnua/gOa0u++8jOS7juiAjOWvvOiHtOiFvuepuueOsOixoe+8jFxyXG4gICAgICAgICAqICDlop7lpKfniankvZPpl7Tnm7jkupLkvZznlKjlipvvvIjlpoLmkanmk6bns7vmlbDvvInlj6/lh4/lsJHor6Xmg4XlhrXlj5HnlJ/vvIzkvYbkuI3og73mnZznu53vvIxcclxuICAgICAgICAgKiAg5pWF5Zyo5q2k5qOA5rWL6K+l5oOF5Ya15bm25a+55Yia5L2T6ZSA5q+B6YeN5bu6XHJcbiAgICAgICAgICogKi9cclxuICAgICAgICBpZiAodGhpcy5yaWdpZGJvZHkgJiYgdGhpcy5yaWdpZGJvZHkuaXNBY3RpdmUgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUmlnaWRib2R5KCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGh5c2ljc19lbmdpbmVfYnVnX2ZpeGluZzogUmVzZXQgcmlnaWRib2R5LlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIGRlc3Ryb3kgYW5kIHJlY3JlYXRlIHJpZ2lkYm9keSAqL1xyXG4gICAgcHJpdmF0ZSByZWZyZXNoUmlnaWRib2R5KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJpZ2lkYm9keSkge1xyXG4gICAgICAgICAgICB0aGlzLnJpZ2lkYm9keS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UmlnaWRib2R5KCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVmcmVzaCByaWdpZGJvZHlcIilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHNldCBtYXRlcmlhbCBieSB0eXBlICovXHJcbiAgICBzZXRUeXBlKHR5cGU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gQ29uc3QuVGFyZ2V0VHlwZS5HTEFTUykge1xyXG4gICAgICAgICAgICBsZXQgbWF0OiBMYXlhLlBCUlNwZWN1bGFyTWF0ZXJpYWwgPSB0aGlzLnRhcmdldC5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgYXMgTGF5YS5QQlJTcGVjdWxhck1hdGVyaWFsO1xyXG4gICAgICAgICAgICBtYXQucmVuZGVyTW9kZSA9IExheWEuUEJSU3BlY3VsYXJNYXRlcmlhbC5SRU5ERVJNT0RFX1RSQU5TUEFSRU5UO1xyXG4gICAgICAgICAgICBtYXQuYWxiZWRvVGV4dHVyZSA9IG51bGw7XHJcbiAgICAgICAgICAgIG1hdC5hbGJlZG9Db2xvciA9IG5ldyBMYXlhLlZlY3RvcjQoMC43LCAwLjcsIDEsIDAuNyk7XHJcbiAgICAgICAgICAgIG1hdC5zcGVjdWxhckNvbG9yID0gbmV3IExheWEuVmVjdG9yNCgwLCAwLCAwLCAxKTtcclxuICAgICAgICAgICAgbWF0LmVuYWJsZUVtaXNzaW9uID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHNldCByaWdpZGJvZHkgKi9cclxuICAgIHByaXZhdGUgc2V0UmlnaWRib2R5KCkge1xyXG4gICAgICAgIC8vIGdldCBzaXplIG9mIGJvdW5kaW5nIGJveFxyXG4gICAgICAgIGxldCBib3VuZGluZ0JveDogTGF5YS5Cb3VuZEJveCA9IHRoaXMudGFyZ2V0Lm1lc2hGaWx0ZXIuc2hhcmVkTWVzaC5ib3VuZGluZ0JveC5jbG9uZSgpO1xyXG4gICAgICAgIHRoaXMuc2l6ZVggPSBib3VuZGluZ0JveC5tYXgueCAtIGJvdW5kaW5nQm94Lm1pbi54O1xyXG4gICAgICAgIHRoaXMuc2l6ZVkgPSBib3VuZGluZ0JveC5tYXgueSAtIGJvdW5kaW5nQm94Lm1pbi55O1xyXG4gICAgICAgIHRoaXMuc2l6ZVogPSBib3VuZGluZ0JveC5tYXgueiAtIGJvdW5kaW5nQm94Lm1pbi56O1xyXG4gICAgICAgIC8vIGFkZCByaWdpZGJvZHlcclxuICAgICAgICB0aGlzLnJpZ2lkYm9keSA9IHRoaXMudGFyZ2V0LmFkZENvbXBvbmVudChMYXlhLlJpZ2lkYm9keTNEKTtcclxuICAgICAgICBpZiAodGhpcy50YXJnZXQubmFtZS5zZWFyY2goXCJDdWJlXCIpID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy5yaWdpZGJvZHkuY29sbGlkZXJTaGFwZSA9IG5ldyBMYXlhLkJveENvbGxpZGVyU2hhcGUodGhpcy5zaXplWCwgdGhpcy5zaXplWSwgdGhpcy5zaXplWik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMudGFyZ2V0Lm5hbWUuc2VhcmNoKFwiQ3lsaW5kZXJcIikgPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnJpZ2lkYm9keS5jb2xsaWRlclNoYXBlID0gbmV3IExheWEuQ3lsaW5kZXJDb2xsaWRlclNoYXBlKHRoaXMuc2l6ZVggLyAyLCB0aGlzLnNpemVZKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBjb2xsaWRlclNoYXBlOiBMYXlhLk1lc2hDb2xsaWRlclNoYXBlID0gbmV3IExheWEuTWVzaENvbGxpZGVyU2hhcGUoKTtcclxuICAgICAgICAgICAgY29sbGlkZXJTaGFwZS5tZXNoID0gdGhpcy50YXJnZXQubWVzaEZpbHRlci5zaGFyZWRNZXNoO1xyXG4gICAgICAgICAgICB0aGlzLnJpZ2lkYm9keS5jb2xsaWRlclNoYXBlID0gY29sbGlkZXJTaGFwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRQaHlzaWNzUGFyYW0oKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogc2V0IHBoeXNpY3MgcGFyYW0gKi9cclxuICAgIHByaXZhdGUgc2V0UGh5c2ljc1BhcmFtKCkge1xyXG4gICAgICAgIHRoaXMucmlnaWRib2R5LmlzS2luZW1hdGljID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gQ29uc3QuVGFyZ2V0VHlwZS5ERUZBVUxUKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmlnaWRib2R5Lm1hc3MgPSAxMDtcclxuICAgICAgICAgICAgdGhpcy5yaWdpZGJvZHkuZnJpY3Rpb24gPSAxMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy50eXBlID09PSBDb25zdC5UYXJnZXRUeXBlLkdMQVNTKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmlnaWRib2R5Lm1hc3MgPSAwLjE7XHJcbiAgICAgICAgICAgIHRoaXMucmlnaWRib2R5LmZyaWN0aW9uID0gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHNldCB0YXJnZXQgYnJva2VuICovXHJcbiAgICBwcml2YXRlIGJyb2tlbigpIHtcclxuICAgICAgICAvLyBwbGF5IGJyb2tlbiBzb3VuZFxyXG5cclxuICAgICAgICAvLyBzaG93IHBpZWNlc1xyXG4gICAgICAgIHRoaXMuZWZmZWN0UGllY2VzQnJva2VuKCk7XHJcbiAgICAgICAgLy8gaGlkZSB0YXJnZXRcclxuICAgICAgICBMYXlhLnRpbWVyLmZyYW1lT25jZSgxLCB0aGlzLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBpbml0IHRhcmdldCBwaWVjZXMgKi9cclxuICAgIHByaXZhdGUgaW5pdFBpZWNlcygpIHtcclxuICAgICAgICBMYXlhLk1lc2gubG9hZChDb25zdC5QaWVjZVJlc1VybCwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCAobWVzaCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcGllY2U6IExheWEuTWVzaFNwcml0ZTNEID0gbmV3IExheWEuTWVzaFNwcml0ZTNEKG1lc2gpO1xyXG5cclxuICAgICAgICAgICAgcGllY2UuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHBpZWNlLm5hbWUgPSBcInBpZWNlXCI7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgbWF0ZXJpYWxcclxuICAgICAgICAgICAgbGV0IG1hdDogTGF5YS5CbGlublBob25nTWF0ZXJpYWwgPSBuZXcgTGF5YS5CbGlublBob25nTWF0ZXJpYWwoKTtcclxuICAgICAgICAgICAgbWF0LnJlbmRlck1vZGUgPSBMYXlhLkJsaW5uUGhvbmdNYXRlcmlhbC5SRU5ERVJNT0RFX1RSQU5TUEFSRU5UO1xyXG4gICAgICAgICAgICBtYXQuYWxiZWRvQ29sb3IgPSBuZXcgTGF5YS5WZWN0b3I0KDAuNywgMC43LCAxLCAwLjcpO1xyXG4gICAgICAgICAgICBwaWVjZS5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgPSBtYXQ7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgcmlnaWRib2R5XHJcbiAgICAgICAgICAgIGxldCBwaWVjZVJpZ2lkOiBMYXlhLlJpZ2lkYm9keTNEID0gcGllY2UuYWRkQ29tcG9uZW50KExheWEuUmlnaWRib2R5M0QpO1xyXG4gICAgICAgICAgICBsZXQgcGllY2VDb2xsaWRlclNoYXBlOiBMYXlhLk1lc2hDb2xsaWRlclNoYXBlID0gbmV3IExheWEuTWVzaENvbGxpZGVyU2hhcGUoKTtcclxuICAgICAgICAgICAgcGllY2VDb2xsaWRlclNoYXBlLm1lc2ggPSBwaWVjZS5tZXNoRmlsdGVyLnNoYXJlZE1lc2g7XHJcbiAgICAgICAgICAgIHBpZWNlUmlnaWQuY29sbGlkZXJTaGFwZSA9IHBpZWNlQ29sbGlkZXJTaGFwZTtcclxuXHJcbiAgICAgICAgICAgIC8vIGFkZCBwaWVjZXMgdG8gc2NlbmVcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBDb25zdC5QaWVjZXNOdW07IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5waWVjZXNMaXN0LnB1c2gocGllY2UuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICBHYW1lU2NlbmUuaW5zdGFuY2Uuc2NlbmUzRC5hZGRDaGlsZCh0aGlzLnBpZWNlc0xpc3RbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBwbGF0eSBlZmZlY3Q6IHRhcmdldCBicm9rZW4gdG8gcGllY2VzICovXHJcbiAgICBwdWJsaWMgZWZmZWN0UGllY2VzQnJva2VuKCkge1xyXG4gICAgICAgIGZvciAobGV0IGlkeCBpbiB0aGlzLnBpZWNlc0xpc3QpIHtcclxuICAgICAgICAgICAgLy8gYWN0aXZlIHBpZWNlc1xyXG4gICAgICAgICAgICB0aGlzLnBpZWNlc0xpc3RbaWR4XS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyBzZXQgc2l6ZSBzY2FsZVxyXG4gICAgICAgICAgICBsZXQgc2NhbGVYOiBudW1iZXIgPSAoTWF0aC5yYW5kb20oKSAqIDAuNSArIDAuNSkgKiAxLjUgKiB0aGlzLnNpemVYICogdGhpcy50YXJnZXQudHJhbnNmb3JtLmxvY2FsU2NhbGVYICogQ29uc3QuU3RhZ2VJbml0U2NhbGUueDtcclxuICAgICAgICAgICAgbGV0IHNjYWxlWTogbnVtYmVyID0gKE1hdGgucmFuZG9tKCkgKiAwLjUgKyAwLjUpICogMS41ICogdGhpcy5zaXplWSAqIHRoaXMudGFyZ2V0LnRyYW5zZm9ybS5sb2NhbFNjYWxlWSAqIENvbnN0LlN0YWdlSW5pdFNjYWxlLnk7XHJcbiAgICAgICAgICAgIGxldCBzY2FsZVo6IG51bWJlciA9IChNYXRoLnJhbmRvbSgpICogMC41ICsgMC41KSAqIDEuNSAqIHRoaXMuc2l6ZVogKiB0aGlzLnRhcmdldC50cmFuc2Zvcm0ubG9jYWxTY2FsZVogKiBDb25zdC5TdGFnZUluaXRTY2FsZS56O1xyXG4gICAgICAgICAgICB0aGlzLnBpZWNlc0xpc3RbaWR4XS50cmFuc2Zvcm0ubG9jYWxTY2FsZSA9IG5ldyBMYXlhLlZlY3RvcjMoc2NhbGVYLCBzY2FsZVksIHNjYWxlWik7XHJcbiAgICAgICAgICAgIC8vIHNldCByb3RcclxuICAgICAgICAgICAgdGhpcy5waWVjZXNMaXN0W2lkeF0udHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclggPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAyICogOTA7XHJcbiAgICAgICAgICAgIHRoaXMucGllY2VzTGlzdFtpZHhdLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJZID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMiAqIDkwO1xyXG4gICAgICAgICAgICB0aGlzLnBpZWNlc0xpc3RbaWR4XS50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWiA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDIgKiA5MDtcclxuICAgICAgICAgICAgLy8gc2V0IHBvc1xyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHk6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoKTtcclxuICAgICAgICAgICAgdmVsb2NpdHkueCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIENvbnN0LlN0YWdlSW5pdFNjYWxlLnggLyA4MDtcclxuICAgICAgICAgICAgdmVsb2NpdHkueSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIENvbnN0LlN0YWdlSW5pdFNjYWxlLnkgLyA4MDtcclxuICAgICAgICAgICAgdmVsb2NpdHkueiA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIENvbnN0LlN0YWdlSW5pdFNjYWxlLnogLyA4MDtcclxuICAgICAgICAgICAgdGhpcy5waWVjZXNMaXN0W2lkeF0udHJhbnNmb3JtLnBvc2l0aW9uID0gdGhpcy50YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uLmNsb25lKCk7XHJcbiAgICAgICAgICAgIExheWEuVmVjdG9yMy5hZGQodGhpcy5waWVjZXNMaXN0W2lkeF0udHJhbnNmb3JtLmxvY2FsUG9zaXRpb24sIHZlbG9jaXR5LCB0aGlzLnBpZWNlc0xpc3RbaWR4XS50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIC8vIHNldCB2ZWxvY2l0eSBvZiBwaWVjZXNcclxuICAgICAgICAgICAgTGF5YS5WZWN0b3IzLnNjYWxlKHZlbG9jaXR5LCA1MCwgdmVsb2NpdHkpO1xyXG4gICAgICAgICAgICAodGhpcy5waWVjZXNMaXN0W2lkeF0uZ2V0Q29tcG9uZW50KExheWEuUmlnaWRib2R5M0QpIGFzIExheWEuUmlnaWRib2R5M0QpLmxpbmVhclZlbG9jaXR5ID0gdmVsb2NpdHkuY2xvbmUoKTtcclxuICAgICAgICAgICAgLy8gc2V0IGhpZGluZyBlZmZlY3RcclxuICAgICAgICAgICAgTGF5YS5Ud2Vlbi50byh0aGlzLnBpZWNlc0xpc3RbaWR4XS50cmFuc2Zvcm0ubG9jYWxTY2FsZSwgeyB4OiBzY2FsZVggLyAyLCB5OiBzY2FsZVkgLyAyLCB6OiBzY2FsZVogLyAyIH0sIENvbnN0LlBpZWNlc0Jyb2tlblRpbWUgLyA2MCAqIDEwMDAsIExheWEuRWFzZS5saW5lYXJOb25lKTtcclxuICAgICAgICAgICAgTGF5YS5Ud2Vlbi50byh0aGlzLnBpZWNlc0xpc3RbaWR4XS5tZXNoUmVuZGVyZXIubWF0ZXJpYWwsIHsgYWxiZWRvQ29sb3JBOiAwIH0sIENvbnN0LlBpZWNlc0Jyb2tlblRpbWUgLyA2MCAqIDEwMDAsIExheWEuRWFzZS5saW5lYXJOb25lLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGllY2VzTGlzdFsraWR4XS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyB1aSB9IGZyb20gXCIuLy4uLy4uL3VpL2xheWFNYXhVSVwiO1xyXG5pbXBvcnQgKiBhcyBDb25zdCBmcm9tIFwiLi4vQ29uc3RcIjtcclxuaW1wb3J0IE5hdmlnYXRvciBmcm9tIFwiLi4vdXRpbC9OYXZpZ2F0b3JcIjtcclxuaW1wb3J0IEJ1bGxldCBmcm9tIFwiLi4vY29tcG9uZW50L0J1bGxldFwiO1xyXG5pbXBvcnQgVGFyZ2V0IGZyb20gXCIuLi9jb21wb25lbnQvVGFyZ2V0XCI7XHJcbmltcG9ydCBHdWFyZCBmcm9tIFwiLi4vY29tcG9uZW50L0d1YXJkXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU2NlbmUgZXh0ZW5kcyB1aS5nYW1lLkdhbWVTY2VuZVVJIHtcclxuICAgIHN0YXRpYyBpbnN0YW5jZTogR2FtZVNjZW5lO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5omT5byA6K+l5Y2V5L6L6aG16Z2i77yM6Kem5Y+Rb25PcGVuZWRcclxuICAgICAqIEBwYXJhbSBwYXJhbSAgb25PcGVuZWTmlrnms5XnmoTkvKDlj4JcclxuICAgICAqL1xyXG4gICAgc3RhdGljIG9wZW5JbnN0YW5jZShwYXJhbT86IGFueSkge1xyXG4gICAgICAgIGlmIChHYW1lU2NlbmUuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgR2FtZVNjZW5lLmluc3RhbmNlLm9uT3BlbmVkKHBhcmFtKTtcclxuICAgICAgICAgICAgLy8gR2FtZVNjZW5lLmluc3RhbmNlLnNob3dUdXRvcmlhbCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIExheWEuU2NlbmUub3BlbihDb25zdC5VUkxfR2FtZVNjZW5lLCBmYWxzZSwgcGFyYW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW5lZChwYXJhbT86IGFueSkge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgLy8gdGhpcy5zdGF0ZSA9IENvbnN0LkdhbWVTdGF0ZS5SRUFEWTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2NlbmUzRDogTGF5YS5TY2VuZTNEO1xyXG4gICAgcHJpdmF0ZSBjYW1lcmE6IExheWEuQ2FtZXJhO1xyXG4gICAgcHJpdmF0ZSBkaXJlY3Rpb25MaWdodDogTGF5YS5EaXJlY3Rpb25MaWdodDtcclxuXHJcbiAgICAvKiogc3RhZ2UgKi9cclxuICAgIHB1YmxpYyBnYW1lU3RhZ2U6IExheWEuU3ByaXRlM0Q7XHJcbiAgICBwdWJsaWMgc3RhZ2VJZHg6IG51bWJlcjtcclxuICAgIHB1YmxpYyBNYXhCdWxsZXROdW06IG51bWJlciA9IDEwMDtcclxuICAgIHB1YmxpYyBjdXJyQnVsbGV0TnVtOiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIHdpbkNoZWNrQ250OiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIGlzU3RhZ2VTdGFydDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiBidWxsZXQgKi9cclxuICAgIHByaXZhdGUgX2J1bGxldDogTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICBwdWJsaWMgYnVsbGV0VHlwZTogbnVtYmVyID0gQ29uc3QuQnVsbGV0VHlwZS5ERUZBVUxUO1xyXG5cclxuICAgIC8qKiBjYW5ub24gKi9cclxuICAgIHByaXZhdGUgcGxheWVyOiBMYXlhLk1lc2hTcHJpdGUzRDtcclxuICAgIHByaXZhdGUgcGxheWVyQW5pOiBMYXlhLkFuaW1hdG9yO1xyXG4gICAgcHJpdmF0ZSBzaG9vdFRpbWU6IG51bWJlciA9IC0xOztcclxuXHJcbiAgICAvKiogcmF5Y2FzdCAqL1xyXG4gICAgcHJpdmF0ZSBtb3VzZVBvaW50OiBMYXlhLlZlY3RvcjIgPSBuZXcgTGF5YS5WZWN0b3IyKCk7XHJcbiAgICBwcml2YXRlIHJheTogTGF5YS5SYXkgPSBuZXcgTGF5YS5SYXkobmV3IExheWEuVmVjdG9yMygwLCAwLCAwKSwgbmV3IExheWEuVmVjdG9yMygwLCAwLCAwKSk7XHJcbiAgICBwcml2YXRlIGhpdFJlc3VsdDogTGF5YS5IaXRSZXN1bHQgPSBuZXcgTGF5YS5IaXRSZXN1bHQoKTtcclxuXHJcbiAgICAvKiogZ2FtZSBzdGF0ZSAqL1xyXG4gICAgcHVibGljIHN0YXRlOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIEdhbWVTY2VuZS5pbnN0YW5jZSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFNjZW5lM0QoKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0UGxheWVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdEJ1bGxldCgpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YWdlSWR4ID0gMTtcclxuICAgICAgICB0aGlzLmxvYWRHYW1lU3RhZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogaW5pdGlhbGl6ZSBzY2VuZSAqL1xyXG4gICAgcHJpdmF0ZSBpbml0U2NlbmUzRCgpIHtcclxuICAgICAgICAvLyBhZGQgc2NlbmVcclxuICAgICAgICB0aGlzLnNjZW5lM0QgPSBMYXlhLnN0YWdlLmFkZENoaWxkKG5ldyBMYXlhLlNjZW5lM0QoKSkgYXMgTGF5YS5TY2VuZTNEO1xyXG5cclxuICAgICAgICAvLyBjYW1lcmFcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IHRoaXMuc2NlbmUzRC5hZGRDaGlsZChuZXcgTGF5YS5DYW1lcmEoKSkgYXMgTGF5YS5DYW1lcmE7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNmb3JtLmxvY2FsUG9zaXRpb24gPSBDb25zdC5DYW1lcmFJbml0UG9zLmNsb25lKCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlciA9IENvbnN0LkNhbWVyYUluaXRSb3RFdWxlci5jbG9uZSgpO1xyXG5cclxuICAgICAgICAvLyBkaXJlY3Rpb24gbGlnaHRcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkxpZ2h0ID0gdGhpcy5zY2VuZTNELmFkZENoaWxkKG5ldyBMYXlhLkRpcmVjdGlvbkxpZ2h0KCkpIGFzIExheWEuRGlyZWN0aW9uTGlnaHQ7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25MaWdodC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbiA9IENvbnN0LkxpZ2h0SW5pdFBvcy5jbG9uZSgpO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uTGlnaHQudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlciA9IENvbnN0LkxpZ2h0SW5pdFJvdEV1bGVyLmNsb25lKCk7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25MaWdodC5jb2xvciA9IENvbnN0LkxpZ2h0SW5pdENvbG9yLmNsb25lKCk7XHJcblxyXG4gICAgICAgIC8vIGJhY2tncm91bmRcclxuICAgICAgICBMYXlhLlNwcml0ZTNELmxvYWQoQ29uc3QuQmdSZXNVcmxbMF0sIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2NlbmVTcDogTGF5YS5TcHJpdGUzRCA9IHRoaXMuc2NlbmUzRC5hZGRDaGlsZChyZXMpIGFzIExheWEuU3ByaXRlM0Q7XHJcbiAgICAgICAgICAgIC8vIHRyYW5zZm9ybVxyXG4gICAgICAgICAgICBzY2VuZVNwLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gQ29uc3QuU3RhZ2VJbml0UG9zLmNsb25lKCk7XHJcbiAgICAgICAgICAgIC8vIHNjZW5lU3AudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25aIC09IDM7XHJcbiAgICAgICAgICAgIHNjZW5lU3AudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlciA9IENvbnN0LlN0YWdlSW5pdFJvdC5jbG9uZSgpO1xyXG4gICAgICAgICAgICBzY2VuZVNwLnRyYW5zZm9ybS5sb2NhbFNjYWxlID0gQ29uc3QuU3RhZ2VJbml0U2NhbGUuY2xvbmUoKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIGluaXRpYWxpemUgcGxheWVyICovXHJcbiAgICBwcml2YXRlIGluaXRQbGF5ZXIoKSB7XHJcbiAgICAgICAgTGF5YS5TcHJpdGUzRC5sb2FkKENvbnN0LlBsYXllclJlc1VybCwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCAocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyID0gcmVzO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lM0QuYWRkQ2hpbGQodGhpcy5wbGF5ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllckFuaSA9IHRoaXMucGxheWVyLmdldENvbXBvbmVudChMYXlhLkFuaW1hdG9yKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIudHJhbnNmb3JtLmxvY2FsUG9zaXRpb24gPSBDb25zdC5QbGF5ZXJJbml0UG9zLmNsb25lKCk7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXIgPSBDb25zdC5QbGF5ZXJJbml0Um90LmNsb25lKCk7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnRyYW5zZm9ybS5sb2NhbFNjYWxlID0gQ29uc3QuUGxheWVySW5pdFNjYWxlLmNsb25lKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBsYXllci5uYW1lID0gXCJwbGF5ZXJcIjtcclxuXHJcbiAgICAgICAgICAgIGxldCBzaGFkb3dNYXQ6IExheWEuQmxpbm5QaG9uZ01hdGVyaWFsID0gKHRoaXMucGxheWVyLmdldENoaWxkQnlOYW1lKFwic2hhZG93XzBcIikgYXMgTGF5YS5NZXNoU3ByaXRlM0QpLm1lc2hSZW5kZXJlci5tYXRlcmlhbCBhcyBMYXlhLkJsaW5uUGhvbmdNYXRlcmlhbDtcclxuICAgICAgICAgICAgc2hhZG93TWF0LnJlbmRlck1vZGUgPSBMYXlhLkJsaW5uUGhvbmdNYXRlcmlhbC5SRU5ERVJNT0RFX1RSQU5TUEFSRU5UO1xyXG4gICAgICAgICAgICBzaGFkb3dNYXQuYWxiZWRvQ29sb3JBID0gMC4yO1xyXG5cclxuICAgICAgICAgICAgLy8gc2V0IHNob290aW5nIGFuaW1hdGlvblxyXG4gICAgICAgICAgICB0aGlzLnBsYXllckFuaS5nZXREZWZhdWx0U3RhdGUoKS5jbGlwLmlzbG9vcGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyQW5pLnBsYXkoKTtcclxuICAgICAgICAgICAgTGF5YS50aW1lci5mcmFtZUxvb3AoMSwgdGhpcywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gcGxheSBzaG9vdGluZyBhbmltYXRpb25cclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvb3RUaW1lLS07XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG9vdFRpbWUgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RvcCBwbGF5aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJBbmkuc3BlZWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIGluaXQgYnVsbGV0ICovXHJcbiAgICBwcml2YXRlIGluaXRCdWxsZXQoKSB7XHJcbiAgICAgICAgbGV0IHJhZGl1czogbnVtYmVyID0gQ29uc3QuQnVsbGV0UmFkaXVzO1xyXG4gICAgICAgIHRoaXMuX2J1bGxldCA9IG5ldyBMYXlhLk1lc2hTcHJpdGUzRChMYXlhLlByaW1pdGl2ZU1lc2guY3JlYXRlU3BoZXJlKHJhZGl1cykpO1xyXG4gICAgICAgIHRoaXMuX2J1bGxldC5uYW1lID0gXCJfYnVsbGV0XCI7XHJcblxyXG4gICAgICAgIC8vIHRyYXNmb3JtXHJcbiAgICAgICAgdGhpcy5fYnVsbGV0LnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gQ29uc3QuQnVsbGV0SW5pdFBvcy5jbG9uZSgpO1xyXG4gICAgICAgIHRoaXMuX2J1bGxldC50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyID0gQ29uc3QuQnVsbGV0SW5pdFJvdC5jbG9uZSgpO1xyXG5cclxuICAgICAgICAvLyBhZGQgcmlnaWRib2R5XHJcbiAgICAgICAgbGV0IGJ1bGxldFJpZ2lkOiBMYXlhLlJpZ2lkYm9keTNEID0gdGhpcy5fYnVsbGV0LmFkZENvbXBvbmVudChMYXlhLlJpZ2lkYm9keTNEKTtcclxuICAgICAgICBidWxsZXRSaWdpZC5jb2xsaWRlclNoYXBlID0gbmV3IExheWEuU3BoZXJlQ29sbGlkZXJTaGFwZShyYWRpdXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBsb2FkIGdhbWUgc3RhZ2UgYnkgaW5kZXggKi9cclxuICAgIHByaXZhdGUgbG9hZEdhbWVTdGFnZSgpIHtcclxuICAgICAgICAvLyBkZXN0cm95IG9sZCBzdGFnZVxyXG4gICAgICAgIGlmICh0aGlzLmdhbWVTdGFnZSkge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVTdGFnZS5kZXN0cm95Q2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lU3RhZ2UuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBMYXlhLnN0YWdlLm9mZihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCB0aGlzLm9uQ2xpY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcmVzZXRcclxuICAgICAgICB0aGlzLmN1cnJCdWxsZXROdW0gPSAwO1xyXG4gICAgICAgIHRoaXMud2luQ2hlY2tDbnQgPSAwO1xyXG4gICAgICAgIHRoaXMuaXNTdGFnZVN0YXJ0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIGxvYWQgc3RhZ2VcclxuICAgICAgICBsZXQgc2F0Z2VSZXNVcmw6IHN0cmluZyA9IENvbnN0LlN0YWdlUmVzVXJsICsgdGhpcy5zdGFnZUlkeCArIFwiLmxoXCI7XHJcbiAgICAgICAgTGF5YS5TcHJpdGUzRC5sb2FkKHNhdGdlUmVzVXJsLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIChyZXMpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lU3RhZ2UgPSB0aGlzLnNjZW5lM0QuYWRkQ2hpbGQocmVzKSBhcyBMYXlhLlNwcml0ZTNEO1xyXG5cclxuICAgICAgICAgICAgLy8gdHJhbnNmb3JtXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YWdlLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gQ29uc3QuU3RhZ2VJbml0UG9zLmNsb25lKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YWdlLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXIgPSBDb25zdC5TdGFnZUluaXRSb3QuY2xvbmUoKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lU3RhZ2UudHJhbnNmb3JtLmxvY2FsU2NhbGUgPSBDb25zdC5TdGFnZUluaXRTY2FsZS5jbG9uZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gZGVzdHJveSBhbmltYXRvciBjb21wb25lbnQ6IOS4jeeEtuS8mue6puadn+eJqeeQhueisOaSnuaViOaenFxyXG4gICAgICAgICAgICBsZXQgc3RhZ2VBbmkgPSAodGhpcy5nYW1lU3RhZ2UuZ2V0Q29tcG9uZW50KExheWEuQW5pbWF0b3IpIGFzIExheWEuQW5pbWF0b3IpO1xyXG4gICAgICAgICAgICBzdGFnZUFuaSAmJiBzdGFnZUFuaS5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY2hpbGQ6IExheWEuTWVzaFNwcml0ZTNEO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5nYW1lU3RhZ2UubnVtQ2hpbGRyZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQgPSB0aGlzLmdhbWVTdGFnZS5nZXRDaGlsZEF0KGkpIGFzIExheWEuTWVzaFNwcml0ZTNEO1xyXG4gICAgICAgICAgICAgICAgLyoqIHRhcmdldCBvYmplY3QgKi9cclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5uYW1lLnNlYXJjaChcIk9ic3RhY2xlXCIpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjaGlsZC5uYW1lICsgXCIgdG8gdGFyZ2V0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHNjaXB0XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldFNjcmlwdDogVGFyZ2V0ID0gY2hpbGQuYWRkQ29tcG9uZW50KFRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHR5cGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQubmFtZS5zZWFyY2goXCJHbGFzc1wiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNjcmlwdC5zZXRUeXBlKENvbnN0LlRhcmdldFR5cGUuR0xBU1MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2NyaXB0LnNldFR5cGUoQ29uc3QuVGFyZ2V0VHlwZS5ERUZBVUxUKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvKiogc3RhbmRfYm94ICovXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGlsZC5uYW1lLnNlYXJjaChcIkN1YmVcIikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNoaWxkLm5hbWUgKyBcIiB0byBzdGFuZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm5hbWUgPSBcInN0YW5kXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGNvbGxpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbGxpZGVyOiBMYXlhLlBoeXNpY3NDb2xsaWRlciA9IGNoaWxkLmFkZENvbXBvbmVudChMYXlhLlBoeXNpY3NDb2xsaWRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJvdW5kaW5nQm94OiBMYXlhLkJvdW5kQm94ID0gY2hpbGQubWVzaEZpbHRlci5zaGFyZWRNZXNoLmJvdW5kaW5nQm94LmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNpemVYOiBudW1iZXIgPSBib3VuZGluZ0JveC5tYXgueCAtIGJvdW5kaW5nQm94Lm1pbi54O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzaXplWTogbnVtYmVyID0gYm91bmRpbmdCb3gubWF4LnkgLSBib3VuZGluZ0JveC5taW4ueTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2l6ZVo6IG51bWJlciA9IGJvdW5kaW5nQm94Lm1heC56IC0gYm91bmRpbmdCb3gubWluLno7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGlkZXIuY29sbGlkZXJTaGFwZSA9IG5ldyBMYXlhLkJveENvbGxpZGVyU2hhcGUoc2l6ZVgsIHNpemVZLCBzaXplWik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Yi35paw5riy5p+T5qih5byP77yM5LiN54S25YW25LiK6K6+572u5oiQ6YCP5piO5riy5p+T55qE54mp5L2T5Lya6KKr6YGu55uWXHJcbiAgICAgICAgICAgICAgICAgICAgKGNoaWxkLm1lc2hSZW5kZXJlci5tYXRlcmlhbCBhcyBMYXlhLlBCUlNwZWN1bGFyTWF0ZXJpYWwpLnJlbmRlck1vZGUgPSBMYXlhLlBCUlNwZWN1bGFyTWF0ZXJpYWwuUkVOREVSTU9ERV9DVVRPVVQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvKiogc3RhbmRfY3lsaW5kZXIgKi9cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoaWxkLm5hbWUuc2VhcmNoKFwiQ3lsaW5kZXJcIikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNoaWxkLm5hbWUgKyBcIiB0byBzdGFuZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm5hbWUgPSBcInN0YW5kXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGNvbGxpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbGxpZGVyOiBMYXlhLlBoeXNpY3NDb2xsaWRlciA9IGNoaWxkLmFkZENvbXBvbmVudChMYXlhLlBoeXNpY3NDb2xsaWRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbGxpZGVyU2hhcGU6IExheWEuTWVzaENvbGxpZGVyU2hhcGUgPSBuZXcgTGF5YS5NZXNoQ29sbGlkZXJTaGFwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxpZGVyU2hhcGUubWVzaCA9IGNoaWxkLm1lc2hGaWx0ZXIuc2hhcmVkTWVzaDtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsaWRlci5jb2xsaWRlclNoYXBlID0gY29sbGlkZXJTaGFwZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDliLfmlrDmuLLmn5PmqKHlvI/vvIzkuI3nhLblhbbkuIrorr7nva7miJDpgI/mmI7muLLmn5PnmoTniankvZPkvJrooqvpga7nm5ZcclxuICAgICAgICAgICAgICAgICAgICAoY2hpbGQubWVzaFJlbmRlcmVyLm1hdGVyaWFsIGFzIExheWEuUEJSU3BlY3VsYXJNYXRlcmlhbCkucmVuZGVyTW9kZSA9IExheWEuUEJSU3BlY3VsYXJNYXRlcmlhbC5SRU5ERVJNT0RFX0NVVE9VVDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8qKiBHdWFyZCAqL1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hpbGQubmFtZS5zZWFyY2goXCJHdWFyZFwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY2hpbGQubmFtZSArIFwiIHRvIGd1YXJkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHNjcmlwdFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBndWFyZDogR3VhcmQgPSBjaGlsZC5hZGRDb21wb25lbnQoR3VhcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgc3RhZ2UgbGlzdGVuZXJcclxuICAgICAgICAgICAgTGF5YS50aW1lci5mcmFtZUxvb3AoMSwgdGhpcywgdGhpcy5zdGFnZUxpc3RlbmVyKTtcclxuICAgICAgICAgICAgLy8gbW91c2UgY2xpY2sgZXZlbnQgbGlzdGVuOiBzaG9vdCBhIGJ1bGxldFxyXG4gICAgICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMub25DbGljayk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBnYW1lIHN0YWdlIGxpc3RlbmVyICovXHJcbiAgICBwcml2YXRlIHN0YWdlTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgLy8gcGxheWVyIHdpblxyXG4gICAgICAgIGlmICh0aGlzLndpbkNoZWNrQ250KysgPj0gQ29uc3QuTWF4V2luQ2hlY2tUaW1lKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiWW91IHdpbi4gU3RhZ2U6IFwiICsgdGhpcy5zdGFnZUlkeCk7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YWdlKCk7XHJcbiAgICAgICAgICAgIC8vIGNsZWFyIGxpc3RlbmVyXHJcbiAgICAgICAgICAgIExheWEudGltZXIuY2xlYXIodGhpcywgdGhpcy5zdGFnZUxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcGxheWVyIGZhaWw6IG91dCBvZiBhbW1vXHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJyQnVsbGV0TnVtID49IHRoaXMuTWF4QnVsbGV0TnVtKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib3V0IG9mIGFtbW9cIik7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdGFydCgpO1xyXG4gICAgICAgICAgICBMYXlhLnRpbWVyLmNsZWFyKHRoaXMsIHRoaXMuc3RhZ2VMaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiByZXN0YXJ0IGN1cnJlbnQgc3RhZ2UgKi9cclxuICAgIHJlc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkR2FtZVN0YWdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHN0YXJ0IG5leHQgc3RhZ2UgKi9cclxuICAgIG5leHRTdGFnZSgpIHtcclxuICAgICAgICB0aGlzLnN0YWdlSWR4Kys7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhZ2VJZHggPD0gQ29uc3QuU3RhZ2VOdW0pIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkR2FtZVN0YWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIumAmuWFs1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIG1vdXNlIGNsaWNrIGV2ZW50OiBzaG9vdCBhIGJ1bGxldCAqL1xyXG4gICAgcHJpdmF0ZSBvbkNsaWNrKCkge1xyXG4gICAgICAgIC8vIGNoZWNrIHJlcyBsb2FkaW5nIGNvbXBsZXRlXHJcbiAgICAgICAgaWYgKCF0aGlzLmdhbWVTdGFnZSB8fCAhdGhpcy5wbGF5ZXIgfHwgIXRoaXMuX2J1bGxldCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBwbGF5IHNob290IGFuaW1hdGlvblxyXG4gICAgICAgIHRoaXMuc2hvb3RUaW1lID0gQ29uc3QuUGxheWVyU2hvb3RMaWZlVGltZTtcclxuICAgICAgICB0aGlzLnBsYXllckFuaS5zcGVlZCA9IDE7XHJcblxyXG4gICAgICAgIC8vIGdldCByYXlcclxuICAgICAgICB0aGlzLm1vdXNlUG9pbnQueCA9IExheWEuTW91c2VNYW5hZ2VyLmluc3RhbmNlLm1vdXNlWDtcclxuICAgICAgICB0aGlzLm1vdXNlUG9pbnQueSA9IExheWEuTW91c2VNYW5hZ2VyLmluc3RhbmNlLm1vdXNlWTtcclxuICAgICAgICB0aGlzLmNhbWVyYS52aWV3cG9ydFBvaW50VG9SYXkodGhpcy5tb3VzZVBvaW50LCB0aGlzLnJheSk7XHJcblxyXG4gICAgICAgIC8vIGdldCBidWxsZXQgc2hvb3RpbmcgZGlyZWN0aW9uXHJcbiAgICAgICAgbGV0IGJ1bGxldERpcmVjdGlvbjogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygpO1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lM0QucGh5c2ljc1NpbXVsYXRpb24ucmF5Q2FzdCh0aGlzLnJheSwgdGhpcy5oaXRSZXN1bHQsIDMwKSkge1xyXG4gICAgICAgICAgICAvLyBkaXJlY3Rpb24gdmVjdG9yOiBbYnVsbGV0IGluaXQgcG9pbnRdIHRvIFttb3VzZSBoaXQgcG9pbnRdXHJcbiAgICAgICAgICAgIExheWEuVmVjdG9yMy5zdWJ0cmFjdCh0aGlzLmhpdFJlc3VsdC5wb2ludCwgQ29uc3QuQnVsbGV0SW5pdFBvcywgYnVsbGV0RGlyZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGRpcmVjdGlvbiB2ZWN0b3I6IFtjYW1lcmEgcG9pbnRdIHRvIFttb3VzZSBoaXQgcG9pbnRdXHJcbiAgICAgICAgICAgIHZhciBhVjM6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoKTtcclxuICAgICAgICAgICAgLy8gcmF5IGRpcmVjdGlvbiBzY2FsZTogdG8gZGVwdGggc2NhbGVaXHJcbiAgICAgICAgICAgIGxldCBzY2FsZVY6IG51bWJlciA9IHRoaXMuY2FtZXJhLmZhclBsYW5lO1xyXG4gICAgICAgICAgICBzY2FsZVYgPSAyMDtcclxuICAgICAgICAgICAgTGF5YS5WZWN0b3IzLnNjYWxlKHRoaXMucmF5LmRpcmVjdGlvbiwgc2NhbGVWLCBhVjMpO1xyXG4gICAgICAgICAgICAvLyBkaXJlY3Rpb24gdmVjdG9yOiBbYnVsbGV0IGluaXQgcG9pbnRdIHRvIFtjYW1lcmEgcG9pbnRdXHJcbiAgICAgICAgICAgIHZhciBiVjM6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoKTtcclxuICAgICAgICAgICAgTGF5YS5WZWN0b3IzLnN1YnRyYWN0KHRoaXMuY2FtZXJhLnRyYW5zZm9ybS5wb3NpdGlvbiwgQ29uc3QuQnVsbGV0SW5pdFBvcywgYlYzKTtcclxuICAgICAgICAgICAgLy8gZGlyZWN0aW9uIHZlY3RvcjogW2J1bGxldCBpbml0IHBvaW50XSB0byBbbW91c2UgaGl0IHBvaW50XVxyXG4gICAgICAgICAgICBMYXlhLlZlY3RvcjMuYWRkKGFWMywgYlYzLCBidWxsZXREaXJlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBMYXlhLlZlY3RvcjMubm9ybWFsaXplKGJ1bGxldERpcmVjdGlvbiwgYnVsbGV0RGlyZWN0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIGJ1bGxldFxyXG4gICAgICAgIHRoaXMuY3JlYXRlQnVsbGV0KENvbnN0LkJ1bGxldFR5cGUuRlJPWkVOLCBidWxsZXREaXJlY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBjcmVhdGUgYnVsbGV0ICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZUJ1bGxldCh0eXBlOiBudW1iZXIsIGRpcmVjdGlvbjogTGF5YS5WZWN0b3IzKSB7XHJcbiAgICAgICAgdGhpcy5idWxsZXRUeXBlID0gdHlwZTtcclxuXHJcbiAgICAgICAgbGV0IGJ1bGxldDogTGF5YS5NZXNoU3ByaXRlM0QgPSB0aGlzLl9idWxsZXQuY2xvbmUoKTtcclxuICAgICAgICBidWxsZXQubmFtZSA9IFwiYnVsbGV0XCI7XHJcbiAgICAgICAgdGhpcy5zY2VuZTNELmFkZENoaWxkKGJ1bGxldCk7XHJcblxyXG4gICAgICAgIC8vIHRyYXNmb3JtXHJcbiAgICAgICAgYnVsbGV0LnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gQ29uc3QuQnVsbGV0SW5pdFBvcy5jbG9uZSgpO1xyXG4gICAgICAgIGJ1bGxldC50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyID0gQ29uc3QuQnVsbGV0SW5pdFJvdC5jbG9uZSgpO1xyXG4gICAgICAgIExheWEuVmVjdG9yMy5zY2FsZShidWxsZXQudHJhbnNmb3JtLmxvY2FsU2NhbGUsIENvbnN0LkJ1bGxldFNjYWxlW3RoaXMuYnVsbGV0VHlwZV0sIGJ1bGxldC50cmFuc2Zvcm0ubG9jYWxTY2FsZSk7XHJcblxyXG4gICAgICAgIC8vIGFkZCByaWdpZGJvZHlcclxuICAgICAgICBsZXQgYnVsbGV0UmlnaWQ6IExheWEuUmlnaWRib2R5M0QgPSBidWxsZXQuZ2V0Q29tcG9uZW50KExheWEuUmlnaWRib2R5M0QpO1xyXG5cclxuICAgICAgICAvLyBxdWljayBtb3ZpbmcgZGV0ZWNpb25cclxuICAgICAgICBidWxsZXRSaWdpZC5jY2RNb3Rpb25UaHJlc2hvbGQgPSAwLjAwMDE7XHJcbiAgICAgICAgYnVsbGV0UmlnaWQuY2NkU3dlcHRTcGhlcmVSYWRpdXMgPSBDb25zdC5CdWxsZXRSYWRpdXMgKiBDb25zdC5CdWxsZXRTY2FsZVt0aGlzLmJ1bGxldFR5cGVdO1xyXG5cclxuICAgICAgICAvLyBzZXQgcGh5c2ljc1xyXG4gICAgICAgIGJ1bGxldFJpZ2lkLm1hc3MgPSBDb25zdC5CdWxsZXRNYXNzW3RoaXMuYnVsbGV0VHlwZV07XHJcblxyXG4gICAgICAgIC8vIHNldCB2ZWxvY2l0eVxyXG4gICAgICAgIGxldCB2ZWxvY2l0eTogTGF5YS5WZWN0b3IzID0gZGlyZWN0aW9uLmNsb25lKCk7XHJcbiAgICAgICAgTGF5YS5WZWN0b3IzLnNjYWxlKHZlbG9jaXR5LCBDb25zdC5CdWxsZXRWZWxvY2l0eVt0aGlzLmJ1bGxldFR5cGVdLCB2ZWxvY2l0eSk7XHJcbiAgICAgICAgYnVsbGV0UmlnaWQubGluZWFyVmVsb2NpdHkgPSB2ZWxvY2l0eS5jbG9uZSgpO1xyXG5cclxuICAgICAgICAvLyBhZGQgc2NyaXB0XHJcbiAgICAgICAgbGV0IGJ1bGxldFNjcmlwdDogQnVsbGV0ID0gYnVsbGV0LmFkZENvbXBvbmVudChCdWxsZXQpO1xyXG4gICAgICAgIC8vIHNldCB0eXBlXHJcbiAgICAgICAgYnVsbGV0U2NyaXB0LnNldFR5cGUodGhpcy5idWxsZXRUeXBlKTtcclxuXHJcbiAgICAgICAgLy8g5byA5pS+54mp5L2T54mp55CG5Y+X5Yqb77ya546p5a625pyJ5pWI6L6T5YWl5YmN77yM5a2Q5by55Y+R5bCE6L2o6L+55b2i54q25qOA5rWL5piv5ZCm5pyJ56Kw5pKeXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RhZ2VTdGFydCkge1xyXG4gICAgICAgICAgICB2YXIgc2hhcGUgPSBuZXcgTGF5YS5TcGhlcmVDb2xsaWRlclNoYXBlKENvbnN0LkJ1bGxldFJhZGl1cyAqIDUpO1xyXG4gICAgICAgICAgICB2YXIgY2hlY2tIaXRSZXN1bHQ6IExheWEuSGl0UmVzdWx0W10gPSBbXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2NlbmUzRC5waHlzaWNzU2ltdWxhdGlvbi5zaGFwZUNhc3RBbGwoc2hhcGUsIENvbnN0LkJ1bGxldEluaXRQb3MsIHZlbG9jaXR5LCBjaGVja0hpdFJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgaW4gY2hlY2tIaXRSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tIaXRSZXN1bHRbaV0uY29sbGlkZXIub3duZXIubmFtZSAhPT0gXCJzdGFuZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTdGFnZVN0YXJ0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cbmltcG9ydCBWaWV3PUxheWEuVmlldztcclxuaW1wb3J0IERpYWxvZz1MYXlhLkRpYWxvZztcclxuaW1wb3J0IFNjZW5lPUxheWEuU2NlbmU7XG52YXIgUkVHOiBGdW5jdGlvbiA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcbmV4cG9ydCBtb2R1bGUgdWkuZ2FtZSB7XHJcbiAgICBleHBvcnQgY2xhc3MgR2FtZVNjZW5lVUkgZXh0ZW5kcyBTY2VuZSB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoKXsgc3VwZXIoKX1cclxuICAgICAgICBjcmVhdGVDaGlsZHJlbigpOnZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5jcmVhdGVDaGlsZHJlbigpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRTY2VuZShcImdhbWUvR2FtZVNjZW5lXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFJFRyhcInVpLmdhbWUuR2FtZVNjZW5lVUlcIixHYW1lU2NlbmVVSSk7XHJcbn1cciJdfQ==
