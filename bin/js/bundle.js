var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var GameScene_1 = require("./script/runtime/GameScene");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("script/runtime/GameScene.ts", GameScene_1.default);
    };
    GameConfig.width = 640;
    GameConfig.height = 1136;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "game/GameScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = true;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./script/runtime/GameScene":8}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/** version */
exports.VERSION = "1.0.0";
/** pages */
exports.URL_HomeView = "home/HomeView.scene";
exports.URL_GameScene = "game/GameScene.scene";
exports.URL_OverView = "over/OverView.scene";
exports.URL_ReviveView = "dialog/ReviveView.scene";
/** camera */
exports.CameraInitPos = new Laya.Vector3(0, 0.5, 0);
exports.CameraInitRotEuler = new Laya.Vector3(0, 0, 0);
/** directional light */
exports.LightInitPos = new Laya.Vector3(-3, 5, 0);
exports.LightInitRotEuler = new Laya.Vector3(-45, -30, 0);
/** game stage */
exports.StageResUrl = "res/stage/";
exports.StageInitPos = new Laya.Vector3(0, 0, 0);
exports.StageInitRot = new Laya.Vector3(0, 180, 0);
exports.StageInitScale = new Laya.Vector3(40, 40, 40);
exports.StageNum = 20;
// winning check frame
exports.WinCheckTime = 120;
/** glass */
exports.GlassBrokenVelocity = 3;
/** obstacle piece */
exports.PieceResUrl = "res/cube_piece.lm";
exports.PiecesNum = 3;
exports.PiecesBrokenTime = 120;
/** bullet */
exports.BulletResUrl = "res/bullet.lh";
exports.BulletInitPos = new Laya.Vector3(0, 0, -5);
exports.BulletInitRot = new Laya.Vector3(180, 0, 0);
exports.BulletRadius = 0.15;
/** player */
exports.PlayerResUrl = "res/human.lh";
exports.PlayerInitPos = new Laya.Vector3(0, 0, -1);
exports.PlayerInitRot = new Laya.Vector3(90, 168, 0);
exports.PlayerInitScale = new Laya.Vector3(20, 20, 20);
exports.PlayerShootLifeTime = 10;
},{}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var BulletScript = /** @class */ (function (_super) {
    __extends(BulletScript, _super);
    function BulletScript() {
        var _this = _super.call(this) || this;
        _this.lifetime = 120;
        _this.collisionBlackList = ["bullet", "player"];
        return _this;
    }
    BulletScript.prototype.onAwake = function () {
        this.bullet = this.owner;
    };
    BulletScript.prototype.onUpdate = function () {
        var _this = this;
        // update lifetime
        this.lifetime--;
        if (this.lifetime < 0) {
            Laya.timer.frameOnce(1, this, function () {
                _this.bullet.removeSelf();
                _this.destroy();
            });
        }
    };
    return BulletScript;
}(Laya.Script3D));
exports.default = BulletScript;
},{}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameScene_1 = require("../runtime/GameScene");
var Rotator = /** @class */ (function (_super) {
    __extends(Rotator, _super);
    function Rotator() {
        var _this = _super.call(this) || this;
        _this.MaxMoveTimes = 30;
        _this.moveTimes = 0;
        return _this;
    }
    Rotator.prototype.onAwake = function () {
        // record game stage index
        this.stageIdx = GameScene_1.default.instance.stageIdx;
        // get sprite
        this.rotator = this.owner;
        // add collider
        var collider = this.rotator.addComponent(Laya.PhysicsCollider);
        var colliderShape = new Laya.MeshColliderShape();
        colliderShape.mesh = this.rotator.meshFilter.sharedMesh;
        collider.colliderShape = colliderShape;
        // get size
        var boundingBox = this.rotator.meshFilter.sharedMesh.boundingBox.clone();
        this.sizeX = boundingBox.max.x - boundingBox.min.x;
        this.sizeY = boundingBox.max.y - boundingBox.min.y;
        this.sizeZ = boundingBox.max.z - boundingBox.min.z;
        this.sizeX *= 3;
        this.sizeY *= 3;
    };
    Rotator.prototype.setMoveType = function (moveType) {
        this.moveType = moveType;
    };
    Rotator.prototype.onUpdate = function () {
        // check stage
        if (this.stageIdx !== GameScene_1.default.instance.stageIdx) {
            console.log("rotator destroyed.");
            this.destroy();
            return;
        }
        this.moveTimes = (this.moveTimes + 1) % (this.MaxMoveTimes * 2);
        var flag = Math.floor((this.moveTimes / this.MaxMoveTimes) % 2);
        if (this.moveType === "move_left") {
            if (flag) {
                this.rotator.transform.localPositionX -= this.sizeX / this.MaxMoveTimes;
            }
            else {
                this.rotator.transform.localPositionX += this.sizeX / this.MaxMoveTimes;
            }
        }
        else if (this.moveType === "move_right") {
            if (flag) {
                this.rotator.transform.localPositionX += this.sizeX / this.MaxMoveTimes;
            }
            else {
                this.rotator.transform.localPositionX -= this.sizeX / this.MaxMoveTimes;
            }
        }
        else if (this.moveType === "move_up") {
            if (flag) {
                this.rotator.transform.localPositionY += this.sizeY / this.MaxMoveTimes;
            }
            else {
                this.rotator.transform.localPositionY -= this.sizeY / this.MaxMoveTimes;
            }
        }
        else if (this.moveType === "move_down") {
            if (flag) {
                this.rotator.transform.localPositionY -= this.sizeY / this.MaxMoveTimes;
            }
            else {
                this.rotator.transform.localPositionY += this.sizeY / this.MaxMoveTimes;
            }
        }
        // else if (this.moveType === "rotate_left") {
        //     this.rotator.transform.localRotationEulerY = (this.rotator.transform.localRotationEulerY + 1) % 360;
        // }
        // else if (this.moveType === "rotate_right") {
        //     this.rotator.transform.localRotationEulerY = (this.rotator.transform.localRotationEulerY - 1) % 360;
        // }
        // else if (this.moveType === "rotate_up") {
        //     this.rotator.transform.localRotationEulerX = (this.rotator.transform.localRotationEulerX + 1) % 360;
        // }
        // else if (this.moveType === "rotate_down") {
        //     this.rotator.transform.localRotationEulerX = (this.rotator.transform.localRotationEulerX - 1) % 360;
        // }
    };
    return Rotator;
}(Laya.Script3D));
exports.default = Rotator;
},{"../runtime/GameScene":8}],6:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Const = require("../Const");
var GameScene_1 = require("../runtime/GameScene");
var Stand = /** @class */ (function (_super) {
    __extends(Stand, _super);
    function Stand() {
        var _this = _super.call(this) || this;
        _this.winCount = 0;
        _this.collisionBlackList = ["stand", "bullet", "piece"];
        return _this;
    }
    Stand.prototype.onAwake = function () {
        this.stand = this.owner;
    };
    Stand.prototype.onUpdate = function () {
        /** win check */
        this.winCount++;
        if (this.winCount > Const.WinCheckTime) {
            console.log("You win. Stage: " + GameScene_1.default.instance.stageIdx);
            GameScene_1.default.instance.nextStage();
            this.destroy();
        }
    };
    Stand.prototype.onCollisionStay = function (collision) {
        if (this.collisionBlackList.indexOf(collision.other.owner.name) < 0) {
            this.winCount = 0;
        }
    };
    return Stand;
}(Laya.Script3D));
exports.default = Stand;
},{"../Const":3,"../runtime/GameScene":8}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Const = require("../Const");
var GameScene_1 = require("../runtime/GameScene");
var Target = /** @class */ (function (_super) {
    __extends(Target, _super);
    function Target() {
        var _this = _super.call(this) || this;
        _this.type = 1 /* DEFAULT */;
        _this.collisionBlackList = ["stand", "rotator"];
        /** target object pieces */
        _this.piecesList = [];
        return _this;
    }
    Target.prototype.onAwake = function () {
        // record game stage index
        this.stageIdx = GameScene_1.default.instance.stageIdx;
        // get sprite
        this.target = this.owner;
        this.setRigidbody();
        this.initPieces();
    };
    Target.prototype.onCollisionEnter = function (collision) {
        var other = collision.other.owner;
        // if (this.collisionBlackList.indexOf(other.name) < 0) {
        if (this.type === 2 /* GLASS */) {
            // 相对速度高可击碎
            var velocity = this.target.getComponent(Laya.Rigidbody3D).linearVelocity.clone();
            var velocityOther = new Laya.Vector3(0, 0, 0);
            // not playform
            if (this.collisionBlackList.indexOf(other.name) < 0) {
                velocityOther = other.getComponent(Laya.Rigidbody3D).linearVelocity.clone();
            }
            Laya.Vector3.subtract(velocity, velocityOther, velocity);
            var velocityValue = Math.sqrt(Math.pow(velocity.x, 2) + Math.pow(velocity.y, 2) + Math.pow(velocity.z, 2));
            if (velocityValue >= Const.GlassBrokenVelocity) {
                // this.isHit = true;
                this.broken();
            }
        }
        // }
    };
    Target.prototype.onUpdate = function () {
        // check stage
        if (this.stageIdx !== GameScene_1.default.instance.stageIdx) {
            this.destroy();
            return;
        }
        // physics engine bug detecting and fixing
        this.physics_engine_bug_fixing();
        // // hit handling
        // if (this.isHit) {
        //     if (this.type === Const.TargetType.GLASS) {
        //         this.broken();
        //     }
        // }
    };
    /** physics engine bug detecting and fixing
     *  引擎bug：姿态稳定情况下，某个物体作用力方向（如重力时的底下）的碰撞物体快速消失，
     *  而此过程中相互作用影响过小导致自身姿态没有变化时，引擎会自动将该物体的刚体非激活，从而导致腾空现象，
     *  增大物体间相互作用力（如摩擦系数）可减少该情况发生，但不能杜绝，
     *  故在此检测该情况并对刚体销毁重建
     * */
    Target.prototype.physics_engine_bug_fixing = function () {
        var rigidbody = this.target.getComponent(Laya.Rigidbody3D);
        if (rigidbody.isActive == false) {
            rigidbody.destroy();
            this.setRigidbody();
            console.log("Physics_engine_bug_fixing: Reset rigidbody.");
        }
    };
    /** set material by type */
    Target.prototype.setType = function (type) {
        this.type = type;
        if (this.type === 2 /* GLASS */) {
            var mat = new Laya.BlinnPhongMaterial();
            mat.renderMode = Laya.BlinnPhongMaterial.RENDERMODE_TRANSPARENT;
            mat.albedoColor = new Laya.Vector4(0.7, 0.7, 1, 0.7);
            this.target.meshRenderer.material = mat;
        }
    };
    /** set rigidbody */
    Target.prototype.setRigidbody = function () {
        var rigidbody = this.target.addComponent(Laya.Rigidbody3D);
        if (this.target.name.search("Cube") >= 0) {
            var boundingBox = this.target.meshFilter.sharedMesh.boundingBox.clone();
            this.sizeX = boundingBox.max.x - boundingBox.min.x;
            this.sizeY = boundingBox.max.y - boundingBox.min.y;
            this.sizeZ = boundingBox.max.z - boundingBox.min.z;
            rigidbody.colliderShape = new Laya.BoxColliderShape(this.sizeX, this.sizeY, this.sizeZ);
        }
        else {
            var colliderShape = new Laya.MeshColliderShape();
            colliderShape.mesh = this.target.meshFilter.sharedMesh;
            rigidbody.colliderShape = colliderShape;
        }
        this.setPhysicsParam();
    };
    /** set physics param */
    Target.prototype.setPhysicsParam = function () {
        var rigidbody = this.target.getComponent(Laya.Rigidbody3D);
        rigidbody.isKinematic = false;
        if (this.type === 1 /* DEFAULT */) {
            rigidbody.mass = 10;
            rigidbody.friction = 10;
        }
        else if (this.type === 2 /* GLASS */) {
            rigidbody.mass = 0.1;
            rigidbody.friction = 2;
        }
    };
    /** set target broken */
    Target.prototype.broken = function () {
        // play broken sound
        var _this = this;
        // show pieces
        this.effectPiecesBroken();
        // hide target
        Laya.timer.frameOnce(1, this, function () {
            _this.target.active = false;
        });
    };
    /** init target pieces */
    Target.prototype.initPieces = function () {
        var _this = this;
        Laya.Mesh.load(Const.PieceResUrl, Laya.Handler.create(this, function (mesh) {
            var piece = new Laya.MeshSprite3D(mesh);
            piece.active = false;
            piece.name = "piece";
            // set material
            var mat = new Laya.BlinnPhongMaterial();
            mat.renderMode = Laya.BlinnPhongMaterial.RENDERMODE_TRANSPARENT;
            mat.albedoColor = new Laya.Vector4(0.7, 0.7, 1, 0.7);
            piece.meshRenderer.material = mat;
            // set rigidbody
            var pieceRigid = piece.addComponent(Laya.Rigidbody3D);
            var pieceColliderShape = new Laya.MeshColliderShape();
            pieceColliderShape.mesh = piece.meshFilter.sharedMesh;
            pieceRigid.colliderShape = pieceColliderShape;
            // add pieces to scene
            for (var i = 0; i < Const.PiecesNum; i++) {
                _this.piecesList.push(piece.clone());
                GameScene_1.default.instance.scene3D.addChild(_this.piecesList[i]);
            }
        }));
    };
    /** platy effect: target broken to pieces */
    Target.prototype.effectPiecesBroken = function () {
        var _this = this;
        var _loop_1 = function (idx) {
            // active pieces
            this_1.piecesList[idx].active = true;
            // set size scale
            var scaleX = (Math.random() * 0.5 + 0.5) * 2.5 * this_1.sizeX * Const.StageInitScale.x;
            var scaleY = (Math.random() * 0.5 + 0.5) * 2.5 * this_1.sizeY * Const.StageInitScale.y;
            var scaleZ = (Math.random() * 0.5 + 0.5) * 2.5 * this_1.sizeZ * Const.StageInitScale.z;
            this_1.piecesList[idx].transform.localScale = new Laya.Vector3(scaleX, scaleY, scaleZ);
            // set rot
            this_1.piecesList[idx].transform.localRotationEulerX = (Math.random() - 0.5) * 2 * 90;
            this_1.piecesList[idx].transform.localRotationEulerY = (Math.random() - 0.5) * 2 * 90;
            this_1.piecesList[idx].transform.localRotationEulerZ = (Math.random() - 0.5) * 2 * 90;
            // set pos
            var velocity = new Laya.Vector3();
            velocity.x = (Math.random() - 0.5) * Const.BulletRadius;
            velocity.y = (Math.random() - 0.5) * Const.BulletRadius;
            velocity.z = (Math.random() - 0.5) * Const.BulletRadius;
            this_1.piecesList[idx].transform.position = this_1.target.transform.position.clone();
            Laya.Vector3.add(this_1.piecesList[idx].transform.localPosition, velocity, this_1.piecesList[idx].transform.localPosition);
            // set velocity of pieces
            Laya.Vector3.scale(velocity, 50, velocity);
            this_1.piecesList[idx].getComponent(Laya.Rigidbody3D).linearVelocity = velocity.clone();
            // set hiding effect
            Laya.Tween.to(this_1.piecesList[idx].transform.localScale, { x: scaleX / 2, y: scaleY / 2, z: scaleZ / 2 }, Const.PiecesBrokenTime / 60 * 1000, Laya.Ease.linearNone);
            Laya.Tween.to(this_1.piecesList[idx].meshRenderer.material, { albedoColorA: 0 }, Const.PiecesBrokenTime / 60 * 1000, Laya.Ease.linearNone, Laya.Handler.create(this_1, function () {
                _this.piecesList[+idx].destroy();
            }));
        };
        var this_1 = this;
        for (var idx in this.piecesList) {
            _loop_1(idx);
        }
    };
    return Target;
}(Laya.Script3D));
exports.default = Target;
},{"../Const":3,"../runtime/GameScene":8}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var layaMaxUI_1 = require("./../../ui/layaMaxUI");
var Const = require("../Const");
var Bullet_1 = require("../component/Bullet");
var Stand_1 = require("../component/Stand");
var Target_1 = require("../component/Target");
var Rotator_1 = require("../component/Rotator");
var GameScene = /** @class */ (function (_super) {
    __extends(GameScene, _super);
    function GameScene() {
        var _this = _super.call(this) || this;
        _this.MaxBulletNum = 5;
        _this.currBulletNum = 0;
        _this.bulletRadius = 0.02;
        _this.bulletVelocity = 1;
        _this.bulletDirection = new Laya.Vector3();
        _this.shootTime = -1;
        /** raycast */
        _this.mousePoint = new Laya.Vector2();
        _this.ray = new Laya.Ray(new Laya.Vector3(0, 0, 0), new Laya.Vector3(0, 0, 0));
        _this.hitResult = new Laya.HitResult();
        /** game state */
        _this.state = 0;
        GameScene.instance = _this;
        _this.initScene3D();
        _this.initPlayer();
        _this.initBullet();
        _this.stageIdx = 1;
        _this.loadGameStage();
        // mouse click event listen: shoot a bullet
        Laya.stage.on(Laya.Event.CLICK, _this, _this.onClick);
        return _this;
    }
    /**
     * 打开该单例页面，触发onOpened
     * @param param  onOpened方法的传参
     */
    GameScene.openInstance = function (param) {
        if (GameScene.instance) {
            GameScene.instance.onOpened(param);
            // GameScene.instance.showTutorial();
        }
        else {
            Laya.Scene.open(Const.URL_GameScene, false, param);
        }
    };
    GameScene.prototype.onOpened = function (param) {
        this.visible = true;
        // this.state = Const.GameState.READY;
    };
    ;
    /** initialize scene */
    GameScene.prototype.initScene3D = function () {
        // add scene
        this.scene3D = Laya.stage.addChild(new Laya.Scene3D());
        // camera
        this.camera = this.scene3D.addChild(new Laya.Camera());
        this.camera.transform.localPosition = Const.CameraInitPos.clone();
        this.camera.transform.localRotationEuler = Const.CameraInitRotEuler.clone();
        // direction light
        this.directionLight = this.scene3D.addChild(new Laya.DirectionLight());
        this.directionLight.transform.localPosition = Const.LightInitPos.clone();
        this.directionLight.transform.localRotationEuler = Const.LightInitRotEuler.clone();
    };
    /** initialize player */
    GameScene.prototype.initPlayer = function () {
        var _this = this;
        Laya.Sprite3D.load(Const.PlayerResUrl, Laya.Handler.create(this, function (res) {
            _this.player = res;
            _this.scene3D.addChild(_this.player);
            _this.playerAni = _this.player.getComponent(Laya.Animator);
            _this.player.transform.localPosition = Const.PlayerInitPos.clone();
            _this.player.transform.localRotationEuler = Const.PlayerInitRot.clone();
            _this.player.transform.localScale = Const.PlayerInitScale.clone();
            _this.player.name = "player";
            var shadowMat = _this.player.getChildByName("shadow_0").meshRenderer.material;
            shadowMat.renderMode = Laya.BlinnPhongMaterial.RENDERMODE_TRANSPARENT;
            shadowMat.albedoColorA = 0.2;
            // set shooting animation
            _this.playerAni.getDefaultState().clip.islooping = true;
            _this.playerAni.play();
            Laya.timer.frameLoop(1, _this, function () {
                // play shooting animation
                _this.shootTime--;
                if (_this.shootTime < 0) {
                    // stop playing
                    _this.playerAni.speed = 0;
                }
            });
        }));
    };
    /** initialize bullet */
    GameScene.prototype.initBullet = function () {
        this._bullet = new Laya.MeshSprite3D(Laya.PrimitiveMesh.createSphere(Const.BulletRadius));
        /** add rigidbody */
        var bulletRigid = this._bullet.addComponent(Laya.Rigidbody3D);
        bulletRigid.colliderShape = new Laya.SphereColliderShape(Const.BulletRadius);
        /** set physics */
        bulletRigid.mass = 10;
        bulletRigid.overrideGravity = true;
        bulletRigid.gravity = new Laya.Vector3(0, -5, 0);
        // quick moving detecion
        bulletRigid.ccdMotionThreshold = 0.0001;
        bulletRigid.ccdSweptSphereRadius = Const.BulletRadius;
        /** trasform */
        this._bullet.transform.localPosition = Const.BulletInitPos.clone();
        this._bullet.transform.localRotationEuler = Const.BulletInitRot.clone();
        this._bullet.name = "_bullet";
    };
    /** restart current stage */
    GameScene.prototype.restart = function () {
        this.loadGameStage();
    };
    /** start next stage */
    GameScene.prototype.nextStage = function () {
        this.stageIdx++;
        if (this.stageIdx <= Const.StageNum) {
            this.loadGameStage();
        }
        else {
            console.log("通关");
        }
    };
    /** load game stage by index */
    GameScene.prototype.loadGameStage = function () {
        var _this = this;
        // reset
        this.gameStage && this.gameStage.destroyChildren();
        this.gameStage && this.gameStage.destroy();
        this.currBulletNum = 0;
        // load stage
        var satgeResUrl = Const.StageResUrl + this.stageIdx + ".lh";
        Laya.Sprite3D.load(satgeResUrl, Laya.Handler.create(this, function (res) {
            _this.gameStage = _this.scene3D.addChild(res);
            // set pos
            _this.gameStage.transform.localPosition = Const.StageInitPos.clone();
            _this.gameStage.transform.localRotationEuler = Const.StageInitRot.clone();
            _this.gameStage.transform.localScale = Const.StageInitScale.clone();
            // destroy animator component: 不然会约束物理碰撞效果
            _this.gameStage.getComponent(Laya.Animator).destroy();
            var child;
            for (var i = 0; i < _this.gameStage.numChildren; i++) {
                child = _this.gameStage.getChildAt(i);
                /** target object */
                if (child.name.search("Obstacle") >= 0) {
                    console.log(child.name + " to target");
                    // add scipt
                    var targetScript = child.addComponent(Target_1.default);
                    // set type
                    if (child.name.search("Glass") >= 0) {
                        targetScript.setType(2 /* GLASS */);
                    }
                    else {
                        targetScript.setType(1 /* DEFAULT */);
                    }
                }
                /** stand_box */
                else if (child.name.search("Cube") >= 0) {
                    console.log(child.name + " to stand");
                    child.name = "stand";
                    // add collider
                    var rigid = child.addComponent(Laya.PhysicsCollider);
                    var boundingBox = child.meshFilter.sharedMesh.boundingBox.clone();
                    var sizeX = boundingBox.max.x - boundingBox.min.x;
                    var sizeY = boundingBox.max.y - boundingBox.min.y;
                    var sizeZ = boundingBox.max.z - boundingBox.min.z;
                    rigid.colliderShape = new Laya.BoxColliderShape(sizeX, sizeY, sizeZ);
                    // add script
                    // 获取台子boundbox，添加脚本，需要兼容多个平台时胜利判断, & mesh collider shape碰撞抖动问题 todo <=======================
                    child.addComponent(Stand_1.default);
                }
                /** stand_cylinder */
                else if (child.name.search("Cylinder") >= 0) {
                    console.log(child.name + " to stand");
                    child.name = "stand";
                    // add collider
                    var rigid = child.addComponent(Laya.PhysicsCollider);
                    var colliderShape = new Laya.MeshColliderShape();
                    colliderShape.mesh = child.meshFilter.sharedMesh;
                    rigid.colliderShape = colliderShape;
                }
                /** Rotator */
                else if (child.name.search("Rotator") >= 0) {
                    console.log(child.name + " to rotator");
                    // add script
                    var rotator = child.addComponent(Rotator_1.default);
                    var moveType = "move_left";
                    if (child.name.search("Rotator.\\\(1\\\)_0") >= 0) {
                        moveType = "move_right";
                    }
                    else if (child.name.search("Rotator.\\\(2\\\)_0") >= 0) {
                        moveType = "move_up";
                    }
                    else if (child.name.search("Rotator.\\\(3\\\)_0") >= 0) {
                        moveType = "move_down";
                    }
                    rotator.setMoveType(moveType);
                    child.name = "rotator";
                }
                else {
                    child.destroy();
                }
            }
        }));
    };
    /** mouse click event: shoot a bullet */
    GameScene.prototype.onClick = function () {
        // update
        this.currBulletNum++;
        // play shoot animation
        this.shootTime = Const.PlayerShootLifeTime;
        this.playerAni.speed = 1;
        // get ray
        this.mousePoint.x = Laya.MouseManager.instance.mouseX;
        this.mousePoint.y = Laya.MouseManager.instance.mouseY;
        this.camera.viewportPointToRay(this.mousePoint, this.ray);
        // get bullet shooting direction
        if (this.scene3D.physicsSimulation.rayCast(this.ray, this.hitResult, 30)) {
            // direction vector: [bullet init point] to [mouse hit point]
            Laya.Vector3.subtract(this.hitResult.point, Const.BulletInitPos, this.bulletDirection);
        }
        else {
            // direction vector: [camera point] to [mouse hit point]
            var aV3 = new Laya.Vector3();
            // ray direction scale: to depth scaleZ
            var scaleV = this.camera.farPlane;
            scaleV = 20;
            Laya.Vector3.scale(this.ray.direction, scaleV, aV3);
            // direction vector: [bullet init point] to [camera point]
            var bV3 = new Laya.Vector3();
            Laya.Vector3.subtract(this.camera.transform.position, Const.BulletInitPos, bV3);
            // direction vector: [bullet init point] to [mouse hit point]
            Laya.Vector3.add(aV3, bV3, this.bulletDirection);
        }
        Laya.Vector3.normalize(this.bulletDirection, this.bulletDirection);
        this.bulletVelocity = 50;
        Laya.Vector3.scale(this.bulletDirection, this.bulletVelocity, this.bulletDirection);
        // generate bullet
        var bullet = this._bullet.clone();
        bullet.name = "bullet";
        this.scene3D.addChild(bullet);
        var bulletRigid = bullet.getComponent(Laya.Rigidbody3D);
        bulletRigid.linearVelocity = this.bulletDirection.clone();
        bullet.addComponent(Bullet_1.default);
    };
    return GameScene;
}(layaMaxUI_1.ui.game.GameSceneUI));
exports.default = GameScene;
},{"../Const":3,"../component/Bullet":4,"../component/Rotator":5,"../component/Stand":6,"../component/Target":7,"./../../ui/layaMaxUI":9}],9:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Scene = Laya.Scene;
var REG = Laya.ClassUtils.regClass;
var ui;
(function (ui) {
    var game;
    (function (game) {
        var GameSceneUI = /** @class */ (function (_super) {
            __extends(GameSceneUI, _super);
            function GameSceneUI() {
                return _super.call(this) || this;
            }
            GameSceneUI.prototype.createChildren = function () {
                _super.prototype.createChildren.call(this);
                this.loadScene("game/GameScene");
            };
            return GameSceneUI;
        }(Scene));
        game.GameSceneUI = GameSceneUI;
        REG("ui.game.GameSceneUI", GameSceneUI);
    })(game = ui.game || (ui.game = {}));
})(ui = exports.ui || (exports.ui = {}));
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6L1Byb2dyYW0gRmlsZXMvTGF5YUFpci9MYXlhQWlySURFX2JldGEvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcudHMiLCJzcmMvTWFpbi50cyIsInNyYy9zY3JpcHQvQ29uc3QudHMiLCJzcmMvc2NyaXB0L2NvbXBvbmVudC9CdWxsZXQudHMiLCJzcmMvc2NyaXB0L2NvbXBvbmVudC9Sb3RhdG9yLnRzIiwic3JjL3NjcmlwdC9jb21wb25lbnQvU3RhbmQudHMiLCJzcmMvc2NyaXB0L2NvbXBvbmVudC9UYXJnZXQudHMiLCJzcmMvc2NyaXB0L3J1bnRpbWUvR2FtZVNjZW5lLnRzIiwic3JjL3VpL2xheWFNYXhVSS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNWQSxnR0FBZ0c7QUFDaEcsd0RBQWtEO0FBQ2xEOztFQUVFO0FBQ0Y7SUFhSTtJQUFjLENBQUM7SUFDUixlQUFJLEdBQVg7UUFDSSxJQUFJLEdBQUcsR0FBYSxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztRQUM3QyxHQUFHLENBQUMsNkJBQTZCLEVBQUMsbUJBQVMsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFoQk0sZ0JBQUssR0FBUSxHQUFHLENBQUM7SUFDakIsaUJBQU0sR0FBUSxJQUFJLENBQUM7SUFDbkIsb0JBQVMsR0FBUSxZQUFZLENBQUM7SUFDOUIscUJBQVUsR0FBUSxNQUFNLENBQUM7SUFDekIsaUJBQU0sR0FBUSxLQUFLLENBQUM7SUFDcEIsaUJBQU0sR0FBUSxNQUFNLENBQUM7SUFDckIscUJBQVUsR0FBSyxzQkFBc0IsQ0FBQztJQUN0QyxvQkFBUyxHQUFRLEVBQUUsQ0FBQztJQUNwQixnQkFBSyxHQUFTLEtBQUssQ0FBQztJQUNwQixlQUFJLEdBQVMsSUFBSSxDQUFDO0lBQ2xCLHVC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dXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbmltcG9ydCBHYW1lU2NlbmUgZnJvbSBcIi4vc2NyaXB0L3J1bnRpbWUvR2FtZVNjZW5lXCJcclxuLypcclxuKiDmuLjmiI/liJ3lp4vljJbphY3nva47XHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWd7XHJcbiAgICBzdGF0aWMgd2lkdGg6bnVtYmVyPTY0MDtcclxuICAgIHN0YXRpYyBoZWlnaHQ6bnVtYmVyPTExMzY7XHJcbiAgICBzdGF0aWMgc2NhbGVNb2RlOnN0cmluZz1cImZpeGVkd2lkdGhcIjtcclxuICAgIHN0YXRpYyBzY3JlZW5Nb2RlOnN0cmluZz1cIm5vbmVcIjtcclxuICAgIHN0YXRpYyBhbGlnblY6c3RyaW5nPVwidG9wXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25IOnN0cmluZz1cImxlZnRcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cImdhbWUvR2FtZVNjZW5lLnNjZW5lXCI7XHJcbiAgICBzdGF0aWMgc2NlbmVSb290OnN0cmluZz1cIlwiO1xyXG4gICAgc3RhdGljIGRlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgc3RhdDpib29sZWFuPXRydWU7XHJcbiAgICBzdGF0aWMgcGh5c2ljc0RlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgZXhwb3J0U2NlbmVUb0pzb246Ym9vbGVhbj10cnVlO1xyXG4gICAgY29uc3RydWN0b3IoKXt9XHJcbiAgICBzdGF0aWMgaW5pdCgpe1xyXG4gICAgICAgIHZhciByZWc6IEZ1bmN0aW9uID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG4gICAgICAgIHJlZyhcInNjcmlwdC9ydW50aW1lL0dhbWVTY2VuZS50c1wiLEdhbWVTY2VuZSk7XHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy5pbml0KCk7IiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdC8v5YW85a655b6u5L+h5LiN5pSv5oyB5Yqg6L29c2NlbmXlkI7nvIDlnLrmma9cclxuXHRcdExheWEuVVJMLmV4cG9ydFNjZW5lVG9Kc29uID0gR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbjtcclxuXHJcblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuXHRcdGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgJiYgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0pIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdLmVuYWJsZSgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcclxuXHRcdExheWEuYWxlcnRHbG9iYWxFcnJvciA9IHRydWU7XHJcblxyXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcclxuXHRcdExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcblx0fVxyXG5cclxuXHRvblZlcnNpb25Mb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+a/gOa0u+Wkp+Wwj+WbvuaYoOWwhO+8jOWKoOi9veWwj+WbvueahOaXtuWAme+8jOWmguaenOWPkeeOsOWwj+WbvuWcqOWkp+WbvuWQiOmbhumHjOmdou+8jOWImeS8mOWFiOWKoOi9veWkp+WbvuWQiOmbhu+8jOiAjOS4jeaYr+Wwj+WbvlxyXG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcclxuXHR9XHJcblxyXG5cdG9uQ29uZmlnTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdEdhbWVDb25maWcuc3RhcnRTY2VuZSAmJiBMYXlhLlNjZW5lLm9wZW4oR2FtZUNvbmZpZy5zdGFydFNjZW5lKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiLyoqIHZlcnNpb24gKi9cclxuZXhwb3J0IGNvbnN0IFZFUlNJT04gPSBcIjEuMC4wXCI7XHJcblxyXG4vKiogcGFnZXMgKi9cclxuZXhwb3J0IGNvbnN0IFVSTF9Ib21lVmlldzogc3RyaW5nID0gXCJob21lL0hvbWVWaWV3LnNjZW5lXCI7XHJcbmV4cG9ydCBjb25zdCBVUkxfR2FtZVNjZW5lOiBzdHJpbmcgPSBcImdhbWUvR2FtZVNjZW5lLnNjZW5lXCI7XHJcbmV4cG9ydCBjb25zdCBVUkxfT3ZlclZpZXc6IHN0cmluZyA9IFwib3Zlci9PdmVyVmlldy5zY2VuZVwiO1xyXG5leHBvcnQgY29uc3QgVVJMX1Jldml2ZVZpZXc6IHN0cmluZyA9IFwiZGlhbG9nL1Jldml2ZVZpZXcuc2NlbmVcIjtcclxuXHJcbi8qKiBjYW1lcmEgKi9cclxuZXhwb3J0IGNvbnN0IENhbWVyYUluaXRQb3M6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgMC41LCAwKTtcclxuZXhwb3J0IGNvbnN0IENhbWVyYUluaXRSb3RFdWxlcjogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygwLCAwLCAwKTtcclxuXHJcbi8qKiBkaXJlY3Rpb25hbCBsaWdodCAqL1xyXG5leHBvcnQgY29uc3QgTGlnaHRJbml0UG9zOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKC0zLCA1LCAwKTtcclxuZXhwb3J0IGNvbnN0IExpZ2h0SW5pdFJvdEV1bGVyOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKC00NSwgLTMwLCAwKTtcclxuXHJcbi8qKiBnYW1lIHN0YWdlICovXHJcbmV4cG9ydCBjb25zdCBTdGFnZVJlc1VybDogc3RyaW5nID0gXCJyZXMvc3RhZ2UvXCI7XHJcbmV4cG9ydCBjb25zdCBTdGFnZUluaXRQb3M6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgMCwgMCk7XHJcbmV4cG9ydCBjb25zdCBTdGFnZUluaXRSb3Q6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgMTgwLCAwKTtcclxuZXhwb3J0IGNvbnN0IFN0YWdlSW5pdFNjYWxlOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKDQwLCA0MCwgNDApO1xyXG5leHBvcnQgY29uc3QgU3RhZ2VOdW06IG51bWJlciA9IDIwO1xyXG4vLyB3aW5uaW5nIGNoZWNrIGZyYW1lXHJcbmV4cG9ydCBjb25zdCBXaW5DaGVja1RpbWU6IG51bWJlciA9IDEyMDtcclxuXHJcbi8qKiBjdWJlICovXHJcbmV4cG9ydCBjb25zdCBlbnVtIFRhcmdldFR5cGUge1xyXG4gICAgREVGQVVMVCA9IDEsXHJcbiAgICBHTEFTUyA9IDIsXHJcbiAgICBUTlQgPSAzXHJcbn1cclxuXHJcbi8qKiBnbGFzcyAqL1xyXG5leHBvcnQgY29uc3QgR2xhc3NCcm9rZW5WZWxvY2l0eTogbnVtYmVyID0gMztcclxuXHJcbi8qKiBvYnN0YWNsZSBwaWVjZSAqL1xyXG5leHBvcnQgY29uc3QgUGllY2VSZXNVcmw6IHN0cmluZyA9IFwicmVzL2N1YmVfcGllY2UubG1cIjtcclxuZXhwb3J0IGNvbnN0IFBpZWNlc051bTogbnVtYmVyID0gMztcclxuZXhwb3J0IGNvbnN0IFBpZWNlc0Jyb2tlblRpbWU6IG51bWJlciA9IDEyMDtcclxuXHJcbi8qKiBidWxsZXQgKi9cclxuZXhwb3J0IGNvbnN0IEJ1bGxldFJlc1VybDogc3RyaW5nID0gXCJyZXMvYnVsbGV0LmxoXCI7XHJcbmV4cG9ydCBjb25zdCBCdWxsZXRJbml0UG9zOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIC01KTtcclxuZXhwb3J0IGNvbnN0IEJ1bGxldEluaXRSb3Q6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoMTgwLCAwLCAwKTtcclxuZXhwb3J0IGNvbnN0IEJ1bGxldFJhZGl1czogbnVtYmVyID0gMC4xNTtcclxuXHJcbi8qKiBwbGF5ZXIgKi9cclxuZXhwb3J0IGNvbnN0IFBsYXllclJlc1VybDogc3RyaW5nID0gXCJyZXMvaHVtYW4ubGhcIjtcclxuZXhwb3J0IGNvbnN0IFBsYXllckluaXRQb3M6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgMCwgLTEpO1xyXG5leHBvcnQgY29uc3QgUGxheWVySW5pdFJvdDogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMyg5MCwgMTY4LCAwKTtcclxuZXhwb3J0IGNvbnN0IFBsYXllckluaXRTY2FsZTogTGF5YS5WZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygyMCwgMjAsIDIwKTtcclxuZXhwb3J0IGNvbnN0IFBsYXllclNob290TGlmZVRpbWU6IG51bWJlciA9IDEwO1xyXG4iLCJcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnVsbGV0U2NyaXB0IGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XHJcbiAgICBwcml2YXRlIGJ1bGxldDogTGF5YS5NZXNoU3ByaXRlM0Q7XHJcblxyXG4gICAgcHJpdmF0ZSBsaWZldGltZTogbnVtYmVyID0gMTIwO1xyXG5cclxuICAgIHByaXZhdGUgY29sbGlzaW9uQmxhY2tMaXN0OiBzdHJpbmdbXSA9IFtcImJ1bGxldFwiLCBcInBsYXllclwiXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQXdha2UoKSB7XHJcbiAgICAgICAgdGhpcy5idWxsZXQgPSB0aGlzLm93bmVyIGFzIExheWEuTWVzaFNwcml0ZTNEO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlKCkge1xyXG4gICAgICAgIC8vIHVwZGF0ZSBsaWZldGltZVxyXG4gICAgICAgIHRoaXMubGlmZXRpbWUtLTtcclxuICAgICAgICBpZiAodGhpcy5saWZldGltZSA8IDApIHtcclxuICAgICAgICAgICAgTGF5YS50aW1lci5mcmFtZU9uY2UoMSwgdGhpcywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idWxsZXQucmVtb3ZlU2VsZigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBvbkNvbGxpc2lvbkVudGVyKGNvbGxpc2lvbjogTGF5YS5Db2xsaXNpb24pIHtcclxuICAgIC8vIH1cclxufSIsImltcG9ydCAqIGFzIENvbnN0IGZyb20gXCIuLi9Db25zdFwiO1xyXG5pbXBvcnQgR2FtZVNjZW5lIGZyb20gXCIuLi9ydW50aW1lL0dhbWVTY2VuZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm90YXRvciBleHRlbmRzIExheWEuU2NyaXB0M0Qge1xyXG4gICAgcHJpdmF0ZSBzdGFnZUlkeDogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgcm90YXRvcjogTGF5YS5NZXNoU3ByaXRlM0Q7XHJcblxyXG4gICAgcHJpdmF0ZSBzaXplWDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzaXplWTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzaXplWjogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgbW92ZVR5cGU6IHN0cmluZztcclxuICAgIHByaXZhdGUgTWF4TW92ZVRpbWVzOiBudW1iZXIgPSAzMDtcclxuICAgIHByaXZhdGUgbW92ZVRpbWVzOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Bd2FrZSgpIHtcclxuICAgICAgICAvLyByZWNvcmQgZ2FtZSBzdGFnZSBpbmRleFxyXG4gICAgICAgIHRoaXMuc3RhZ2VJZHggPSBHYW1lU2NlbmUuaW5zdGFuY2Uuc3RhZ2VJZHg7XHJcbiAgICAgICAgLy8gZ2V0IHNwcml0ZVxyXG4gICAgICAgIHRoaXMucm90YXRvciA9IHRoaXMub3duZXIgYXMgTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICAgICAgLy8gYWRkIGNvbGxpZGVyXHJcbiAgICAgICAgbGV0IGNvbGxpZGVyOiBMYXlhLlBoeXNpY3NDb2xsaWRlciA9IHRoaXMucm90YXRvci5hZGRDb21wb25lbnQoTGF5YS5QaHlzaWNzQ29sbGlkZXIpO1xyXG4gICAgICAgIGxldCBjb2xsaWRlclNoYXBlOiBMYXlhLk1lc2hDb2xsaWRlclNoYXBlID0gbmV3IExheWEuTWVzaENvbGxpZGVyU2hhcGUoKTtcclxuICAgICAgICBjb2xsaWRlclNoYXBlLm1lc2ggPSB0aGlzLnJvdGF0b3IubWVzaEZpbHRlci5zaGFyZWRNZXNoO1xyXG4gICAgICAgIGNvbGxpZGVyLmNvbGxpZGVyU2hhcGUgPSBjb2xsaWRlclNoYXBlO1xyXG4gICAgICAgIC8vIGdldCBzaXplXHJcbiAgICAgICAgbGV0IGJvdW5kaW5nQm94OiBMYXlhLkJvdW5kQm94ID0gdGhpcy5yb3RhdG9yLm1lc2hGaWx0ZXIuc2hhcmVkTWVzaC5ib3VuZGluZ0JveC5jbG9uZSgpO1xyXG4gICAgICAgIHRoaXMuc2l6ZVggPSBib3VuZGluZ0JveC5tYXgueCAtIGJvdW5kaW5nQm94Lm1pbi54O1xyXG4gICAgICAgIHRoaXMuc2l6ZVkgPSBib3VuZGluZ0JveC5tYXgueSAtIGJvdW5kaW5nQm94Lm1pbi55O1xyXG4gICAgICAgIHRoaXMuc2l6ZVogPSBib3VuZGluZ0JveC5tYXgueiAtIGJvdW5kaW5nQm94Lm1pbi56O1xyXG5cclxuICAgICAgICB0aGlzLnNpemVYICo9IDM7XHJcbiAgICAgICAgdGhpcy5zaXplWSAqPSAzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE1vdmVUeXBlKG1vdmVUeXBlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLm1vdmVUeXBlID0gbW92ZVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGUoKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgc3RhZ2VcclxuICAgICAgICBpZiAodGhpcy5zdGFnZUlkeCAhPT0gR2FtZVNjZW5lLmluc3RhbmNlLnN0YWdlSWR4KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicm90YXRvciBkZXN0cm95ZWQuXCIpXHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm1vdmVUaW1lcyA9ICh0aGlzLm1vdmVUaW1lcyArIDEpICUgKHRoaXMuTWF4TW92ZVRpbWVzICogMik7XHJcbiAgICAgICAgdmFyIGZsYWcgPSBNYXRoLmZsb29yKCh0aGlzLm1vdmVUaW1lcyAvIHRoaXMuTWF4TW92ZVRpbWVzKSAlIDIpO1xyXG4gICAgICAgIGlmICh0aGlzLm1vdmVUeXBlID09PSBcIm1vdmVfbGVmdFwiKSB7XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7IHRoaXMucm90YXRvci50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblggLT0gdGhpcy5zaXplWCAvIHRoaXMuTWF4TW92ZVRpbWVzOyB9XHJcbiAgICAgICAgICAgIGVsc2UgeyB0aGlzLnJvdGF0b3IudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25YICs9IHRoaXMuc2l6ZVggLyB0aGlzLk1heE1vdmVUaW1lczsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLm1vdmVUeXBlID09PSBcIm1vdmVfcmlnaHRcIikge1xyXG4gICAgICAgICAgICBpZiAoZmxhZykgeyB0aGlzLnJvdGF0b3IudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25YICs9IHRoaXMuc2l6ZVggLyB0aGlzLk1heE1vdmVUaW1lczsgfVxyXG4gICAgICAgICAgICBlbHNlIHsgdGhpcy5yb3RhdG9yLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWCAtPSB0aGlzLnNpemVYIC8gdGhpcy5NYXhNb3ZlVGltZXM7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5tb3ZlVHlwZSA9PT0gXCJtb3ZlX3VwXCIpIHtcclxuICAgICAgICAgICAgaWYgKGZsYWcpIHsgdGhpcy5yb3RhdG9yLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWSArPSB0aGlzLnNpemVZIC8gdGhpcy5NYXhNb3ZlVGltZXM7IH1cclxuICAgICAgICAgICAgZWxzZSB7IHRoaXMucm90YXRvci50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblkgLT0gdGhpcy5zaXplWSAvIHRoaXMuTWF4TW92ZVRpbWVzOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubW92ZVR5cGUgPT09IFwibW92ZV9kb3duXCIpIHtcclxuICAgICAgICAgICAgaWYgKGZsYWcpIHsgdGhpcy5yb3RhdG9yLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWSAtPSB0aGlzLnNpemVZIC8gdGhpcy5NYXhNb3ZlVGltZXM7IH1cclxuICAgICAgICAgICAgZWxzZSB7IHRoaXMucm90YXRvci50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblkgKz0gdGhpcy5zaXplWSAvIHRoaXMuTWF4TW92ZVRpbWVzOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGVsc2UgaWYgKHRoaXMubW92ZVR5cGUgPT09IFwicm90YXRlX2xlZnRcIikge1xyXG4gICAgICAgIC8vICAgICB0aGlzLnJvdGF0b3IudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclkgPSAodGhpcy5yb3RhdG9yLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJZICsgMSkgJSAzNjA7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGVsc2UgaWYgKHRoaXMubW92ZVR5cGUgPT09IFwicm90YXRlX3JpZ2h0XCIpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5yb3RhdG9yLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJZID0gKHRoaXMucm90YXRvci50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWSAtIDEpICUgMzYwO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBlbHNlIGlmICh0aGlzLm1vdmVUeXBlID09PSBcInJvdGF0ZV91cFwiKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucm90YXRvci50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWCA9ICh0aGlzLnJvdGF0b3IudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclggKyAxKSAlIDM2MDtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZWxzZSBpZiAodGhpcy5tb3ZlVHlwZSA9PT0gXCJyb3RhdGVfZG93blwiKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucm90YXRvci50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWCA9ICh0aGlzLnJvdGF0b3IudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclggLSAxKSAlIDM2MDtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBDb25zdCBmcm9tIFwiLi4vQ29uc3RcIjtcclxuaW1wb3J0IEdhbWVTY2VuZSBmcm9tIFwiLi4vcnVudGltZS9HYW1lU2NlbmVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YW5kIGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XHJcbiAgICBwcml2YXRlIHN0YW5kOiBMYXlhLk1lc2hTcHJpdGUzRDtcclxuXHJcbiAgICBwcml2YXRlIHdpbkNvdW50OiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHByaXZhdGUgY29sbGlzaW9uQmxhY2tMaXN0OiBzdHJpbmdbXSA9IFtcInN0YW5kXCIsIFwiYnVsbGV0XCIsIFwicGllY2VcIl07XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkF3YWtlKCkge1xyXG4gICAgICAgIHRoaXMuc3RhbmQgPSB0aGlzLm93bmVyIGFzIExheWEuTWVzaFNwcml0ZTNEO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlKCkge1xyXG4gICAgICAgIC8qKiB3aW4gY2hlY2sgKi9cclxuICAgICAgICB0aGlzLndpbkNvdW50Kys7XHJcbiAgICAgICAgaWYgKHRoaXMud2luQ291bnQgPiBDb25zdC5XaW5DaGVja1RpbWUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJZb3Ugd2luLiBTdGFnZTogXCIgKyBHYW1lU2NlbmUuaW5zdGFuY2Uuc3RhZ2VJZHgpO1xyXG4gICAgICAgICAgICBHYW1lU2NlbmUuaW5zdGFuY2UubmV4dFN0YWdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNvbGxpc2lvblN0YXkoY29sbGlzaW9uOiBMYXlhLkNvbGxpc2lvbik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbGxpc2lvbkJsYWNrTGlzdC5pbmRleE9mKGNvbGxpc2lvbi5vdGhlci5vd25lci5uYW1lKSA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy53aW5Db3VudCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0ICogYXMgQ29uc3QgZnJvbSBcIi4uL0NvbnN0XCI7XHJcbmltcG9ydCBHYW1lU2NlbmUgZnJvbSBcIi4uL3J1bnRpbWUvR2FtZVNjZW5lXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYXJnZXQgZXh0ZW5kcyBMYXlhLlNjcmlwdDNEIHtcclxuICAgIHByaXZhdGUgc3RhZ2VJZHg6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIHRhcmdldDogTGF5YS5NZXNoU3ByaXRlM0Q7XHJcblxyXG4gICAgcHJpdmF0ZSB0eXBlOiBudW1iZXIgPSBDb25zdC5UYXJnZXRUeXBlLkRFRkFVTFQ7XHJcblxyXG4gICAgcHJpdmF0ZSBzaXplWDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzaXplWTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzaXplWjogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgY29sbGlzaW9uQmxhY2tMaXN0OiBzdHJpbmdbXSA9IFtcInN0YW5kXCIsIFwicm90YXRvclwiXTtcclxuXHJcbiAgICAvKiogdGFyZ2V0IG9iamVjdCBwaWVjZXMgKi9cclxuICAgIHByaXZhdGUgcGllY2VzTGlzdDogTGF5YS5NZXNoU3ByaXRlM0RbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Bd2FrZSgpIHtcclxuICAgICAgICAvLyByZWNvcmQgZ2FtZSBzdGFnZSBpbmRleFxyXG4gICAgICAgIHRoaXMuc3RhZ2VJZHggPSBHYW1lU2NlbmUuaW5zdGFuY2Uuc3RhZ2VJZHg7XHJcbiAgICAgICAgLy8gZ2V0IHNwcml0ZVxyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5vd25lciBhcyBMYXlhLk1lc2hTcHJpdGUzRDtcclxuICAgICAgICB0aGlzLnNldFJpZ2lkYm9keSgpO1xyXG4gICAgICAgIHRoaXMuaW5pdFBpZWNlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ29sbGlzaW9uRW50ZXIoY29sbGlzaW9uOiBMYXlhLkNvbGxpc2lvbik6IHZvaWQge1xyXG4gICAgICAgIGxldCBvdGhlcjogTGF5YS5NZXNoU3ByaXRlM0QgPSBjb2xsaXNpb24ub3RoZXIub3duZXIgYXMgTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICAgICAgLy8gaWYgKHRoaXMuY29sbGlzaW9uQmxhY2tMaXN0LmluZGV4T2Yob3RoZXIubmFtZSkgPCAwKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gQ29uc3QuVGFyZ2V0VHlwZS5HTEFTUykge1xyXG4gICAgICAgICAgICAvLyDnm7jlr7npgJ/luqbpq5jlj6/lh7vnoo5cclxuICAgICAgICAgICAgbGV0IHZlbG9jaXR5OiBMYXlhLlZlY3RvcjMgPSAodGhpcy50YXJnZXQuZ2V0Q29tcG9uZW50KExheWEuUmlnaWRib2R5M0QpIGFzIExheWEuUmlnaWRib2R5M0QpLmxpbmVhclZlbG9jaXR5LmNsb25lKCk7XHJcbiAgICAgICAgICAgIGxldCB2ZWxvY2l0eU90aGVyOiBMYXlhLlZlY3RvcjMgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgICAgICAgICAvLyBub3QgcGxheWZvcm1cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sbGlzaW9uQmxhY2tMaXN0LmluZGV4T2Yob3RoZXIubmFtZSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eU90aGVyID0gKG90aGVyLmdldENvbXBvbmVudChMYXlhLlJpZ2lkYm9keTNEKSBhcyBMYXlhLlJpZ2lkYm9keTNEKS5saW5lYXJWZWxvY2l0eS5jbG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIExheWEuVmVjdG9yMy5zdWJ0cmFjdCh2ZWxvY2l0eSwgdmVsb2NpdHlPdGhlciwgdmVsb2NpdHkpO1xyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHlWYWx1ZTogbnVtYmVyID0gTWF0aC5zcXJ0KE1hdGgucG93KHZlbG9jaXR5LngsIDIpICsgTWF0aC5wb3codmVsb2NpdHkueSwgMikgKyBNYXRoLnBvdyh2ZWxvY2l0eS56LCAyKSk7XHJcbiAgICAgICAgICAgIGlmICh2ZWxvY2l0eVZhbHVlID49IENvbnN0LkdsYXNzQnJva2VuVmVsb2NpdHkpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuaXNIaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5icm9rZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGUoKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgc3RhZ2VcclxuICAgICAgICBpZiAodGhpcy5zdGFnZUlkeCAhPT0gR2FtZVNjZW5lLmluc3RhbmNlLnN0YWdlSWR4KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBwaHlzaWNzIGVuZ2luZSBidWcgZGV0ZWN0aW5nIGFuZCBmaXhpbmdcclxuICAgICAgICB0aGlzLnBoeXNpY3NfZW5naW5lX2J1Z19maXhpbmcoKTtcclxuXHJcbiAgICAgICAgLy8gLy8gaGl0IGhhbmRsaW5nXHJcbiAgICAgICAgLy8gaWYgKHRoaXMuaXNIaXQpIHtcclxuICAgICAgICAvLyAgICAgaWYgKHRoaXMudHlwZSA9PT0gQ29uc3QuVGFyZ2V0VHlwZS5HTEFTUykge1xyXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5icm9rZW4oKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiogcGh5c2ljcyBlbmdpbmUgYnVnIGRldGVjdGluZyBhbmQgZml4aW5nXHJcbiAgICAgKiAg5byV5pOOYnVn77ya5ae/5oCB56iz5a6a5oOF5Ya15LiL77yM5p+Q5Liq54mp5L2T5L2c55So5Yqb5pa55ZCR77yI5aaC6YeN5Yqb5pe255qE5bqV5LiL77yJ55qE56Kw5pKe54mp5L2T5b+r6YCf5raI5aSx77yMXHJcbiAgICAgKiAg6ICM5q2k6L+H56iL5Lit55u45LqS5L2c55So5b2x5ZON6L+H5bCP5a+86Ie06Ieq6Lqr5ae/5oCB5rKh5pyJ5Y+Y5YyW5pe277yM5byV5pOO5Lya6Ieq5Yqo5bCG6K+l54mp5L2T55qE5Yia5L2T6Z2e5r+A5rS777yM5LuO6ICM5a+86Ie06IW+56m6546w6LGh77yMXHJcbiAgICAgKiAg5aKe5aSn54mp5L2T6Ze055u45LqS5L2c55So5Yqb77yI5aaC5pGp5pOm57O75pWw77yJ5Y+v5YeP5bCR6K+l5oOF5Ya15Y+R55Sf77yM5L2G5LiN6IO95p2c57ud77yMXHJcbiAgICAgKiAg5pWF5Zyo5q2k5qOA5rWL6K+l5oOF5Ya15bm25a+55Yia5L2T6ZSA5q+B6YeN5bu6XHJcbiAgICAgKiAqL1xyXG4gICAgcHJpdmF0ZSBwaHlzaWNzX2VuZ2luZV9idWdfZml4aW5nKCkge1xyXG4gICAgICAgIGxldCByaWdpZGJvZHk6IExheWEuUmlnaWRib2R5M0QgPSB0aGlzLnRhcmdldC5nZXRDb21wb25lbnQoTGF5YS5SaWdpZGJvZHkzRCkgYXMgTGF5YS5SaWdpZGJvZHkzRDtcclxuICAgICAgICBpZiAocmlnaWRib2R5LmlzQWN0aXZlID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHJpZ2lkYm9keS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UmlnaWRib2R5KCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGh5c2ljc19lbmdpbmVfYnVnX2ZpeGluZzogUmVzZXQgcmlnaWRib2R5LlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHNldCBtYXRlcmlhbCBieSB0eXBlICovXHJcbiAgICBzZXRUeXBlKHR5cGU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gQ29uc3QuVGFyZ2V0VHlwZS5HTEFTUykge1xyXG4gICAgICAgICAgICBsZXQgbWF0OiBMYXlhLkJsaW5uUGhvbmdNYXRlcmlhbCA9IG5ldyBMYXlhLkJsaW5uUGhvbmdNYXRlcmlhbCgpO1xyXG4gICAgICAgICAgICBtYXQucmVuZGVyTW9kZSA9IExheWEuQmxpbm5QaG9uZ01hdGVyaWFsLlJFTkRFUk1PREVfVFJBTlNQQVJFTlQ7XHJcbiAgICAgICAgICAgIG1hdC5hbGJlZG9Db2xvciA9IG5ldyBMYXlhLlZlY3RvcjQoMC43LCAwLjcsIDEsIDAuNyk7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Lm1lc2hSZW5kZXJlci5tYXRlcmlhbCA9IG1hdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHNldCByaWdpZGJvZHkgKi9cclxuICAgIHByaXZhdGUgc2V0UmlnaWRib2R5KCkge1xyXG4gICAgICAgIGxldCByaWdpZGJvZHk6IExheWEuUmlnaWRib2R5M0QgPSB0aGlzLnRhcmdldC5hZGRDb21wb25lbnQoTGF5YS5SaWdpZGJvZHkzRCk7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0Lm5hbWUuc2VhcmNoKFwiQ3ViZVwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIGxldCBib3VuZGluZ0JveDogTGF5YS5Cb3VuZEJveCA9IHRoaXMudGFyZ2V0Lm1lc2hGaWx0ZXIuc2hhcmVkTWVzaC5ib3VuZGluZ0JveC5jbG9uZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNpemVYID0gYm91bmRpbmdCb3gubWF4LnggLSBib3VuZGluZ0JveC5taW4ueDtcclxuICAgICAgICAgICAgdGhpcy5zaXplWSA9IGJvdW5kaW5nQm94Lm1heC55IC0gYm91bmRpbmdCb3gubWluLnk7XHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZVogPSBib3VuZGluZ0JveC5tYXgueiAtIGJvdW5kaW5nQm94Lm1pbi56O1xyXG4gICAgICAgICAgICByaWdpZGJvZHkuY29sbGlkZXJTaGFwZSA9IG5ldyBMYXlhLkJveENvbGxpZGVyU2hhcGUodGhpcy5zaXplWCwgdGhpcy5zaXplWSwgdGhpcy5zaXplWik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgY29sbGlkZXJTaGFwZTogTGF5YS5NZXNoQ29sbGlkZXJTaGFwZSA9IG5ldyBMYXlhLk1lc2hDb2xsaWRlclNoYXBlKCk7XHJcbiAgICAgICAgICAgIGNvbGxpZGVyU2hhcGUubWVzaCA9IHRoaXMudGFyZ2V0Lm1lc2hGaWx0ZXIuc2hhcmVkTWVzaDtcclxuICAgICAgICAgICAgcmlnaWRib2R5LmNvbGxpZGVyU2hhcGUgPSBjb2xsaWRlclNoYXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFBoeXNpY3NQYXJhbSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBzZXQgcGh5c2ljcyBwYXJhbSAqL1xyXG4gICAgcHJpdmF0ZSBzZXRQaHlzaWNzUGFyYW0oKSB7XHJcbiAgICAgICAgbGV0IHJpZ2lkYm9keTogTGF5YS5SaWdpZGJvZHkzRCA9IHRoaXMudGFyZ2V0LmdldENvbXBvbmVudChMYXlhLlJpZ2lkYm9keTNEKTtcclxuICAgICAgICByaWdpZGJvZHkuaXNLaW5lbWF0aWMgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy50eXBlID09PSBDb25zdC5UYXJnZXRUeXBlLkRFRkFVTFQpIHtcclxuICAgICAgICAgICAgcmlnaWRib2R5Lm1hc3MgPSAxMDtcclxuICAgICAgICAgICAgcmlnaWRib2R5LmZyaWN0aW9uID0gMTA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gQ29uc3QuVGFyZ2V0VHlwZS5HTEFTUykge1xyXG4gICAgICAgICAgICByaWdpZGJvZHkubWFzcyA9IDAuMTtcclxuICAgICAgICAgICAgcmlnaWRib2R5LmZyaWN0aW9uID0gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHNldCB0YXJnZXQgYnJva2VuICovXHJcbiAgICBwcml2YXRlIGJyb2tlbigpIHtcclxuICAgICAgICAvLyBwbGF5IGJyb2tlbiBzb3VuZFxyXG5cclxuICAgICAgICAvLyBzaG93IHBpZWNlc1xyXG4gICAgICAgIHRoaXMuZWZmZWN0UGllY2VzQnJva2VuKCk7XHJcbiAgICAgICAgLy8gaGlkZSB0YXJnZXRcclxuICAgICAgICBMYXlhLnRpbWVyLmZyYW1lT25jZSgxLCB0aGlzLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBpbml0IHRhcmdldCBwaWVjZXMgKi9cclxuICAgIHByaXZhdGUgaW5pdFBpZWNlcygpIHtcclxuICAgICAgICBMYXlhLk1lc2gubG9hZChDb25zdC5QaWVjZVJlc1VybCwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCAobWVzaCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcGllY2U6IExheWEuTWVzaFNwcml0ZTNEID0gbmV3IExheWEuTWVzaFNwcml0ZTNEKG1lc2gpO1xyXG5cclxuICAgICAgICAgICAgcGllY2UuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHBpZWNlLm5hbWUgPSBcInBpZWNlXCI7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgbWF0ZXJpYWxcclxuICAgICAgICAgICAgbGV0IG1hdDogTGF5YS5CbGlublBob25nTWF0ZXJpYWwgPSBuZXcgTGF5YS5CbGlublBob25nTWF0ZXJpYWwoKTtcclxuICAgICAgICAgICAgbWF0LnJlbmRlck1vZGUgPSBMYXlhLkJsaW5uUGhvbmdNYXRlcmlhbC5SRU5ERVJNT0RFX1RSQU5TUEFSRU5UO1xyXG4gICAgICAgICAgICBtYXQuYWxiZWRvQ29sb3IgPSBuZXcgTGF5YS5WZWN0b3I0KDAuNywgMC43LCAxLCAwLjcpO1xyXG4gICAgICAgICAgICBwaWVjZS5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgPSBtYXQ7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgcmlnaWRib2R5XHJcbiAgICAgICAgICAgIGxldCBwaWVjZVJpZ2lkOiBMYXlhLlJpZ2lkYm9keTNEID0gcGllY2UuYWRkQ29tcG9uZW50KExheWEuUmlnaWRib2R5M0QpO1xyXG4gICAgICAgICAgICBsZXQgcGllY2VDb2xsaWRlclNoYXBlOiBMYXlhLk1lc2hDb2xsaWRlclNoYXBlID0gbmV3IExheWEuTWVzaENvbGxpZGVyU2hhcGUoKTtcclxuICAgICAgICAgICAgcGllY2VDb2xsaWRlclNoYXBlLm1lc2ggPSBwaWVjZS5tZXNoRmlsdGVyLnNoYXJlZE1lc2g7XHJcbiAgICAgICAgICAgIHBpZWNlUmlnaWQuY29sbGlkZXJTaGFwZSA9IHBpZWNlQ29sbGlkZXJTaGFwZTtcclxuXHJcbiAgICAgICAgICAgIC8vIGFkZCBwaWVjZXMgdG8gc2NlbmVcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBDb25zdC5QaWVjZXNOdW07IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5waWVjZXNMaXN0LnB1c2gocGllY2UuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICBHYW1lU2NlbmUuaW5zdGFuY2Uuc2NlbmUzRC5hZGRDaGlsZCh0aGlzLnBpZWNlc0xpc3RbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBwbGF0eSBlZmZlY3Q6IHRhcmdldCBicm9rZW4gdG8gcGllY2VzICovXHJcbiAgICBwdWJsaWMgZWZmZWN0UGllY2VzQnJva2VuKCkge1xyXG4gICAgICAgIGZvciAobGV0IGlkeCBpbiB0aGlzLnBpZWNlc0xpc3QpIHtcclxuICAgICAgICAgICAgLy8gYWN0aXZlIHBpZWNlc1xyXG4gICAgICAgICAgICB0aGlzLnBpZWNlc0xpc3RbaWR4XS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyBzZXQgc2l6ZSBzY2FsZVxyXG4gICAgICAgICAgICBsZXQgc2NhbGVYOiBudW1iZXIgPSAoTWF0aC5yYW5kb20oKSAqIDAuNSArIDAuNSkgKiAyLjUgKiB0aGlzLnNpemVYICogQ29uc3QuU3RhZ2VJbml0U2NhbGUueDtcclxuICAgICAgICAgICAgbGV0IHNjYWxlWTogbnVtYmVyID0gKE1hdGgucmFuZG9tKCkgKiAwLjUgKyAwLjUpICogMi41ICogdGhpcy5zaXplWSAqIENvbnN0LlN0YWdlSW5pdFNjYWxlLnk7XHJcbiAgICAgICAgICAgIGxldCBzY2FsZVo6IG51bWJlciA9IChNYXRoLnJhbmRvbSgpICogMC41ICsgMC41KSAqIDIuNSAqIHRoaXMuc2l6ZVogKiBDb25zdC5TdGFnZUluaXRTY2FsZS56O1xyXG4gICAgICAgICAgICB0aGlzLnBpZWNlc0xpc3RbaWR4XS50cmFuc2Zvcm0ubG9jYWxTY2FsZSA9IG5ldyBMYXlhLlZlY3RvcjMoc2NhbGVYLCBzY2FsZVksIHNjYWxlWik7XHJcbiAgICAgICAgICAgIC8vIHNldCByb3RcclxuICAgICAgICAgICAgdGhpcy5waWVjZXNMaXN0W2lkeF0udHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclggPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAyICogOTA7XHJcbiAgICAgICAgICAgIHRoaXMucGllY2VzTGlzdFtpZHhdLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJZID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMiAqIDkwO1xyXG4gICAgICAgICAgICB0aGlzLnBpZWNlc0xpc3RbaWR4XS50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWiA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDIgKiA5MDtcclxuICAgICAgICAgICAgLy8gc2V0IHBvc1xyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHk6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoKTtcclxuICAgICAgICAgICAgdmVsb2NpdHkueCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIENvbnN0LkJ1bGxldFJhZGl1cztcclxuICAgICAgICAgICAgdmVsb2NpdHkueSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIENvbnN0LkJ1bGxldFJhZGl1cztcclxuICAgICAgICAgICAgdmVsb2NpdHkueiA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIENvbnN0LkJ1bGxldFJhZGl1cztcclxuICAgICAgICAgICAgdGhpcy5waWVjZXNMaXN0W2lkeF0udHJhbnNmb3JtLnBvc2l0aW9uID0gdGhpcy50YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uLmNsb25lKCk7XHJcbiAgICAgICAgICAgIExheWEuVmVjdG9yMy5hZGQodGhpcy5waWVjZXNMaXN0W2lkeF0udHJhbnNmb3JtLmxvY2FsUG9zaXRpb24sIHZlbG9jaXR5LCB0aGlzLnBpZWNlc0xpc3RbaWR4XS50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIC8vIHNldCB2ZWxvY2l0eSBvZiBwaWVjZXNcclxuICAgICAgICAgICAgTGF5YS5WZWN0b3IzLnNjYWxlKHZlbG9jaXR5LCA1MCwgdmVsb2NpdHkpO1xyXG4gICAgICAgICAgICAodGhpcy5waWVjZXNMaXN0W2lkeF0uZ2V0Q29tcG9uZW50KExheWEuUmlnaWRib2R5M0QpIGFzIExheWEuUmlnaWRib2R5M0QpLmxpbmVhclZlbG9jaXR5ID0gdmVsb2NpdHkuY2xvbmUoKTtcclxuICAgICAgICAgICAgLy8gc2V0IGhpZGluZyBlZmZlY3RcclxuICAgICAgICAgICAgTGF5YS5Ud2Vlbi50byh0aGlzLnBpZWNlc0xpc3RbaWR4XS50cmFuc2Zvcm0ubG9jYWxTY2FsZSwge3g6IHNjYWxlWCAvIDIsIHk6IHNjYWxlWSAvIDIsIHo6IHNjYWxlWiAvIDJ9LCBDb25zdC5QaWVjZXNCcm9rZW5UaW1lIC8gNjAgKiAxMDAwLCBMYXlhLkVhc2UubGluZWFyTm9uZSk7XHJcbiAgICAgICAgICAgIExheWEuVHdlZW4udG8odGhpcy5waWVjZXNMaXN0W2lkeF0ubWVzaFJlbmRlcmVyLm1hdGVyaWFsLCB7YWxiZWRvQ29sb3JBOiAwfSwgQ29uc3QuUGllY2VzQnJva2VuVGltZSAvIDYwICogMTAwMCwgTGF5YS5FYXNlLmxpbmVhck5vbmUsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5waWVjZXNMaXN0WytpZHhdLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IHVpIH0gZnJvbSBcIi4vLi4vLi4vdWkvbGF5YU1heFVJXCI7XHJcbmltcG9ydCAqIGFzIENvbnN0IGZyb20gXCIuLi9Db25zdFwiO1xyXG5pbXBvcnQgQnVsbGV0IGZyb20gXCIuLi9jb21wb25lbnQvQnVsbGV0XCI7XHJcbmltcG9ydCBTdGFuZCBmcm9tIFwiLi4vY29tcG9uZW50L1N0YW5kXCI7XHJcbmltcG9ydCBUYXJnZXQgZnJvbSBcIi4uL2NvbXBvbmVudC9UYXJnZXRcIjtcclxuaW1wb3J0IFJvdGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudC9Sb3RhdG9yXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU2NlbmUgZXh0ZW5kcyB1aS5nYW1lLkdhbWVTY2VuZVVJIHtcclxuICAgIHN0YXRpYyBpbnN0YW5jZTogR2FtZVNjZW5lO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5omT5byA6K+l5Y2V5L6L6aG16Z2i77yM6Kem5Y+Rb25PcGVuZWRcclxuICAgICAqIEBwYXJhbSBwYXJhbSAgb25PcGVuZWTmlrnms5XnmoTkvKDlj4JcclxuICAgICAqL1xyXG4gICAgc3RhdGljIG9wZW5JbnN0YW5jZShwYXJhbT86IGFueSkge1xyXG4gICAgICAgIGlmIChHYW1lU2NlbmUuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgR2FtZVNjZW5lLmluc3RhbmNlLm9uT3BlbmVkKHBhcmFtKTtcclxuICAgICAgICAgICAgLy8gR2FtZVNjZW5lLmluc3RhbmNlLnNob3dUdXRvcmlhbCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIExheWEuU2NlbmUub3BlbihDb25zdC5VUkxfR2FtZVNjZW5lLCBmYWxzZSwgcGFyYW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW5lZChwYXJhbT86IGFueSkge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgLy8gdGhpcy5zdGF0ZSA9IENvbnN0LkdhbWVTdGF0ZS5SRUFEWTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2NlbmUzRDogTGF5YS5TY2VuZTNEO1xyXG4gICAgcHJpdmF0ZSBjYW1lcmE6IExheWEuQ2FtZXJhO1xyXG4gICAgcHJpdmF0ZSBkaXJlY3Rpb25MaWdodDogTGF5YS5EaXJlY3Rpb25MaWdodDtcclxuXHJcbiAgICAvKiogc3RhZ2UgKi9cclxuICAgIHByaXZhdGUgZ2FtZVN0YWdlOiBMYXlhLlNwcml0ZTNEO1xyXG4gICAgcHVibGljIHN0YWdlSWR4OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgTWF4QnVsbGV0TnVtOiBudW1iZXIgPSA1O1xyXG4gICAgcHVibGljIGN1cnJCdWxsZXROdW06IG51bWJlciA9IDA7XHJcblxyXG4gICAgLyoqIGJ1bGxldCAqL1xyXG4gICAgcHJpdmF0ZSBfYnVsbGV0OiBMYXlhLk1lc2hTcHJpdGUzRDtcclxuICAgIHByaXZhdGUgYnVsbGV0UmFkaXVzOiBudW1iZXIgPSAwLjAyO1xyXG4gICAgcHJpdmF0ZSBidWxsZXRWZWxvY2l0eTogbnVtYmVyID0gMTtcclxuICAgIHByaXZhdGUgYnVsbGV0SW5pdFBvczogTGF5YS5WZWN0b3IzO1xyXG4gICAgcHJpdmF0ZSBidWxsZXREaXJlY3Rpb246IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoKTtcclxuXHJcbiAgICAvKiogY2Fubm9uICovXHJcbiAgICBwcml2YXRlIHBsYXllcjogTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICBwcml2YXRlIHBsYXllckFuaTogTGF5YS5BbmltYXRvcjtcclxuICAgIHByaXZhdGUgc2hvb3RUaW1lOiBudW1iZXIgPSAtMTs7XHJcblxyXG4gICAgLyoqIHJheWNhc3QgKi9cclxuICAgIHByaXZhdGUgbW91c2VQb2ludDogTGF5YS5WZWN0b3IyID0gbmV3IExheWEuVmVjdG9yMigpO1xyXG4gICAgcHJpdmF0ZSByYXk6IExheWEuUmF5ID0gbmV3IExheWEuUmF5KG5ldyBMYXlhLlZlY3RvcjMoMCwgMCwgMCksIG5ldyBMYXlhLlZlY3RvcjMoMCwgMCwgMCkpO1xyXG4gICAgcHJpdmF0ZSBoaXRSZXN1bHQ6IExheWEuSGl0UmVzdWx0ID0gbmV3IExheWEuSGl0UmVzdWx0KCk7XHJcblxyXG4gICAgLyoqIGdhbWUgc3RhdGUgKi9cclxuICAgIHB1YmxpYyBzdGF0ZTogbnVtYmVyID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICBHYW1lU2NlbmUuaW5zdGFuY2UgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRTY2VuZTNEKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFBsYXllcigpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRCdWxsZXQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGFnZUlkeCA9IDE7XHJcbiAgICAgICAgdGhpcy5sb2FkR2FtZVN0YWdlKCk7XHJcblxyXG4gICAgICAgIC8vIG1vdXNlIGNsaWNrIGV2ZW50IGxpc3Rlbjogc2hvb3QgYSBidWxsZXRcclxuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMub25DbGljayk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIGluaXRpYWxpemUgc2NlbmUgKi9cclxuICAgIHByaXZhdGUgaW5pdFNjZW5lM0QoKSB7XHJcbiAgICAgICAgLy8gYWRkIHNjZW5lXHJcbiAgICAgICAgdGhpcy5zY2VuZTNEID0gTGF5YS5zdGFnZS5hZGRDaGlsZChuZXcgTGF5YS5TY2VuZTNEKCkpIGFzIExheWEuU2NlbmUzRDtcclxuXHJcbiAgICAgICAgLy8gY2FtZXJhXHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSB0aGlzLnNjZW5lM0QuYWRkQ2hpbGQobmV3IExheWEuQ2FtZXJhKCkpIGFzIExheWEuQ2FtZXJhO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gQ29uc3QuQ2FtZXJhSW5pdFBvcy5jbG9uZSgpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXIgPSBDb25zdC5DYW1lcmFJbml0Um90RXVsZXIuY2xvbmUoKTtcclxuXHJcbiAgICAgICAgLy8gZGlyZWN0aW9uIGxpZ2h0XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25MaWdodCA9IHRoaXMuc2NlbmUzRC5hZGRDaGlsZChuZXcgTGF5YS5EaXJlY3Rpb25MaWdodCgpKSBhcyBMYXlhLkRpcmVjdGlvbkxpZ2h0O1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uTGlnaHQudHJhbnNmb3JtLmxvY2FsUG9zaXRpb24gPSBDb25zdC5MaWdodEluaXRQb3MuY2xvbmUoKTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkxpZ2h0LnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXIgPSBDb25zdC5MaWdodEluaXRSb3RFdWxlci5jbG9uZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBpbml0aWFsaXplIHBsYXllciAqL1xyXG4gICAgcHJpdmF0ZSBpbml0UGxheWVyKCkge1xyXG4gICAgICAgIExheWEuU3ByaXRlM0QubG9hZChDb25zdC5QbGF5ZXJSZXNVcmwsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgKHJlcykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllciA9IHJlcztcclxuICAgICAgICAgICAgdGhpcy5zY2VuZTNELmFkZENoaWxkKHRoaXMucGxheWVyKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJBbmkgPSB0aGlzLnBsYXllci5nZXRDb21wb25lbnQoTGF5YS5BbmltYXRvcik7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gQ29uc3QuUGxheWVySW5pdFBvcy5jbG9uZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllci50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyID0gQ29uc3QuUGxheWVySW5pdFJvdC5jbG9uZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllci50cmFuc2Zvcm0ubG9jYWxTY2FsZSA9IENvbnN0LlBsYXllckluaXRTY2FsZS5jbG9uZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIubmFtZSA9IFwicGxheWVyXCI7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2hhZG93TWF0OiBMYXlhLkJsaW5uUGhvbmdNYXRlcmlhbCA9ICh0aGlzLnBsYXllci5nZXRDaGlsZEJ5TmFtZShcInNoYWRvd18wXCIpIGFzIExheWEuTWVzaFNwcml0ZTNEKS5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgYXMgTGF5YS5CbGlublBob25nTWF0ZXJpYWw7XHJcbiAgICAgICAgICAgIHNoYWRvd01hdC5yZW5kZXJNb2RlID0gTGF5YS5CbGlublBob25nTWF0ZXJpYWwuUkVOREVSTU9ERV9UUkFOU1BBUkVOVDtcclxuICAgICAgICAgICAgc2hhZG93TWF0LmFsYmVkb0NvbG9yQSA9IDAuMjtcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCBzaG9vdGluZyBhbmltYXRpb25cclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJBbmkuZ2V0RGVmYXVsdFN0YXRlKCkuY2xpcC5pc2xvb3BpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllckFuaS5wbGF5KCk7XHJcbiAgICAgICAgICAgIExheWEudGltZXIuZnJhbWVMb29wKDEsIHRoaXMsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIHBsYXkgc2hvb3RpbmcgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob290VGltZS0tO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvb3RUaW1lIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0b3AgcGxheWluZ1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyQW5pLnNwZWVkID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBpbml0aWFsaXplIGJ1bGxldCAqL1xyXG4gICAgcHJpdmF0ZSBpbml0QnVsbGV0KCkge1xyXG4gICAgICAgIHRoaXMuX2J1bGxldCA9IG5ldyBMYXlhLk1lc2hTcHJpdGUzRChMYXlhLlByaW1pdGl2ZU1lc2guY3JlYXRlU3BoZXJlKENvbnN0LkJ1bGxldFJhZGl1cykpO1xyXG5cclxuICAgICAgICAvKiogYWRkIHJpZ2lkYm9keSAqL1xyXG4gICAgICAgIGxldCBidWxsZXRSaWdpZDogTGF5YS5SaWdpZGJvZHkzRCA9IHRoaXMuX2J1bGxldC5hZGRDb21wb25lbnQoTGF5YS5SaWdpZGJvZHkzRCk7XHJcbiAgICAgICAgYnVsbGV0UmlnaWQuY29sbGlkZXJTaGFwZSA9IG5ldyBMYXlhLlNwaGVyZUNvbGxpZGVyU2hhcGUoQ29uc3QuQnVsbGV0UmFkaXVzKTtcclxuXHJcbiAgICAgICAgLyoqIHNldCBwaHlzaWNzICovXHJcbiAgICAgICAgYnVsbGV0UmlnaWQubWFzcyA9IDEwO1xyXG4gICAgICAgIGJ1bGxldFJpZ2lkLm92ZXJyaWRlR3Jhdml0eSA9IHRydWU7XHJcbiAgICAgICAgYnVsbGV0UmlnaWQuZ3Jhdml0eSA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgLTUsIDApO1xyXG4gICAgICAgIC8vIHF1aWNrIG1vdmluZyBkZXRlY2lvblxyXG4gICAgICAgIGJ1bGxldFJpZ2lkLmNjZE1vdGlvblRocmVzaG9sZCA9IDAuMDAwMTtcclxuICAgICAgICBidWxsZXRSaWdpZC5jY2RTd2VwdFNwaGVyZVJhZGl1cyA9IENvbnN0LkJ1bGxldFJhZGl1cztcclxuXHJcbiAgICAgICAgLyoqIHRyYXNmb3JtICovXHJcbiAgICAgICAgdGhpcy5fYnVsbGV0LnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gQ29uc3QuQnVsbGV0SW5pdFBvcy5jbG9uZSgpO1xyXG4gICAgICAgIHRoaXMuX2J1bGxldC50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyID0gQ29uc3QuQnVsbGV0SW5pdFJvdC5jbG9uZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9idWxsZXQubmFtZSA9IFwiX2J1bGxldFwiO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiByZXN0YXJ0IGN1cnJlbnQgc3RhZ2UgKi9cclxuICAgIHJlc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkR2FtZVN0YWdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHN0YXJ0IG5leHQgc3RhZ2UgKi9cclxuICAgIG5leHRTdGFnZSgpIHtcclxuICAgICAgICB0aGlzLnN0YWdlSWR4Kys7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhZ2VJZHggPD0gQ29uc3QuU3RhZ2VOdW0pIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkR2FtZVN0YWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIumAmuWFs1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIGxvYWQgZ2FtZSBzdGFnZSBieSBpbmRleCAqL1xyXG4gICAgcHJpdmF0ZSBsb2FkR2FtZVN0YWdlKCkge1xyXG4gICAgICAgIC8vIHJlc2V0XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhZ2UgJiYgdGhpcy5nYW1lU3RhZ2UuZGVzdHJveUNoaWxkcmVuKCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhZ2UgJiYgdGhpcy5nYW1lU3RhZ2UuZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuY3VyckJ1bGxldE51bSA9IDA7XHJcblxyXG4gICAgICAgIC8vIGxvYWQgc3RhZ2VcclxuICAgICAgICBsZXQgc2F0Z2VSZXNVcmw6IHN0cmluZyA9IENvbnN0LlN0YWdlUmVzVXJsICsgdGhpcy5zdGFnZUlkeCArIFwiLmxoXCI7XHJcbiAgICAgICAgTGF5YS5TcHJpdGUzRC5sb2FkKHNhdGdlUmVzVXJsLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIChyZXMpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lU3RhZ2UgPSB0aGlzLnNjZW5lM0QuYWRkQ2hpbGQocmVzKSBhcyBMYXlhLlNwcml0ZTNEO1xyXG5cclxuICAgICAgICAgICAgLy8gc2V0IHBvc1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVTdGFnZS50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbiA9IENvbnN0LlN0YWdlSW5pdFBvcy5jbG9uZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVTdGFnZS50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyID0gQ29uc3QuU3RhZ2VJbml0Um90LmNsb25lKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YWdlLnRyYW5zZm9ybS5sb2NhbFNjYWxlID0gQ29uc3QuU3RhZ2VJbml0U2NhbGUuY2xvbmUoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGRlc3Ryb3kgYW5pbWF0b3IgY29tcG9uZW50OiDkuI3nhLbkvJrnuqbmnZ/niannkIbnorDmkp7mlYjmnpxcclxuICAgICAgICAgICAgKHRoaXMuZ2FtZVN0YWdlLmdldENvbXBvbmVudChMYXlhLkFuaW1hdG9yKSBhcyBMYXlhLkFuaW1hdG9yKS5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY2hpbGQ6IExheWEuTWVzaFNwcml0ZTNEO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5nYW1lU3RhZ2UubnVtQ2hpbGRyZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQgPSB0aGlzLmdhbWVTdGFnZS5nZXRDaGlsZEF0KGkpIGFzIExheWEuTWVzaFNwcml0ZTNEO1xyXG4gICAgICAgICAgICAgICAgLyoqIHRhcmdldCBvYmplY3QgKi9cclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5uYW1lLnNlYXJjaChcIk9ic3RhY2xlXCIpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaGlsZC5uYW1lICsgXCIgdG8gdGFyZ2V0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHNjaXB0XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldFNjcmlwdDogVGFyZ2V0ID0gY2hpbGQuYWRkQ29tcG9uZW50KFRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHR5cGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQubmFtZS5zZWFyY2goXCJHbGFzc1wiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNjcmlwdC5zZXRUeXBlKENvbnN0LlRhcmdldFR5cGUuR0xBU1MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2NyaXB0LnNldFR5cGUoQ29uc3QuVGFyZ2V0VHlwZS5ERUZBVUxUKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvKiogc3RhbmRfYm94ICovXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGlsZC5uYW1lLnNlYXJjaChcIkN1YmVcIikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoaWxkLm5hbWUgKyBcIiB0byBzdGFuZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm5hbWUgPSBcInN0YW5kXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGNvbGxpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJpZ2lkOiBMYXlhLlBoeXNpY3NDb2xsaWRlciA9IGNoaWxkLmFkZENvbXBvbmVudChMYXlhLlBoeXNpY3NDb2xsaWRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJvdW5kaW5nQm94OiBMYXlhLkJvdW5kQm94ID0gY2hpbGQubWVzaEZpbHRlci5zaGFyZWRNZXNoLmJvdW5kaW5nQm94LmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNpemVYOiBudW1iZXIgPSBib3VuZGluZ0JveC5tYXgueCAtIGJvdW5kaW5nQm94Lm1pbi54O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzaXplWTogbnVtYmVyID0gYm91bmRpbmdCb3gubWF4LnkgLSBib3VuZGluZ0JveC5taW4ueTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2l6ZVo6IG51bWJlciA9IGJvdW5kaW5nQm94Lm1heC56IC0gYm91bmRpbmdCb3gubWluLno7XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaWQuY29sbGlkZXJTaGFwZSA9IG5ldyBMYXlhLkJveENvbGxpZGVyU2hhcGUoc2l6ZVgsIHNpemVZLCBzaXplWik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHNjcmlwdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluWPsOWtkGJvdW5kYm9477yM5re75Yqg6ISa5pys77yM6ZyA6KaB5YW85a655aSa5Liq5bmz5Y+w5pe26IOc5Yip5Yik5patLCAmIG1lc2ggY29sbGlkZXIgc2hhcGXnorDmkp7mipbliqjpl67popggdG9kbyA8PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5hZGRDb21wb25lbnQoU3RhbmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8qKiBzdGFuZF9jeWxpbmRlciAqL1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hpbGQubmFtZS5zZWFyY2goXCJDeWxpbmRlclwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQubmFtZSArIFwiIHRvIHN0YW5kXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQubmFtZSA9IFwic3RhbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgY29sbGlkZXJcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmlnaWQ6IExheWEuUGh5c2ljc0NvbGxpZGVyID0gY2hpbGQuYWRkQ29tcG9uZW50KExheWEuUGh5c2ljc0NvbGxpZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29sbGlkZXJTaGFwZTogTGF5YS5NZXNoQ29sbGlkZXJTaGFwZSA9IG5ldyBMYXlhLk1lc2hDb2xsaWRlclNoYXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGlkZXJTaGFwZS5tZXNoID0gY2hpbGQubWVzaEZpbHRlci5zaGFyZWRNZXNoO1xyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2lkLmNvbGxpZGVyU2hhcGUgPSBjb2xsaWRlclNoYXBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLyoqIFJvdGF0b3IgKi9cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoaWxkLm5hbWUuc2VhcmNoKFwiUm90YXRvclwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQubmFtZSArIFwiIHRvIHJvdGF0b3JcIilcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgc2NyaXB0XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJvdGF0b3I6IFJvdGF0b3IgPSBjaGlsZC5hZGRDb21wb25lbnQoUm90YXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vdmVUeXBlOiBzdHJpbmcgPSBcIm1vdmVfbGVmdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5uYW1lLnNlYXJjaChcIlJvdGF0b3IuXFxcXFxcKDFcXFxcXFwpXzBcIikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlVHlwZSA9IFwibW92ZV9yaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGlsZC5uYW1lLnNlYXJjaChcIlJvdGF0b3IuXFxcXFxcKDJcXFxcXFwpXzBcIikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlVHlwZSA9IFwibW92ZV91cFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGlsZC5uYW1lLnNlYXJjaChcIlJvdGF0b3IuXFxcXFxcKDNcXFxcXFwpXzBcIikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlVHlwZSA9IFwibW92ZV9kb3duXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0b3Iuc2V0TW92ZVR5cGUobW92ZVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm5hbWUgPSBcInJvdGF0b3JcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogbW91c2UgY2xpY2sgZXZlbnQ6IHNob290IGEgYnVsbGV0ICovXHJcbiAgICBwcml2YXRlIG9uQ2xpY2soKSB7XHJcbiAgICAgICAgLy8gdXBkYXRlXHJcbiAgICAgICAgdGhpcy5jdXJyQnVsbGV0TnVtKys7XHJcblxyXG4gICAgICAgIC8vIHBsYXkgc2hvb3QgYW5pbWF0aW9uXHJcbiAgICAgICAgdGhpcy5zaG9vdFRpbWUgPSBDb25zdC5QbGF5ZXJTaG9vdExpZmVUaW1lO1xyXG4gICAgICAgIHRoaXMucGxheWVyQW5pLnNwZWVkID0gMTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IHJheVxyXG4gICAgICAgIHRoaXMubW91c2VQb2ludC54ID0gTGF5YS5Nb3VzZU1hbmFnZXIuaW5zdGFuY2UubW91c2VYO1xyXG4gICAgICAgIHRoaXMubW91c2VQb2ludC55ID0gTGF5YS5Nb3VzZU1hbmFnZXIuaW5zdGFuY2UubW91c2VZO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLnZpZXdwb3J0UG9pbnRUb1JheSh0aGlzLm1vdXNlUG9pbnQsIHRoaXMucmF5KTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IGJ1bGxldCBzaG9vdGluZyBkaXJlY3Rpb25cclxuICAgICAgICBpZiAodGhpcy5zY2VuZTNELnBoeXNpY3NTaW11bGF0aW9uLnJheUNhc3QodGhpcy5yYXksIHRoaXMuaGl0UmVzdWx0LCAzMCkpIHtcclxuICAgICAgICAgICAgLy8gZGlyZWN0aW9uIHZlY3RvcjogW2J1bGxldCBpbml0IHBvaW50XSB0byBbbW91c2UgaGl0IHBvaW50XVxyXG4gICAgICAgICAgICBMYXlhLlZlY3RvcjMuc3VidHJhY3QodGhpcy5oaXRSZXN1bHQucG9pbnQsIENvbnN0LkJ1bGxldEluaXRQb3MsIHRoaXMuYnVsbGV0RGlyZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGRpcmVjdGlvbiB2ZWN0b3I6IFtjYW1lcmEgcG9pbnRdIHRvIFttb3VzZSBoaXQgcG9pbnRdXHJcbiAgICAgICAgICAgIHZhciBhVjM6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoKTtcclxuICAgICAgICAgICAgLy8gcmF5IGRpcmVjdGlvbiBzY2FsZTogdG8gZGVwdGggc2NhbGVaXHJcbiAgICAgICAgICAgIGxldCBzY2FsZVY6IG51bWJlciA9IHRoaXMuY2FtZXJhLmZhclBsYW5lO1xyXG4gICAgICAgICAgICBzY2FsZVYgPSAyMDtcclxuICAgICAgICAgICAgTGF5YS5WZWN0b3IzLnNjYWxlKHRoaXMucmF5LmRpcmVjdGlvbiwgc2NhbGVWLCBhVjMpO1xyXG4gICAgICAgICAgICAvLyBkaXJlY3Rpb24gdmVjdG9yOiBbYnVsbGV0IGluaXQgcG9pbnRdIHRvIFtjYW1lcmEgcG9pbnRdXHJcbiAgICAgICAgICAgIHZhciBiVjM6IExheWEuVmVjdG9yMyA9IG5ldyBMYXlhLlZlY3RvcjMoKTtcclxuICAgICAgICAgICAgTGF5YS5WZWN0b3IzLnN1YnRyYWN0KHRoaXMuY2FtZXJhLnRyYW5zZm9ybS5wb3NpdGlvbiwgQ29uc3QuQnVsbGV0SW5pdFBvcywgYlYzKTtcclxuICAgICAgICAgICAgLy8gZGlyZWN0aW9uIHZlY3RvcjogW2J1bGxldCBpbml0IHBvaW50XSB0byBbbW91c2UgaGl0IHBvaW50XVxyXG4gICAgICAgICAgICBMYXlhLlZlY3RvcjMuYWRkKGFWMywgYlYzLCB0aGlzLmJ1bGxldERpcmVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIExheWEuVmVjdG9yMy5ub3JtYWxpemUodGhpcy5idWxsZXREaXJlY3Rpb24sIHRoaXMuYnVsbGV0RGlyZWN0aW9uKTtcclxuICAgICAgICB0aGlzLmJ1bGxldFZlbG9jaXR5ID0gNTA7XHJcbiAgICAgICAgTGF5YS5WZWN0b3IzLnNjYWxlKHRoaXMuYnVsbGV0RGlyZWN0aW9uLCB0aGlzLmJ1bGxldFZlbG9jaXR5LCB0aGlzLmJ1bGxldERpcmVjdGlvbik7XHJcblxyXG4gICAgICAgIC8vIGdlbmVyYXRlIGJ1bGxldFxyXG4gICAgICAgIGxldCBidWxsZXQ6IExheWEuTWVzaFNwcml0ZTNEID0gdGhpcy5fYnVsbGV0LmNsb25lKCk7XHJcbiAgICAgICAgYnVsbGV0Lm5hbWUgPSBcImJ1bGxldFwiO1xyXG4gICAgICAgIHRoaXMuc2NlbmUzRC5hZGRDaGlsZChidWxsZXQpO1xyXG4gICAgICAgIGxldCBidWxsZXRSaWdpZDogTGF5YS5SaWdpZGJvZHkzRCA9IGJ1bGxldC5nZXRDb21wb25lbnQoTGF5YS5SaWdpZGJvZHkzRCk7XHJcbiAgICAgICAgYnVsbGV0UmlnaWQubGluZWFyVmVsb2NpdHkgPSB0aGlzLmJ1bGxldERpcmVjdGlvbi5jbG9uZSgpO1xyXG5cclxuICAgICAgICBidWxsZXQuYWRkQ29tcG9uZW50KEJ1bGxldCk7XHJcbiAgICB9XHJcbn0iLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cbmltcG9ydCBWaWV3PUxheWEuVmlldztcclxuaW1wb3J0IERpYWxvZz1MYXlhLkRpYWxvZztcclxuaW1wb3J0IFNjZW5lPUxheWEuU2NlbmU7XG52YXIgUkVHOiBGdW5jdGlvbiA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcbmV4cG9ydCBtb2R1bGUgdWkuZ2FtZSB7XHJcbiAgICBleHBvcnQgY2xhc3MgR2FtZVNjZW5lVUkgZXh0ZW5kcyBTY2VuZSB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoKXsgc3VwZXIoKX1cclxuICAgICAgICBjcmVhdGVDaGlsZHJlbigpOnZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5jcmVhdGVDaGlsZHJlbigpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRTY2VuZShcImdhbWUvR2FtZVNjZW5lXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFJFRyhcInVpLmdhbWUuR2FtZVNjZW5lVUlcIixHYW1lU2NlbmVVSSk7XHJcbn1cciJdfQ==
